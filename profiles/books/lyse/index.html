<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"><head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="Content-Style-Type" content="text/css">
		<meta name="keywords" content="Erlang, Learn you some Erlang, Table of Contents">
		<meta name="description" content="Follow the links and be prepared to have your mind moderately blown.">
        <meta name="google-site-verification" content="mi1UCmFD_2pMLt2jsYHzi_0b6Go9xja8TGllOSoQPVU">
		<link rel="stylesheet" type="text/css" href="https://learnyousomeerlang.com/static/css/screen.css?v3" media="screen">
		<link rel="stylesheet" type="text/css" href="https://learnyousomeerlang.com/static/css/sh/shCore.css" media="screen">
		<link rel="stylesheet" type="text/css" href="https://learnyousomeerlang.com/static/css/sh/shThemeLYSE2.css" media="screen">
		<link rel="stylesheet" type="text/css" href="https://learnyousomeerlang.com/static/css/print.css" media="print">
		<link href="https://learnyousomeerlang.com/rss" type="application/rss+xml" rel="alternate" title="LYSE news">
		<link rel="icon" type="image/png" href="https://learnyousomeerlang.com/favicon.ico">
		<link rel="apple-touch-icon" href="https://learnyousomeerlang.com/static/img/touch-icon-iphone.png">
		<link rel="apple-touch-icon" sizes="72x72" href="https://learnyousomeerlang.com/static/img/touch-icon-ipad.png">
		<link rel="apple-touch-icon" sizes="114x114" href="https://learnyousomeerlang.com/static/img/touch-icon-iphone4.png">
		<title>Table of Contents | Learn You Some Erlang for Great Good!</title><style>hcfy-result.__hcfy__result__loaded__.__hcfy__result__both__{border: 1px dotted}</style><style>hcfy-result{display:none}hcfy-result.__hcfy__result__loading__.__hcfy__result__result__{display:inline-block}hcfy-result.__hcfy__result__loaded__:focus{border-color:transparent;outline:2px solid !important}hcfy-result.__hcfy__result__loaded____hcfy__result__source__{display:none}hcfy-result.__hcfy__result__loaded__.__hcfy__result__both__{display:block}hcfy-result.__hcfy__result__loaded__.__hcfy__result__both__.__hcfy__result__inline__{display:inline-block;margin-left:6px}hcfy-result.__hcfy__result__loaded__.__hcfy__result__result__{display:inline-block}
</style>
	</head>
	<body>
		<div id="wrapper">
			<div id="header">
				<h1>Learn you some Erlang<hcfy-result class="__hcfy__result__both__"></hcfy-result><!--hcfy-anchor--></h1>
				<span>for great good!<hcfy-result class="__hcfy__result__both__"></hcfy-result><!--hcfy-anchor--></span>
			</div> <!-- header -->
			<div id="menu">
				<ul>
					<li><a href="https://learnyousomeerlang.com/content" title="Home">Home<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">首页</hcfy-result><!--hcfy-anchor--></a></li>
					<li><a href="https://learnyousomeerlang.com/faq" title="Frequently Asked Questions">FAQ<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">常见问题</hcfy-result><!--hcfy-anchor--></a></li>
					<li><a href="https://learnyousomeerlang.com/rss" title="Latest News">RSS<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">RSS</hcfy-result><!--hcfy-anchor--></a></li>
					<li><a href="https://learnyousomeerlang.com/static/erlang/learn-you-some-erlang.zip" title="Source Code">Code<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">代码</hcfy-result><!--hcfy-anchor--></a></li>
				</ul>
			</div><!-- menu -->
			<div id="content">
            <div class="noscript"><noscript>Hey there, it appears your Javascript is disabled. That's fine, the site works without it. However, you might prefer reading it with syntax highlighting, which requires Javascript!</noscript></div>
<h2>Table of Contents<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">目录</hcfy-result><!--hcfy-anchor--></h2>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/introduction">Introduction<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">简介</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
	<li><a class="local chapter" href="https://learnyousomeerlang.com/introduction#about-this-tutorial" title="What this is about">About this tutorial<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">关于本教程</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/introduction#what-is-erlang" title="Describing Erlang">So what's Erlang?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">那么什么是 Erlang ？</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/introduction#kool-aid" title="In fact, don't drink any at all">Don't drink too much Kool-Aid<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">不要喝太多的 "酷爱" 饮料</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/introduction#what-you-need" title="Bullets and targets is all you need *pumps shotgun*">What you need to dive in<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">深入学习需要什么</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/introduction#get-help" title="Where to get help">Where to get help<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">哪里可以得到帮助</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/starting-out">Starting Out<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">起步</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
	<li><a class="local chapter" href="https://learnyousomeerlang.com/starting-out#the-shell" title="Command line supremacy">The Shell<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">外壳</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/starting-out#shell-commands" title="Using the command lines with supremacy">Shell Commands<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">外壳指令</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/starting-out-for-real">Starting Out (for real)<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">起步（这次是真的）</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
	<li><a class="local chapter" href="https://learnyousomeerlang.com/starting-out-for-real#numbers" title="Countin' stuff">Numbers<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">数字</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/starting-out-for-real#invariable-variables" title="Non-Contradictory Oxymoron">Invariable Variables<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">不变的变量</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/starting-out-for-real#atoms" title="Can't break them apart">Atoms<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">原子</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/starting-out-for-real#bool-and-compare" title="George Boole portrait inside!">Boolean Algebra and Comparison Operators<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">布尔代数和比较运算符</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/starting-out-for-real#tuples" title="A word fun to pronounce... and more!">Tuples<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">元组</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/starting-out-for-real#lists" title="Much like this table of contents">Lists<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">列表</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/starting-out-for-real#list-comprehensions" title="slightly harder to comprehend than regular lists">List Comprehensions<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">列表理解</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/starting-out-for-real#bit-syntax" title="This is binary country">Bit Syntax<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">字节的语法</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/starting-out-for-real#binary-comprehensions" title="Pushing it over the top">Binary Comprehensions<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">二进制理解</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/modules">Modules<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">模块</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
	<li><a class="local chapter" href="https://learnyousomeerlang.com/modules#what-are-modules" title="Describing them modules">What are modules<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">什么是模块</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/modules#module-declaration" title="Writing them modules">Module Declaration<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">模块声明</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/modules#compiling-the-code" title="Compiling them modules">Compiling the Code<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">编译代码</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/modules#more-about-modules" title="More Abouting them modules?">More About Modules<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">关于模块的更多信息</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/syntax-in-functions">Syntax in Functions<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">函数中的语法</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
	<li><a class="local chapter" href="https://learnyousomeerlang.com/syntax-in-functions#pattern-matching" title="Pattern matching again!">Pattern Matching<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">模式匹配</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/syntax-in-functions#guards-guards" title="Protecting the function's kingdom">Guards, Guards!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">守卫！！守卫！！</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/syntax-in-functions#what-the-if" title="Oh man, I love bad puns. Do you?">What the If!?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">What the If ？！</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/syntax-in-functions#in-case-of" title="I've gotta stop these terrible puns">In Case ... of<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">在 ... 的情况下</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/syntax-in-functions#which-to-use" title="Choices, so many choices.">Which to use?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">使用哪个？</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/types-or-lack-thereof">Types (or lack thereof)<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">类型（或缺乏类型）</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
	<li><a class="local chapter" href="https://learnyousomeerlang.com/types-or-lack-thereof#dynamite-strong-typing" title="Seems like I can't stop punning!">Dynamite-strong Typing<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">动态强势类型</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/types-or-lack-thereof#type-conversions" title="one-point conversions with a kick and two points for a run!">Type Conversions<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">类型转换</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/types-or-lack-thereof#to-guard-a-data-type" title="Can't find a pun for this one.">To Guard a Data Type<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">保护一个数据类型</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/types-or-lack-thereof#for-type-junkies" title="Injecting success typings straight into your veins">For Type Junkies<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">对于类型迷们来说</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/recursion">Recursion<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">递归</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
	<li><a class="local chapter" href="https://learnyousomeerlang.com/recursion#hello-recursion" title="why do you keep overing these titles?">Hello recursion!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">你好啊递归！</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/recursion#length" title="The exciting tutorial about finding the lenght of a list">Length<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">长度</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/recursion#length-tail-recursion" title="Like a dog running after its tail">Length of Tail Recursion<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">尾递归的长度</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/recursion#more-recursive-functions" title="The world (defined as recursion) is not enough">More recursive functions<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">更多递归函数</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/recursion#quick-sort" title="Oh yeah! the traditional example!">Quick, Sort!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">快，排序！</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/recursion#more-than-lists" title="Climbing trees">More than lists<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">比列表更多</hcfy-result><!--hcfy-anchor--></a></li>
	<li><a class="local chapter" href="https://learnyousomeerlang.com/recursion#thinking-recursively" title="My two cents">Thinking recursively<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">递归的思考方式</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/higher-order-functions">Higher Order Functions<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">高阶函数</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/higher-order-functions#get-functional" title="Let's get functional, functional, I wanna get functional...">Let's get functional<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">让我们开始行动吧</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/higher-order-functions#anonymous-functions" title="I've been through the desert on a function with no name, it felt good to be out of the rain...">Anonymous functions<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">匿名功能</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/higher-order-functions#maps-filters-folds" title="Okay I have no song for that one">Maps, filters, folds and more<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">地图、过滤器、折页等</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/errors-and-exceptions">Errors and Exceptions<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">错误和异常</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/errors-and-exceptions#not-so-fast" title="Needed a name for the chapter's intro">Not so fast!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">不要那么快！</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/errors-and-exceptions#a-compilation-of-errors" title="It's a list. About compile-time errors. Puns never stop.">A Compilation of Errors<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">错误汇编</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/errors-and-exceptions#no-u" title="it's you">No, YOUR logic is wrong!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">不，你的逻辑是错误的！</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/errors-and-exceptions#run-time-errors" title="No pun for that title.">Run-time Errors<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">运行时错误</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/errors-and-exceptions#raising-exceptions" title="... FROM THE DEAD!!!">Raising Exceptions<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">引发异常</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/errors-and-exceptions#dealing-with-exceptions" title="I'm a lost cause">Dealing with Exceptions<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">处理异常</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/errors-and-exceptions#theres-more" title="I'm a lost cause">Wait, there's more!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">等等，还有呢！</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/errors-and-exceptions#try-a-try-in-a-tree" title="there are more sections to this chapter than the previous one">Try a try in a tree<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">在树上试一试</hcfy-result><!--hcfy-anchor--></a></li>    
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/functionally-solving-problems">Functionally Solving Problems<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">从功能上解决问题</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/functionally-solving-problems#rpn-calculator" title="Crazy, crazy poles!">Reverse Polish Notation Calculator<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">逆波兰计算器</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/functionally-solving-problems#heathrow-to-london" title="Gonna get that old uncle's money">Heathrow to London<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">希思罗机场至伦敦</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/a-short-visit-to-common-data-structures">A Short Visit to Common Data Structures<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">对常见数据结构的简短访问</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/a-short-visit-to-common-data-structures#wont-be-too-long" title="Unlike the chapter's title...">Won't be too long, promised!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">不会太长，我保证！</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/a-short-visit-to-common-data-structures#records" title="I actually have no pun idea for this one">Records<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">记录</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/a-short-visit-to-common-data-structures#key-value-stores" title="A key store is something I really have never seen. Only in some general stores and dépanneurs.">Key-Value Stores<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">键值存储</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/a-short-visit-to-common-data-structures#arrays" title="A wide array of sections">Arrays<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">数组</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/a-short-visit-to-common-data-structures#set-of-sets" title="Set theory is not a subset of this book, yet sets are.">A Set of Sets<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">一组集合</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/a-short-visit-to-common-data-structures#directed-graphs" title="This title intentionally left blank">Directed Graphs<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">有向图</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/a-short-visit-to-common-data-structures#queues" title="*cricket sounds*">Queues<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">队列</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/a-short-visit-to-common-data-structures#end-of-the-short-visit" title="Well, that was nice of you to come by!">End of the short visit<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">短暂访问结束</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/the-hitchhikers-guide-to-concurrency">The Hitchhiker's Guide to Concurrency<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">并发的搭便车指南</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/the-hitchhikers-guide-to-concurrency#dont-panic" title="And always bring a towel">Don't Panic<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">不要惊慌</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/the-hitchhikers-guide-to-concurrency#concepts-of-concurrency" title="This title unrelated to Douglas Adams' book">Concepts of Concurrency<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">并发的概念</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/the-hitchhikers-guide-to-concurrency#not-entirely-unlike" title="Not entirely unlike a title I thought of myself">Not Entirely Unlike Linear Scaling<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">与线性扩展并不完全不同</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/the-hitchhikers-guide-to-concurrency#thanks-for-all-the-fish" title="Nothing said about mice">So long and thanks for all the fish!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">再见了并且感谢所有的鱼！</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/more-on-multiprocessing">More On Multiprocessing<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">更多关于多处理的信息</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/more-on-multiprocessing#state-your-state" title="The state of my puns is appalling">State Your State<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">说明你的状态</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/more-on-multiprocessing#secret-messages" title="I love science fiction books, but it's no longer a secret">We love messages, but we keep them secret<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">我们喜欢消息，但我们对其保密</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/more-on-multiprocessing#time-out" title="Taking a pun break.">Time Out<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">时间到了</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/more-on-multiprocessing#selective-receives" title="I certainly am not selective about these snippets here">Selective Receives<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">选择性接收</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/errors-and-processes">Errors and Processes<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">错误和过程</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/errors-and-processes#links" title="No Zelda pun to be seen">Links<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">链接</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/errors-and-processes#its-a-trap" title="Not exactly">It's a Trap!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">这是个陷阱！</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/errors-and-processes#monitors" title="Watch me go">Monitors<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">监测器</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/errors-and-processes#naming-processes" title="This one is Charlie, he's my favorite">Naming Processes<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">命名进程</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/designing-a-concurrent-application">Designing a Concurrent Application<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">设计一个并发的应用程序</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/designing-a-concurrent-application#understanding-the-problem" title="Problem?">Understanding the Problem<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">了解问题</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/designing-a-concurrent-application#defining-the-protocol" title="here is the 'title' protocol: find a pun">Defining the Protocol<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">确定协议的内容</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/designing-a-concurrent-application#lay-them-foundations" title="the FUNdations!">Lay Them Foundations<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">奠定基础</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/designing-a-concurrent-application#an-event-module" title="An Event Title">An Event Module<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">一个事件模块</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/designing-a-concurrent-application#the-event-server" title="Getting served">The Event Server<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">事件服务器</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/designing-a-concurrent-application#hot-code-loving" title="Read this section with a Barry White voice in your head">Hot Code Loving<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">热爱代码</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/designing-a-concurrent-application#hide-your-messages" title="So, how's the reading so far?">I Said, Hide Your Messages<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">我说过，隐藏你的信息</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/designing-a-concurrent-application#a-test-drive" title="I hope you like it!">A Test Drive<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">试驾</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/designing-a-concurrent-application#adding-supervision" title="This isn't the kind of superman vision">Adding Supervision<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">添加监督</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/designing-a-concurrent-application#namespaces" title="LYSE_chapter_Namespaces">Namespaces (or lack thereof)<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">命名空间（或缺乏命名空间）</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/what-is-otp">What is OTP?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">什么是 OTP ？</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/what-is-otp#its-the-open-telecom-platform" title="it's a title attribute!">It's The Open Telecom Platform!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">它就是开放电信平台！</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/what-is-otp#the-common-process-abstracted" title="The common title attribute, lazily filled">The Common Process, Abstracted<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">抽象化的通用程序</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/what-is-otp#the-basic-server" title="Here be kittens">The Basic Server<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">基本服务器</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/what-is-otp#specific-vs-generic" title="title=&quot;???&quot;">Specific Vs. Generic<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">特定的 Vs. 通用的</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/clients-and-servers">Clients and Servers<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">客户端和服务器</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/clients-and-servers#callback-to-the-future" title="Downloading at 88 bytes per second lets you go back in time">Callback to the Future<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">回访未来</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/clients-and-servers#beam-me-up-scotty" title="Scotty phone home">.BEAM me up, Scotty!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">.BEAM me up, Scotty!</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/finite-state-machines">Rage Against The Finite-State Machines<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">怒斥有限状态机器</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/finite-state-machines#what-are-they" title="Somewhat like a government, but they generally work better">What Are They?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">它们是什么？</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/finite-state-machines#generic-finite-state-machines" title="Somewhat like a generic government, but they generally work better">Generic Finite-State Machines<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">通用的有限状态机</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/finite-state-machines#a-trading-system-specification" title="Oh yes, bubbles and arrows, how I love thee">A Trading System Specification<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">一个交易系统的规范</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/finite-state-machines#game-trading-between-two-players" title="Trading in a game, not trading games">Game trading between two players<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">两个玩家之间的游戏交易</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/finite-state-machines#that-was-quite-something" title="Not like you can easily be 'Quite Nothing'">That Was Quite Something<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">这是很有意义的事情</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/finite-state-machines#fit-for-the-real-world" title="Short answer: not yet, no.">Fit for the Real World?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">适合现实世界吗？</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/event-handlers">Event Handlers<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">事件处理程序</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/event-handlers#handle-this" title="Time to get wed">Handle This! *pumps shotgun*<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">处理这个！*猎枪跳动*</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/event-handlers#generic-event-handlers" title="Generic title">Generic Event Handlers<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">通用的事件处理程序</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/event-handlers#it-s-curling-time" title="The noblest sport of all along with Hockey.">It's Curling Time!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">冰壶（柯里）时间到了！</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/event-handlers#alert-the-press" title="A PLANE JUST INTERSECTED THE PENTAGON (hello geometry)">Alert The Press!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">提醒媒体！</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/supervisors">Who Supervises The Supervisors?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">谁监督监督员？</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/supervisors#from-bad-to-good" title="It's log, it's log, it's better than bad; it's good!">From Bad to Good<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">从坏到好</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/supervisors#supervisor-concepts" title="It's a little bit of visor, a little bit of super.">Supervisor Concepts<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">监督员的概念</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/supervisors#using-supervisors" title="They're objects, but not in the OOP sense">Using Supervisors<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">使用监督员</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/supervisors#child-specifications" title="I could provide a plan to make children, but this site would be 18+ and every visitor born on January 1st, 1970.">Child Specifications<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">儿童规格</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/supervisors#testing-it-out" title="No Pun For That One">Testing it Out<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">测试它</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/supervisors#dynamic-supervision" title="One more time, but with a smile!">Dynamic Supervision<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">动态监管</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/building-applications-with-otp">Building an Application With OTP<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">用 OTP 建立一个应用程序</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/building-applications-with-otp#a-pool-of-processes" title="splish splash I was taking a bath (and this gets stuck in your head)">A Pool of Processes<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">一个过程的集合</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/building-applications-with-otp#the-onion-layer-theory" title="You peel it and then, inside, there's an onion!">The Onion Layer Theory<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">洋葱层理论</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/building-applications-with-otp#a-pools-tree" title="I know, the subtitle here makes absolutely no sense">A Pool's Tree<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">池之树</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/building-applications-with-otp#implementing-the-supervisors" title="A company without workers">Implementing the Supervisors<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">实施监督者</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/building-applications-with-otp#working-on-the-workers" title="The real heroes of this application :')">Working on the Workers<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">在工人身上下功夫</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/building-applications-with-otp#writing-a-worker" title="A nagging feeling that the previous subsection was badly titled">Writing a Worker<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">编写工人</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/building-applications-with-otp#run-pool-run" title="Running a pool, not around it. Safety first!">Run Pool Run<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">运行泳池运行</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/building-applications-with-otp#cleaning-the-pool" title="Just dump all your chlorine in there">Cleaning the Pool<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">清理池子</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/building-otp-applications">Building OTP Applications<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">构建 OTP 应用程序</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/building-otp-applications#why-would-i-want-that" title="I'll tell you what I want, what I really really want...">Why Would I Want That?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">我为什么要这样做？</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/building-otp-applications#my-other-car-is-a-pool" title="CARPOOL, GET IT? Wait no, that's terrible">My Other Car is a Pool<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">我的另一辆车是一个游泳池</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/building-otp-applications#the-application-resource-file" title="Not gonna attempt a pun after the last one.">The Application Resource File<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">应用程序资源文件</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/building-otp-applications#the-application-behaviour" title="B. F. Skinner would love this">The Application Behaviour<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">应用程序的行为</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/building-otp-applications#from-chaos-to-application" title="It still remains kind of chaotic">From Chaos to Application<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">从混沌到应用</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/building-otp-applications#library-applications" title="Send your resume to books, to be hired in books, because you studied in books.">Library Applications<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">图书馆的应用</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/the-count-of-applications">The Count of Applications<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">应用程序的计数</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/the-count-of-applications#from-otp-application-to-real-application" title="We have a truckload of applications -- and we're not nearly done yet">From OTP Application to Real Application<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">从 OTP 应用到真实应用</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/the-count-of-applications#run-app-run" title="And all of a sudden your App is in historical photos all over the world">Run App Run<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">Run App Run</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/the-count-of-applications#included-applications" title="We tend to exclude these (for real)">Included Applications<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">包括的应用</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/the-count-of-applications#complex-terminations" title="So surprising they give you complexes (and credence to Jung)">Complex Terminations<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">复杂的终端</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/release-is-the-word">Release is the Word<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">发布是一个词</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/release-is-the-word#am-i-an-executable-yet" title="How many sections where each word only starts with a vowel?">Am I an Executable Yet?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">我是一个可执行文件了吗？</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/release-is-the-word#fixing-the-leaky-pipes" title="Mario's dead. DEAD. Luigi's dumb. DUMB. But at least he can jump far and float. I've got Super Mario Bros 2's theme in my head right now">Fixing The Leaky Pipes<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">修复漏水的管道</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/release-is-the-word#releases-with-systools" title="Tools for systers">Releases With Systools<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">用系统工具发布</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/release-is-the-word#releases-with-reltool" title="Tools for real tools">Releases With Reltool<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">用 Reltool 发布</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/release-is-the-word#recipes" title="I'm always hungry these days.">Recipes<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">指南</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/release-is-the-word#released-from-releases" title="Not released from crappy puns though">Released From Releases<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">释义</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/relups">Leveling Up in The Process Quest<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">进程任务中的等级提升</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/relups#the-hiccups-of-appups-and-relups" title="I'm the hipopotamus and my rhymes are bottomless">The Hiccups of Appups and Relups<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">应用与重构的小插曲</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/relups#the-ninth-circle-of-erl" title="It's my own Inferno">The 9th Circle of Erl<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">埃尔的第九圈</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/relups#progress-quest" title="Hopefully you're progressing on your quest by reading this">Progress Quest<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">进步任务</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/relups#making-process-quest-better" title="How is this possible given how perfect my code always is?">Making Process Quest Better<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">让进程任务变得更好</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/relups#appup-files" title="A pop's pup's pop appup">Appup Files<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">Appup 文件</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/relups#upgrading-the-release" title="It's now a rerelease">Upgrading the Release<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">升级版本</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/buckets-of-sockets">Buckets Of Sockets<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">套接字的桶</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/buckets-of-sockets#io-lists" title="I, O, Let's go!">IO Lists<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">IO 列表</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/buckets-of-sockets#tcp-and-udp-brotocols" title="Jersey Shore, the Erlang way">TCP and UDP: Bro-tocols<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">TCP 和 UDP ： Bro-tocols</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/buckets-of-sockets#udp-sockets" title="anagram: USD Pockets">UDP Sockets<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">UDP 插座</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/buckets-of-sockets#tcp-sockets" title="Tea see pee, tee hee">TCP Sockets<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">TCP 插座</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/buckets-of-sockets#more-control-with-inet" title="Speaking of which, I control my puns in here">More Control With Inet<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">用 Inet 进行更多控制</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/buckets-of-sockets#sockserv-revisited" title="Recycling time">Sockserv, Revisited<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">Sockserv ，重新审视</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/buckets-of-sockets#where-to-go-from-now" title="May I suggest the next chapter?">Where to go From Now?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">从现在开始去哪里？</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/eunit">EUnited Nations Council<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">联合国理事会</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/eunit#the-need-for-tests" title="Need for Speedy tests">The Need for Tests<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">测试的必要性</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/eunit#eunit-whats-a-eunit" title="It is a virtual unit, of course!">EUnit, What's a EUnit?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">EUnit ，什么是 EUnit ？</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/eunit#test-generators" title="They still generate tests in case of test failure from the main grid">Test Generators<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">测试生成器</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/eunit#fixtures" title="all this socket and fixture talk...">Fixtures<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">固定装置</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/eunit#testing-regis" title="Regis Philbin must run 10 miles under a minute OR THE KITTENS DIE">Testing Regis<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">测试 Regis</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/eunit#he-who-knits-eunits" title="So boring I may yarn">He Who Knits Eunits<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">编织 Eunits 的人</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/ets">Bears, ETS, Beets<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">小熊、 ETS 、甜菜</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/ets#the-concepts-of-ets" title="There is actually content before this">The Concepts of ETS<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">ETS 的概念</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/ets#ets-phone-home" title="Replacing guns with walkie talkies in this chapter">ETS Phone Home<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">ETS 电话主页</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/ets#meeting-your-match" title="the roof, the roof, the roof is on fire">Meeting Your Match<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">与您相识</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/ets#you-have-been-selected" title="The chosen section for a crap pun">You Have Been Selected<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">您已被选中</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/ets#dets" title="All my databases are belong to you -- full of DETS">DETS<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">DETS</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/ets#a-little-less-conversation" title="I can't understand a thing he says">A Little Less Conversation, A Little More Action Please<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">请少一点谈话，多一点行动</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/distribunomicon">Distribunomicon<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">并 发 会 议</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/distribunomicon#alone-in-the-dark" title="Khajiits won't be afraid">Alone in the Dark<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">黑暗中的孤独</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/distribunomicon#this-is-my-boomstick" title="Retails for about a hundred and nine, ninety five. It's got a walnut stock, cobalt blue steel, and a hair trigger.">This is my Boomstick<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">这是我的摇杆</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/distribunomicon#fallacies-of-distributed-computing" title="ad hominem! ad hominem!">Fallacies of Distributed Computing<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">分布式计算的谬误</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/distribunomicon#dead-or-dead-alive" title="Or a living living thing versus a living not living thing">Dead or Dead Alive<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">死了还是活了</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/distribunomicon#my-other-cap-is-a-theorem" title="And my other car is a horse">My Other CAP is a Theorem<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">我的另一个 CAP 是一个定理</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/distribunomicon#setting-up-an-erlang-cluster" title="I'm allowing a break as the last title was a pun">Setting up an Erlang Cluster<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">建立一个 Erlang 集群</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/distribunomicon#cookies" title="Cookies are little cooks">Cookies<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">饼干</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/distribunomicon#remote-shells" title="A remote-controlled turtle">Remote Shells<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">远程外壳</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/distribunomicon#hidden-nodes" title="Count to 30 and try to find the node">Hidden Nodes<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">隐藏的节点</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/distribunomicon#firewalls" title="The long title! it does nothing!">The Walls are Made of Fire and the Goggles do Nothing<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">墙是火做的并且护目镜什么都不做</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/distribunomicon#rpc" title="THE REMOTE PROCEDURE CALL IS COMING FROM INSIDE THE HOUSE!">The Calls from Beyond<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">来自外部的呼唤</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/distribunomicon#burying-the-distribunomicon" title="So zombies can read it">Burying the Distribunomicon<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">埋藏在 Distribunomicon 中</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/distributed-otp-applications">Distributed OTP Applications<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">分布式 OTP 应用</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/distributed-otp-applications#adding-more-to-otp" title="THE SECRET IS MORE SALT">Adding More to OTP<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">为 OTP 添加更多内容</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/distributed-otp-applications#taking-and-failing-over" title="Mostly failing though">Taking and Failing Over<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">接管和失败</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/distributed-otp-applications#the-magic-8-ball" title="Where magic is randomness">The Magic 8-Ball<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">神奇的 8 号球</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/distributed-otp-applications#making-the-application-distributed" title="Put an address and a stamp on it">Making the Application Distributed<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">使应用程序分布式化</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/common-test-for-uncommon-tests">Common Test for Uncommon Tests<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">非普通测试的普通测试</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/common-test-for-uncommon-tests#what-is-common-test" title="surely has something to do with tests">What is Common Test<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">什么是共同测试</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/common-test-for-uncommon-tests#common-test-cases" title="TESTS AND CASES? WHAT IS THIS? THE TITLE HAS THE PUN?">Common Test Cases<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">常见的测试案例</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/common-test-for-uncommon-tests#testing-with-state" title="I personally test with frameworks, but whatever floats your boat">Testing With State<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">与国家测试</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/common-test-for-uncommon-tests#test-groups" title="Birds of a feather, tests of a whatever">Test Groups<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">测试小组</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/common-test-for-uncommon-tests#the-meeting-room" title="Where productivity is lost forever">The Meeting Room<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">会议室</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/common-test-for-uncommon-tests#test-suites" title="Clean, Elegant tests. No wait, that's suits.">Test Suites<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">测试套件</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/common-test-for-uncommon-tests#test-specifications" title="Configure EVERYTHING">Test Specifications<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">测试规范</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/common-test-for-uncommon-tests#large-scale-testing" title="Scales for fat people being built here">Large Scale Testing<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">大规模测试</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/common-test-for-uncommon-tests#integrating-eunit" title="So I heard you like test frameworks?">Integrating EUnit within Common Test<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">在通用测试中整合 EUnit</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/common-test-for-uncommon-tests#is-there-more" title="Yep. Otherwise this subsection wouldn't exist.">Is There More?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">还有吗？</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/mnesia">Mnesia And The Art of Remembering<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">Mnesia 和记忆的艺术</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/mnesia#whats-mnesia" title="Duh huh, I can't remember">What's Mnesia<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">什么是 Mnesia</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/mnesia#what-should-the-store-store" title="I hesitate between spores, scores and more stores">What Should the Store Store<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">商店应该储存什么</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/mnesia#from-record-to-table" title="I'm almost done with this book and I'm sure no one reads these puns">From Record to Table<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">从记录到表格</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/mnesia#of-schemas-and-mnesia" title="I got you to look after me, but you got me to look after you.">Of Schemas and Mnesia<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">模式和 Mnesia</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/mnesia#creating-tables-for-real" title="We crafty craftspeople">Creating Tables for Real<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">创建真正的表</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/mnesia#access-and-context" title="I have no puns to do with this and I feel tired.">Access and Context<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">访问和语境</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/mnesia#reads-writes-and-more" title="scribbles and doodles too">Reads, Writes, and More<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">读取、写入，以及更多</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/mnesia#implementing-the-first-requests" title="Yeah, it takes 7 sections before getting to requests!">Implementing The First Requests<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">实现第一个请求</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/mnesia#accounts-and-new-needs" title="Because specifications aren't specifications if they don't get to change all the time">Accounts And New Needs<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">账户和新需求</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/mnesia#meet-the-boss" title="Also your godfather">Meet The Boss<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">认识老板</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/mnesia#deleting-stuff-demonstrated" title="And now you're gone!">Deleting Stuff, Demonstrated<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">删掉的东西，演示</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/mnesia#qlc" title="Incomprehensible comprehensions? possibly">Query List Comprehensions<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">查询列表的理解</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/mnesia#remember-mnesia" title="The title has a pun with amnesia, big surprise!">Remember Mnesia<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">记住 Mnesia</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/dialyzer">Type Specifications and Erlang<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">类型规范和 Erlang</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/dialyzer#plt" title="PLTs Are The Best Sandwiches">PLT Are The Best Sandwiches<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">PLT 是最好的三明治</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/dialyzer#success-typing" title="Made it this far in the title without a typo">Success Typing<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">成功的类型化</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/dialyzer#type-inference-and-discrepancies" title="your code is so bad even machines detect it">Type Inference and Discrepancies<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">类型推理和差异性</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/dialyzer#typing-about-types-of-types" title="My type of repetitive titles">Typing About Types of Types<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">关于类型的类型的打法</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/dialyzer#typing-functions" title="tap tap tap type">Typing Functions<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">打字的功能</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/dialyzer#typing-practice" title="Man I'm almost done trying to find puns for goot :')">Typing Practice<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">打字练习</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/dialyzer#exporting-types" title="We like it, we share it with the world">Exporting Types<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">输出类型</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/dialyzer#typed-behaviours" title="So, so close to being done.">Typed Behaviours<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">类型化的行为</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/dialyzer#polymorphic-types" title="Types take many forms, often at once">Polymorphic Types<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">多态的类型</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/dialyzer#youre-my-type" title="Finally done">You're my Type<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">你是我的类型</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/conclusion">Conclusion<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">总结</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/conclusion#a-few-words" title="thank yous and such">A Few Words<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">寥寥数语</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/conclusion#other-topics" title="Additional stuffs that could have been covered">Other Topics<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">其他话题</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/conclusion#book" title="DEAD TREES AHEAD">LYSE as a book<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">LYSE 作为一本书</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/maps">Postscript: Maps<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">后记：映射</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/maps#about-this-chapter" title="I in fact needed a section title to avoid bad design and I was too lazy to change CSS">About This Chapter<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">关于本章</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/maps#eep" title="ROK Runner, meep meep!">EEP, EEP!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">EEP, EEP!</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/maps#what-maps-shall-be" title="answer: a data type">What Maps Shall Be<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">映射应是什么</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/maps#stubby-legs" title="the corgi of releases">Stubby Legs for Early Releases<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">早期发布的粗腿</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/maps#mexican-standoff" title="more intense than a sitoff">Mexican Standoff<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">墨西哥的对峙</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/maps#revised-for-maps" title="answer: not a lot">How This Book Would Be Revised For Maps<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">本书将如何为映射进行修订</hcfy-result><!--hcfy-anchor--></a></li>
</ul>

<h3><a class="local chapter" href="https://learnyousomeerlang.com/time">Postscript: Time Goes On<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">后记：时间在继续</hcfy-result><!--hcfy-anchor--></a></h3>
<ul class="toc">
    <li><a class="local chapter" href="https://learnyousomeerlang.com/time#on-time-for-time" title="I in fact needed a section title to avoid bad design and I was too lazy to change CSS">On Time for Time<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">让时间按时</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/time#how-things-were" title="living in the past">How Things Were<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">过去的事情</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/time#how-things-are" title="living in the future">How Things Are (18.0+)<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">世事无常（ 18.0+ ）</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/time#time-warp" title="living in the ???">Time Warp<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">时空隧道</hcfy-result><!--hcfy-anchor--></a></li>
    <li><a class="local chapter" href="https://learnyousomeerlang.com/time#survive-time-warps" title="living might be enough">How to Survive Time Warps<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">如何在时空隧道中生存</hcfy-result><!--hcfy-anchor--></a></li>
</ul>
				<ul class="navigation">
											<li style="visibility:hidden;"><a href="https://learnyousomeerlang.com/content" title="Previous chapter">&lt; Previous</a></li>
										
					<li><a href="https://learnyousomeerlang.com/contents" title="Index">Index<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">索引</hcfy-result><!--hcfy-anchor--></a></li>
					
											<li><a href="https://learnyousomeerlang.com/introduction" title="Next chapter">Next &gt;<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">下一篇 &gt;</hcfy-result><!--hcfy-anchor--></a></li>
									</ul>
			</div><div><div id="content">
            <div class="noscript"><noscript>Hey there, it appears your Javascript is disabled. That's fine, the site works without it. However, you might prefer reading it with syntax highlighting, which requires Javascript!</noscript></div>
<h2>Introduction<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">简介</hcfy-result><!--hcfy-anchor--></h2>
<h3><a class="section" name="about-this-tutorial">About this tutorial<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">关于本教程</hcfy-result><!--hcfy-anchor--></a></h3>

<p>This is the beginning of Learn You Some Erlang for Great Good! Reading this tutorial should be one of your first steps in learning Erlang, so let's talk about it a bit.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这是《Learn You Some Erlang for Great Good!》的开篇。阅读本教程应该是你学习 Erlang 的第一步，所以让我们来谈一谈它。</hcfy-result><!--hcfy-anchor--></p>

<img class="left" src="https://learnyousomeerlang.com/static/img/erlang.png" width="132" height="112" alt="Erlang logo">

<p>First of all, I began growing the idea of writing this after reading Miran Lipovača's <a class="external" href="http://learnyouahaskell.com/" title="Free Book!">Learn You a Haskell for great Good! (LYAH)</a> tutorial; I thought he did a great job making the language attractive and the learning experience friendly. As I already knew him, I asked him how he felt about me writing an Erlang version of his book. He liked the idea, being somewhat interested in Erlang.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">首先，我是在读了 Miran Lipovača 的 Learn You a Haskell for great Good! (LYAH) 的教程之后有了这个点子；我认为他做得很好，使这门语言很有吸引力，学习体验很友好。由于我已经认识他，我问他对我为他的书写一个Erlang版本有何看法。他喜欢这个主意，因为他也对 Erlang 有点兴趣。</hcfy-result><!--hcfy-anchor--></p>

<p>So here I am typing this. Of course there were other sources to my motivation: I mainly find the entry to the language to be hard (the web has sparse documentation and otherwise you need to buy books), and I thought the community would benefit from a LYAH-like guide. Less importantly, I've seen people attributing Erlang too much or not enough merit sometimes based on sweeping generalizations. Then there are people who sure as hell believe Erlang is nothing but hype. If I'd like to convince them otherwise, I know they're not likely to read this in the first place.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">所以我就在这里打了这些个字。当然，我的动机还有其他来源：我主要是觉得这门语言的入门很困难（网络上的文档很稀少，否则就需要买书），我认为社区会从一个类似 LYAH 的指南中受益。不太重要的是，我看到人们有时基于一概而论的方式将 Erlang 的优点过多或不足。然后还有一些人肯定地认为 Erlang 除了炒作之外什么都没有。如果我想说服他们，我知道他们首先不可能读这个。</hcfy-result><!--hcfy-anchor--></p>

<p>This book thus wants itself to be a way to learn Erlang for people who have basic knowledge of programming in imperative languages (such as C/C++, Java, Python, Ruby, etc) and may or may not know functional programming (Haskell, Scala, Erlang, Clojure, OCaml...). I also want to write this book in a honest manner, selling Erlang for what it is, acknowledging its weaknesses and strengths.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">因此，本书希望自己成为一个学习 Erlang 的方法，适用于那些有基本的命令式语言（如 C/C++ 、 Java 、 Python 、 Ruby 等）编程知识，可能知道也可能不知道函数式编程（ Haskell 、 Scala 、 Erlang 、 Clojure 、 OCaml ...）。我也想以诚实的方式来写这本书，推销 Erlang ，承认它的弱点和优点。</hcfy-result><!--hcfy-anchor--></p>


<h3><a class="section" name="what-is-erlang">So what's Erlang?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">那么什么是 Erlang ？</hcfy-result><!--hcfy-anchor--></a></h3>
<p>First of all, Erlang is a functional programming language. If you have ever worked with imperative languages, statements such as <code>i++</code> may be normal to you; in functional programming they are not allowed. In fact, changing the value of any variable is strictly forbidden! This may sound weird at first, but if you remember your math classes, it's in fact how you've learned it:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">首先， Erlang 是一种函数式编程语言。如果你曾经使用过命令式语言，像 i++ 这样的语句对你来说可能是正常的；在函数式编程中，它们是不允许的。事实上，改变任何变量的值都是严格禁止的！这初听起来可能很奇怪，但如果你记得你的数学课，事实上你就是这样学的：</hcfy-result><!--hcfy-anchor--></p>
<div id="highlighter_563928" class="syntaxhighlighter nogutter "><div class="bar                             "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">y = 2</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">x = y + 3</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">x = 2 + 3</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">x = 5</code></span></span></div></div></div>
<p>Had I added the following:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">如果我加上以下内容：</hcfy-result><!--hcfy-anchor--></p>
<div id="highlighter_682744" class="syntaxhighlighter nogutter "><div class="bar                 "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">x = 5 + 1</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">x = x</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">∴ 5 = 6</code></span></span></div></div></div>
<p>You would have been very confused. Functional programming recognizes this: If I say <var>x</var> is 5, then I can't logically claim it is also 6! This would be dishonest. This is also why a function with the same parameter should always return the same result:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">你就会非常困惑了。函数式编程认识到了这一点：如果我说 x 是 5 ，那么我就不能在逻辑上声称它也是 6 ！这是不诚实的。这将是不诚实的。这也是为什么具有相同参数的函数应该总是返回相同的结果：</hcfy-result><!--hcfy-anchor--></p>
<div id="highlighter_108495" class="syntaxhighlighter nogutter "><div class="bar                         "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">x = add_two_to(3) = 5</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">∴ x = 5</code></span></span></div></div></div>
<p>Functions always returning the same result for the same parameter is called referential transparency. It's what lets us replace <code>add_two_to(3)</code> with 5, as the result of <code>3+2</code> will always be 5. That means we can then glue dozens of functions together in order to resolve more complex problems while being sure nothing will break. Logical and clean isn't it? There's a problem though:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">对于相同的参数，函数总是返回相同的结果，这叫做参考透明度（引用透明）。它让我们用 5 来代替 add_two_to(3) ，因为 3+2 的结果永远是 5 。这意味着我们可以把几十个函数粘在一起，以解决更复杂的问题，同时确保不会出现任何故障。合乎逻辑，干净利落，不是吗？但有一个问题：</hcfy-result><!--hcfy-anchor--></p>
<div id="highlighter_93581" class="syntaxhighlighter nogutter "><div class="bar                  "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">x = today() = 2009/10/22</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 16px !important;"><code class="shell_output">-- wait a day --</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">x = today() = 2009/10/23</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">x = x</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">∴ 2009/10/22 = 2009/10/23</code></span></span></div></div></div>
<p>Oh no! My beautiful equations! They suddenly all turned wrong! How come my function returns a different result every day?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">哦不! 我美丽的方程式! 它们突然都变错了! 为什么我的函数每天都返回不同的结果？</hcfy-result><!--hcfy-anchor--></p>
<p>Obviously, there are some cases where it's useful to break referential transparency. Erlang has this very pragmatic approach with functional programming: obey its purest principles (referential transparency, avoiding mutable data, etc), but break away from them when real world problems pop up.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">显然，在某些情况下，打破参考透明是有用的。 Erlang 对函数式编程采取了这种非常务实的方法：遵守其最纯粹的原则（参考透明性、避免可变数据等），但当现实世界的问题出现时，就会脱离它们。</hcfy-result><!--hcfy-anchor--></p>

<img class="right" src="https://learnyousomeerlang.com/static/img/envelope.png" width="206" height="161" alt="An envelope">

<p>Now, we defined Erlang as a functional programming language, but there's also a large emphasis on concurrency and high reliability. To be able to have dozens of tasks being performed at the same time, Erlang uses the <a class="external" href="http://en.wikipedia.org/wiki/Actor_model" title="A more technical definition">actor model</a>, and each actor is a separate process in the virtual machine. In a nutshell, if you were an actor in Erlang's world, you would be a lonely person, sitting in a dark room with no window, waiting by your mailbox to get a message. Once you get a message, you react to it in a specific way: you pay the bills when receiving them, you respond to Birthday cards with a "Thank you" letter and you ignore the letters you can't understand.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">现在，我们把 Erlang 定义为一种函数式编程语言，但它也非常强调并发性和高可靠性。为了能够有几十个任务同时进行， Erlang 使用了 Actor 模型，每个角色（ actor ）都是虚拟机中的一个独立进程。简而言之，如果你是 Erlang 世界中的一个角色，你将是一个孤独的人，坐在一个没有窗户的黑屋子里，在你的邮箱旁等待着得到消息。一旦你收到消息，你就会以特定的方式做出反应：收到账单时，你会支付账单，用一封 "谢谢 "的信来回应生日贺卡，你会忽略那些你看不懂的信件。</hcfy-result><!--hcfy-anchor--></p>

<p>Erlang's actor model can be imagined as a world where everyone is sitting alone in their own room and can perform a few distinct tasks. Everyone communicates strictly by writing letters and that's it. While it sounds like a boring life (and a new age for the postal service), it means you can ask many people to perform very specific tasks for you, and none of them will ever do something wrong or make mistakes which will have repercussions on the work of others; they may not even know the existence of people other than you (and that's great).<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">Erlang 的 Actor 模型可以被想象成一个世界，每个人都独自坐在自己的房间里，可以执行一些不同的任务。每个人都严格通过写信进行交流，仅此而已。虽然这听起来是一种无聊的生活（也是邮政服务的新时代），但它意味着你可以要求许多人为你执行非常具体的任务，而他们都不会做错事或犯错，从而对其他人的工作产生影响；他们甚至可能不知道除你之外还有其他人的存在（这很好）。</hcfy-result><!--hcfy-anchor--></p>
<p>To escape this analogy, Erlang forces you to write actors (processes) that will share no information with other bits of code unless they pass messages to each other. Every communication is explicit, traceable and safe.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">为了摆脱这种比喻， Erlang 强迫你写行为体（进程），这些行为体不会与其他代码位共享任何信息，除非它们互相传递消息。每个通信都是明确的、可追踪的和安全的。</hcfy-result><!--hcfy-anchor--></p>

<p>When we defined Erlang, we did so at a language level, but in a broader sense, this is not all there is to it: Erlang is also a development environment as a whole. The code is compiled to bytecode and runs inside a virtual machine. So Erlang, much like Java and kids with ADD, can run anywhere. The standard distribution includes (among others) development tools (compiler, debugger, profiler, test framework), the Open Telecom Platform (OTP) Framework, a web server, a parser generator, and the mnesia database, a key-value storage system able to replicate itself on many servers, supporting nested transactions and letting you store any kind of Erlang data.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">当我们定义 Erlang 时，我们是在语言层面上做的，但在更广泛的意义上，这并不是它的全部： Erlang 也是一个整体的开发环境。代码被编译成字节码并在虚拟机内运行。因此， Erlang ，很像 Java 和患有 ADD 的孩子，可以在任何地方运行。标准版本包括（除其他外）开发工具（编译器、调试器、剖析器、测试框架）、开放电信平台（OTP）框架、网络服务器、解析器生成器和 Mnesia 数据库，这是一个能够在许多服务器上自我复制的键值存储系统，支持嵌套交易，让你存储任何种类的 Erlang 数据。</hcfy-result><!--hcfy-anchor--></p>
<p>The VM and the libraries also allow you to update the code of a running system without interrupting any program, distribute your code with ease on many computers and manage errors and faults in a simple but powerful manner.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">它的虚拟机和库还允许你在不中断任何程序的情况下更新正在运行中系统的代码，在许多计算机上轻松分发你的代码，并以一种简单而强大的方式管理错误和故障。</hcfy-result><!--hcfy-anchor--></p>

<img class="right" src="https://learnyousomeerlang.com/static/img/letitcrash.png" width="206" height="320" alt="A crashed plane" title="Don't do this">

<p>We'll see how to use most of these tools and achieve safety later on, but for now, I'll tell you about a related general policy in Erlang: Let it crash. Not like a plane with dozens of passengers dying, but more like a tightrope walker with a safety net under him. While you should avoid making mistakes, you won't need to check for every type or error condition in most cases.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">我们将在后面看到如何使用这些工具中的大部分并做到安全，但现在，我将告诉你 Erlang 中一个相关的一般政策： 让 它 崩 溃 。不是像一架有几十名乘客死亡的飞机，而是更像一个身下有安全网的走钢丝的人。虽然你应该避免犯错，但在大多数情况下，你不需要对每个类型或错误条件进行检查。</hcfy-result><!--hcfy-anchor--></p>

<p>Erlang's ability to recover from errors, organize code with actors and making it scale with distribution and concurrency all sound awesome, which brings us to the next section...<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">Erlang 从错误中恢复的能力、用角色组织代码、并使其随着分布和并发而扩展，这些听起来都很了不起，这就把我们带到了下一节......</hcfy-result><!--hcfy-anchor--></p>

<h3><a class="section" name="kool-aid">Don't drink too much Kool-Aid<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">不要喝太多的酷爱饮料</hcfy-result><!--hcfy-anchor--></a></h3>

<p>There may be many little yellowish-orange sections named like this one around the book (you'll recognize them when you see them). Erlang is currently gaining lots of popularity due to zealous talks which may lead people to believe it's more than what it really is. These reminders will be there to help you keep your feet on the ground if you're one of these overenthusiastic learners.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">在书的周围可能有许多像这样命名的黄橙色的小节（你看到它们就会认出来）。由于狂热的谈话， Erlang 目前正在获得大量的人气，这可能会使人们相信的比它实际能做到的还要多。如果你是这些过度热情的学习者之一，这些提醒将帮助你保持脚踏实地。</hcfy-result><!--hcfy-anchor--></p>

<p>The first case of this is related to Erlang's massive scaling abilities due to its lightweight processes. It is true that Erlang processes are very light:  you can have hundreds of thousands of them existing at the same time, but this doesn't mean you have to use it that way just because you can. For example, creating a shooter game where everything including bullets is its own actor is madness. The only thing you'll shoot with a game like this is your own foot.  There is still a small cost in sending a message from actor to actor, and if you divide tasks too much, <em>you will make things slower</em>!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">第一种情况是与 Erlang 因其轻量级进程而具有的大规模扩展能力有关。诚然， Erlang 进程非常轻巧：你可以有成百上千个进程同时存在，但这并不意味着你必须这样使用它，只是因为你可以。例如，创建一个包括子弹在内的所有东西都是自己的角色的射击游戏是疯狂的。在这样的游戏中，你唯一会射击的东西就是你自己的脚。从演员到演员之间发送信息仍然有一个小的成本，如果你把任务分得太多，你会使事情变得更慢！我将会更深入地讨论这个问题。</hcfy-result><!--hcfy-anchor--></p>

<p>I'll cover this with more depth when we're far enough into the learning to actually worry about it, but just keep in mind that randomly throwing parallelism at a problem is not enough to make it go fast. Don't be sad; there are times when using hundreds of processes will both be possible and useful! It's just not happening all the time.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">当我们学习到足够长的时间，可以真正担心这个问题时，我会更深入地介绍这个问题，但请记住，随意向一个问题投掷并行性并不足以使其快速发展。不要伤心；有些时候，使用数百个进程是可能的，也是有用的！这不是所有的情况。只是不会一直发生。</hcfy-result><!--hcfy-anchor--></p>

<p>Erlang is also said to be able to scale in a directly proportional manner to how many cores your computer has, but this is usually not true: <hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">据说 Erlang 也能与你的计算机有多少个内核成正比地扩展，但这通常不是真的：</hcfy-result><!--hcfy-anchor--><img class="left" src="https://learnyousomeerlang.com/static/img/scaling.png" width="220" height="185" alt="Bad Graph: Speed vs Cores: It just scales!">
it is possible, but most problems do not behave in a way that lets you just run everything at the same time.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这是有可能的，但大多数问题的行为方式并不能让你在同一时间内运行所有东西。</hcfy-result><!--hcfy-anchor--></p>

<p>There's something else to keep in mind: while Erlang does some things very well, it's technically still possible to get the same results from other languages. The opposite is also true; evaluate each problem as it needs to be, and choose the right tool according to the problem being addressed. Erlang is no silver bullet and will be particularly bad at things like image and signal processing, operating system device drivers, etc. and will shine at things like large software for server use (i.e.: queues, map-reduce), doing some lifting coupled with other languages, higher-level protocol implementation, etc. Areas in the middle will depend on you. You should not necessarily wall yourself in server software with Erlang: there have been cases of people doing unexpected and surprising things. One example is IANO, a robot created by the UNICT team, which uses Erlang for its artificial intelligence and won the silver medal at the 2009 <a class="external" href="http://eurobot.dmi.unict.it/">eurobot competition</a>. Another example is Wings 3D, an open source 3D modeler (but not a renderer) written in Erlang and thus cross-platform.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">还有一点要记住：虽然 Erlang 在某些方面做得很好，但从技术上讲，从其他语言得到同样的结果还是可能的。反之亦然；根据需要评估每个问题，并根据要解决的问题选择合适的工具。 Erlang 不是银弹，在图像和信号处理、操作系统设备驱动等方面会特别糟糕，而在用于服务器的大型软件（即：队列、 map-reduce ）、做一些与其他语言耦合的提升、更高级别的协议实现等方面会大放异彩。中间的领域将取决于你。你不一定要用 Erlang 把自己困在服务器软件里：已经有一些人做了意想不到的、令人惊讶的事情。一个例子是 IANO ，一个由 UNICT 团队创造的机器人，它的人工智能使用了 Erlang ，并在 2009 年的 eurobot 竞赛中获得了银奖。另一个例子是 Wings 3D ，一个用 Erlang 编写的开源 3D 建模器（但不是渲染器），因此是跨平台的。</hcfy-result><!--hcfy-anchor--></p>


<h3><a class="section" name="what-you-need">What you need to dive in<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">你需要潜心研究的东西</hcfy-result><!--hcfy-anchor--></a></h3>
<p>All you need to get started is a text editor and the Erlang environment. You can get the source code and the Windows binaries from <a class="external" href="http://erlang.org/download.html" title="official Erlang download page">the official Erlang website</a>. I won't go into much installation details, but for Windows, just download and run the binary files. Don't forget to add your Erlang directory to your <var>PATH</var> system variable to be able to access it from the command line.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">你只需要一个文本编辑器和 Erlang 环境就可以开始了。你可以从 Erlang 官方网站上获得源代码和 Windows 二进制文件。我就不多说安装细节了，但对于 Windows 来说，只要下载并运行二进制文件即可。不要忘记把你的 Erlang 目录添加到你的 PATH 系统变量中，以便能够从命令行中访问它。</hcfy-result><!--hcfy-anchor--></p>

<p>On Debian-based Linux distributions, you should be able to install the package by doing <code>$ apt-get install erlang</code>. On Fedora (if you have 'yum' installed), you can achieve the same by typing <code># yum install erlang</code>. However, these repositories often hold outdated versions of the Erlang packages; Using an outdated version could give you some differences with what you'll get from this tutorial and a hit in performance with certain applications. I thus encourage you to compile from source. Consult the README file within the package and Google to get all the installing details you'll need, they'll do a far better job than I ever will.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">在基于 Debian 的 Linux 发行版上，你应该能够通过执行 <code>$ apt-get install erlang</code> 来安装该软件包。在 Fedora 上（如果你安装了 'yum' ），你也可以通过输入&nbsp;<span style="color: rgb(85, 85, 85); font-family: monospace; font-size: 11.44px; background-color: rgb(238, 255, 204);"># yum install erlang</span>&nbsp;来实现。然而，这些软件库通常保存着过时的 Erlang 包；使用过时的版本可能会使你从本教程中得到的东西有一些差异，并且在某些应用程序中的性能会受到影响。因此，我鼓励你从源代码编译。请查阅软件包中的 README 文件和 Google ，以获得所有你需要的安装细节，他们会比我做得更好。</hcfy-result><!--hcfy-anchor--></p>

<p>On FreeBSD, many options are available to you. If you're using portmaster, you can do <code>portmaster lang/erlang</code>. For standard ports, it should be <code>cd /usr/ports/lang/erlang; make install clean</code>. Finally, if you want to use packages, run <code>pkg_add -rv erlang</code>.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">在 FreeBSD 上，你可以有很多选择。如果你使用 portmaster ，你可以做&nbsp;<code>portmaster lang/erlang</code>&nbsp;。对于标准端口，应该是&nbsp;<code>cd /usr/ports/lang/erlang; make install clean</code>&nbsp;。最后，如果你想使用软件包，运行&nbsp;<code>pkg_add -rv erlang</code>&nbsp;就好。</hcfy-result><!--hcfy-anchor--></p>

<p>If you're on OSX, you can install Erlang with <code>$ brew install erlang</code> (with <a class="external" href="https://github.com/Homebrew/homebrew">Homebrew</a>) or by doing <code>$ port install erlang</code> (if you prefer <a class="external" href="http://macports.org">MacPorts</a>.)<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">如果你在 OSX 上，你可以用&nbsp;<code>$ brew install erlang</code>&nbsp;（要有 Homebrew ）来安装Erlang，或者通过做&nbsp;<code>$ port install erlang</code>&nbsp;（如果你喜欢 MacPorts 的话。）</hcfy-result><!--hcfy-anchor--></p>

<p>Alternatively, Erlang Solutions Ltd. offers <a class="external" href="https://www.erlang-solutions.com/resources/download.html">packages for all major OSes</a>, which generally work pretty well (pick a 'Standard' distribution).<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">另外， Erlang Solutions Ltd. 提供了适用于所有主要操作系统的软件包，通常工作得很好（选择一个 "标准" 发行版）。</hcfy-result><!--hcfy-anchor--></p>

<div class="note">
	<p><strong>Note:</strong> at the time of this writing, I'm using Erlang version R13B+, but for best results, you should use newer ones.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">注意：在写这篇文章的时候，我使用的是Erlang的R13B+版本，但为了获得最佳效果，你应该使用较新的版本。</hcfy-result><!--hcfy-anchor--></p>
</div>


<h3><a class="section" name="get-help">Where to get Help<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">哪里可以得到帮助</hcfy-result><!--hcfy-anchor--></a></h3>
<p>There are a few places where you can get help. If you're using linux, you can access the man pages for good technical documentation. Erlang has a lists module (which we'll soon see): to get the documentation on lists, just type in <code>$ erl -man lists</code>.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">有几个地方你可以得到帮助。如果你使用的是 linux ，你可以访问 man 页面以获得良好的技术文档。 Erlang 有一个 lists 模块（我们很快就会看到）：要获得关于 lists 的文档，只要输入&nbsp;<code>$ erl -man lists</code>&nbsp;。</hcfy-result><!--hcfy-anchor--></p>

<p>On Windows, the installation should include HTML documentation. You can download it at any time from the <a class="external" href="http://erlang.org/doc/" title="Official Erlang HTML documentation">official erlang site</a>, or consult one of the <a class="external" href="http://erldocs.com/" title="Unofficial Erlang HTML documentation">cleaner alternative sites</a>.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">在 Windows 上，安装时应该包括 HTML 文档。你可以随时从 erlang 的官方网站上下载，或者咨询一个更干净的替代网站。</hcfy-result><!--hcfy-anchor--></p>

<p>Good coding practices can be found <a class="external" href="http://www.erlang.se/doc/programming_rules.shtml">here</a> once you feel you need to get everything clean. The code in this book will attempt to follow these guidelines, too.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">一旦你觉得需要把一切都弄干净，可以在这里找到良好的编码实践。本书中的代码也将试图遵循这些准则。</hcfy-result><!--hcfy-anchor--></p>

<p>Now, there are times where just getting the technical details isn't enough. When that happens, I tend to turn to two main sources: the official <a class="external" href="http://www.erlang.org/static/doc/mailinglist.html">mailing list</a> (you should follow it just to learn a bunch) and the <a class="external" href="irc://irc.freenode.net/erlang">#erlang</a> channel on <a class="external" href="http://freenode.net/">irc.freenode.net</a>.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">现在，有的时候，仅仅得到技术细节是不够的。当这种情况发生时，我倾向于转向两个主要来源：官方邮件列表（你应该关注它哪怕只是为了学一堆东西）和 irc.freenode.net 上的 #erlang 频道。</hcfy-result><!--hcfy-anchor--></p>

<p>Oh and if you're the type of person to go for cookbooks and pre-made recipes, <a class="external" href="http://trapexit.org/" title="trapexit, an Erlang community site">trapexit</a> is the place you're looking for. They also mirror the mailing lists as a forum and a general wiki, which can always be helpful.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">哦，如果你是那种喜欢买菜谱和预制菜谱的人， trapexit 就是你要找的地方。他们还将邮件列表镜像为一个论坛和一个普通的维基，这总是会有帮助。</hcfy-result><!--hcfy-anchor--></p>
				<ul class="navigation">
											<li><a href="https://learnyousomeerlang.com/contents" title="Previous chapter">&lt; Previous<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">&lt; 上一页</hcfy-result><!--hcfy-anchor--></a></li>
										
					<li><a href="https://learnyousomeerlang.com/contents" title="Index">Index<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">索引</hcfy-result><!--hcfy-anchor--></a></li>
					
											<li><a href="https://learnyousomeerlang.com/starting-out" title="Next chapter">Next &gt;<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">下一页 &gt;</hcfy-result><!--hcfy-anchor--></a></li>
									</ul>
			</div><div id="content">
            <div class="noscript"><noscript>Hey there, it appears your Javascript is disabled. That's fine, the site works without it. However, you might prefer reading it with syntax highlighting, which requires Javascript!</noscript></div>
<h2>Starting Out<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">开始学习</hcfy-result><!--hcfy-anchor--></h2>

<h3><a class="local" name="the-shell">The Shell<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">外壳</hcfy-result><!--hcfy-anchor--></a></h3>

<p>In Erlang, you can test most of your stuff in an emulator; it will run your scripts when compiled and deployed, but it will also let you edit stuff live. To start the shell in Linux, open a terminal and then type in <code>$ erl</code>. If you've set up everything fine, you should see text like this:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">在 Erlang 中，你可以在一个模拟器中测试你的大部分东西；它将在编译和部署时运行你的脚本，但它也会让你现场编辑东西。要在 Linux 中启动 shell ，打开终端，然后输入&nbsp;<code>$ erl</code>&nbsp;。如果你的设置一切正常，你应该看到这样的文字：</hcfy-result><!--hcfy-anchor--></p>
<div id="highlighter_562067" class="syntaxhighlighter nogutter "><div class="bar        "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">Erlang R13B01 (erts-5.7.2) [source] [smp:2:2] [rq:2] [async-threads:0] [hipe] [kernel-poll:false]</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;">&nbsp;</span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">Eshell V5.7.2&nbsp; (abort with ^G)</code></span></span></div></div></div>
<p>Congratulations, you're running the Erlang shell!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">恭喜你，你正在运行 Erlang shell ！</hcfy-result><!--hcfy-anchor--></p>

<p>For Windows users, you can still run the <code>erl.exe</code> shell, but it's recommended you instead use <code>werl.exe</code>, which can be found in your start menu (<code>programs &gt; Erlang</code>). Werl is a windows-only implementation of the Erlang shell, having its own window with scrollbars and supporting command-line editing (like copy-pasting, which got to be a pain with the standard <code>cmd.exe</code> shell in Windows). The erl shell is still required if you want to redirect standard input or output, or use pipelines.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">对于 Windows 用户，你仍然可以运行&nbsp;<code>erl.exe</code>&nbsp;shell，但建议你改用&nbsp;<code>werl.exe</code>&nbsp;，它可以在开始菜单中找到（&nbsp;<code>programs &gt; Erlang</code>&nbsp;）。 Werl 是 Erlang shell 的纯窗口实现，有自己的窗口和滚动条，支持命令行编辑（比如复制粘贴，这在 Windows 的标准&nbsp;<code>cmd.exe</code>&nbsp;shell中是很麻烦的）。如果你想重定向标准输入或输出，或者使用管道，则仍然需要 erl shell 。</hcfy-result><!--hcfy-anchor--></p>

<p>We'll be able to enter and run code in the emulator, but first, let's see how we can get around in it.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">我们将能够在模拟器中输入和运行代码，但首先，让我们看看我们如何能够在其中进行操作。</hcfy-result><!--hcfy-anchor--></p>


<h3><a class="local" name="shell-commands">Shell Commands<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">外壳命令</hcfy-result><!--hcfy-anchor--></a></h3>
<p>The Erlang shell has a built-in line editor based on a subset of Emacs, a popular text editor that's been in use since the 70s. If you know Emacs, you should be fine. For the others, you'll do fine anyway.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">Erlang shell 有一个基于 Emacs 子集的内置行编辑器， Emacs 是一个流行的文本编辑器，自70年代以来一直在使用。如果你知道 Emacs ，你应该没问题。对于其他人来说，无论如何你都会做得很好。</hcfy-result><!--hcfy-anchor--></p>

<img class="right" src="https://learnyousomeerlang.com/static/img/shell.png" width="312" height="143" alt="super turtle" title="In your face, Hare!">

<p>First of all, if you type some text and then go <code>^A</code> (Ctrl+A), you should see your cursor moving to the beginning of the line. <code>^E</code> (Ctrl+E) gets you to the end. You can use arrow keys to go forward, backwards, show previous or next lines so you can repeat code.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">首先，如果你输入一些文字，然后&nbsp;<code>^A</code>&nbsp;(Ctrl+A) ，你应该看到你的光标移动到行的开头。&nbsp;<code>^E</code>&nbsp;(Ctrl+E) 让你到最后。你可以用方向键向前、向后、显示上一行或下一行，这样你就可以重复代码。</hcfy-result><!--hcfy-anchor--></p>
<p>If you type something like <code>li</code> and then press "tab", the shell will have completed the terms for you to <code>lists:</code>. Press tab again, and the shell will suggest you many functions to use after. This is Erlang completing the module <code>lists</code> and then suggesting functions from it. You may find the notation weird, but don't worry, you'll get familiar with it soon enough.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">如果你输入像&nbsp;<code>li</code>&nbsp;这样的东西，然后按 "tab" ， shell 就会为你完成术语&nbsp;<code>lists:</code>&nbsp;。再按 tab 键， shell 就会给你推荐很多后面可以用的函数。这就是 Erlang 完成了模块&nbsp;<code>lists</code>&nbsp;然后从中推荐了一些函数。你可能会觉得这个符号很奇怪，但别担心，你很快就会熟悉它了。</hcfy-result><!--hcfy-anchor--></p>

<p>I think we've seen enough of shell functionality to be alright, except for one thing: we don't know how to leave! There's a fast way to find how. Just type in <code>help().</code> and you should get information on a bunch of commands you can use in the shell (do not forget the full stop (<code>.</code>) as it is necessary for the command to run). We'll use some of them at a later point, but the only line of concern to us in order to get out is<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">我想我们已经看到了足够多的 shell 功能，除了一件事：我们不知道如何离开！有一个快速的途径可以找到怎么办。只要输入&nbsp;<code>help().</code>&nbsp;，你就会得到一堆你可以在 shell 中使用的命令的信息（不要忘记句点 (<code>.</code>) ，因为它是命令得以提交以运行的必要条件）。我们将在以后使用其中的一些，但为了出去，我们唯一关心的一行是</hcfy-result><!--hcfy-anchor--><br>
<code>q()        -- quit - shorthand for init:stop()<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true"><span style="font-size: 11.44px; background-color: rgb(238, 255, 204);">q() -- 退出 - 简写于 init:stop()</span></hcfy-result><!--hcfy-anchor--></code><br>
So this is one way to do it (in fact, two ways). But this won't help us if the shell freezes! If you were paying attention, when you started the shell, there was a comment about 'aborting with <code>^G</code>'. Let's do that, and then press <code>h</code> to get help!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">所以这是一种方法（事实上是两种方法）。但如果外壳冻结了，这对我们没有帮助！如果你注意了，当你启动 shell 时，有一条关于 "用&nbsp;<code>^G</code>&nbsp;中止" 的注释。让我们这样做吧，然后按h键来获得帮助！</hcfy-result><!--hcfy-anchor--></p>
<div id="highlighter_985590" class="syntaxhighlighter nogutter "><div class="bar       show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">User switch command</code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 8px !important;"><code class="shell_output">--&gt; h</code></span></span></div><div class="line alt1"><code class="number">03.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 16px !important;"><code class="shell_output">c [nn]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - connect to job</code></span></span></div><div class="line alt2"><code class="number">04.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 16px !important;"><code class="shell_output">i [nn]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - interrupt job</code></span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 16px !important;"><code class="shell_output">k [nn]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - kill job</code></span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 16px !important;"><code class="shell_output">j&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - list all jobs</code></span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 16px !important;"><code class="shell_output">s [shell]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - start local shell</code></span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 16px !important;"><code class="shell_output">r [node [shell]]&nbsp; - start remote shell</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 16px !important;"><code class="shell_output">q&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - quit erlang</code></span></span></div><div class="line alt2"><code class="number">10.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 16px !important;"><code class="shell_output">? | h&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - this message</code></span></span></div><div class="line alt1"><code class="number">11.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 8px !important;"><code class="shell_output">--&gt;</code></span></span></div></div></div>

<p>If you type in <code>i</code> then <code>c</code>, Erlang should stop the currently running code and bring you back to a responsive shell. <code>j</code> will give you a list of processes running (a star after a number indicates this is the job you are currently running), which you can then interrupt with <code>i</code> followed by the number. If you use <code>k</code>, you will kill the shell as it is instead of just interrupting it. Press <code>s</code> to start a new one.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">如果你输入&nbsp;<code>i</code>&nbsp;然后&nbsp;<code>c</code>&nbsp;， Erlang 应该停止当前运行的代码，并把你带回一个响应的 shell 。&nbsp;<code>j</code>&nbsp;会给你一个正在运行的进程列表（数字后面的星表示这是当前正在运行的工作），然后你可以用&nbsp;<code>i</code>&nbsp;跟着数字中断它。如果你使用&nbsp;<code>k</code>&nbsp;，你将杀死正在运行的 shell 而不是仅仅中断它。按&nbsp;<code>s</code>&nbsp;来启动一个新的。</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_728751" class="syntaxhighlighter nogutter "><div class="bar        show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">Eshell V5.7.2&nbsp; (abort with ^G)</code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">1&gt;</code> <code class="string">"OH NO THIS SHELL IS UNRESPONSIVE!!! *hits ctrl+G*"</code></span></span></div><div class="line alt1"><code class="number">03.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">User switch command</code></span></span></div><div class="line alt2"><code class="number">04.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 8px !important;"><code class="shell_output">--&gt; k</code></span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 8px !important;"><code class="shell_output">--&gt; c</code></span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">Unknown job</code></span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 8px !important;"><code class="shell_output">--&gt; s</code></span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 8px !important;"><code class="shell_output">--&gt; j</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 24px !important;"><code class="shell_output">2* {shell,start,[]}</code></span></span></div><div class="line alt2"><code class="number">10.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 8px !important;"><code class="shell_output">--&gt; c 2</code></span></span></div><div class="line alt1"><code class="number">11.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">Eshell V5.7.2&nbsp; (abort with ^G)</code></span></span></div><div class="line alt2"><code class="number">12.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">1&gt;</code> <code class="string">"YESS!"</code></span></span></div></div></div>
<p>If you read back the help text, you'll notice we can start remote shells. I won't get into details right now, but this should give you an idea of what the Erlang VM can do apart from running code. For now, let's get things started (for real).<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">如果你回读帮助文本，你会发现我们可以启动远程 shell 。我现在不谈细节，但这应该能让你了解 Erlang VM 除了运行代码外还能做什么。现在，让我们开始工作吧（真正的）。</hcfy-result><!--hcfy-anchor--></p>
				<ul class="navigation">
											<li><a href="https://learnyousomeerlang.com/introduction" title="Previous chapter">&lt; Previous<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">&lt; 上一页</hcfy-result><!--hcfy-anchor--></a></li>
										
					<li><a href="https://learnyousomeerlang.com/contents" title="Index">Index<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">索引</hcfy-result><!--hcfy-anchor--></a></li>
					
											<li><a href="https://learnyousomeerlang.com/starting-out-for-real" title="Next chapter">Next &gt;<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">下一页 &gt;</hcfy-result><!--hcfy-anchor--></a></li>
									</ul>
			</div><div id="content">
            <div class="noscript"><noscript>Hey there, it appears your Javascript is disabled. That's fine, the site works without it. However, you might prefer reading it with syntax highlighting, which requires Javascript!</noscript></div>
<h2>Starting Out (for real)<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">开始（真正地）学习</hcfy-result><!--hcfy-anchor--></h2>

<div class="note" style="margin-top:2.5em">
	<p>Erlang is a relatively small and simple language (in the way C is simpler than C++). There are a few basic data types built in the language, and as such, this chapter will cover most of them. Reading it is strongly advised as it explains the building blocks for all the programs you'll write with Erlang later on.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">埃尔朗是一种相对较小且简单的语言（就像 C 比 C++ 简单一样）。该语言中有一些基本的数据类型，因此，本章将涵盖其中的大部分。强烈建议阅读本章，因为它解释了你以后用 Erlang 编写的所有程序的构建模块。</hcfy-result><!--hcfy-anchor--></p>
</div>

<h3><a class="section" name="numbers">Numbers<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">数字</hcfy-result><!--hcfy-anchor--></a></h3>

<p>In the Erlang shell, <strong>expressions have to be terminated with a period followed by whitespace</strong> (line break, a space etc.), otherwise they won't be executed. You can separate expressions with commas, but only the result of the last one will be shown (the others are still executed). This is certainly unusual syntax for most people and it comes from the days Erlang was implemented directly in Prolog, a logic programming language.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">在 Erlang shell 中，表达式必须以句号和空白符（换行符、空格等）结尾，否则不会被执行。你可以用逗号来分隔表达式，但只有最后一个表达式的结果会被返回而显示出来（其他的仍然被执行）。这对大多数人来说当然是不寻常的语法，它来自 Erlang 直接在 Prolog （一种逻辑编程语言）中实现的时代。</hcfy-result><!--hcfy-anchor--></p>

<p>Open the Erlang shell as described in the previous chapters and let's type them things!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">按照前几章的描述，打开 Erlang shell ，让我们来输入这些东西吧！</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_679792" class="syntaxhighlighter nogutter "><div class="bar     show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">1&gt;</code> <code class="numerics">2</code> <code class="symbols">+</code> <code class="numerics">15</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">17</code></span></span></div><div class="line alt1"><code class="number">03.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">2&gt;</code> <code class="numerics">49</code> <code class="symbols">*</code> <code class="numerics">100</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">04.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">4900</code></span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">3&gt;</code> <code class="numerics">1892</code> <code class="symbols">-</code> <code class="numerics">1472</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">420</code></span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">4&gt;</code> <code class="numerics">5</code> <code class="symbols">/</code> <code class="numerics">2</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">2.5</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">5&gt;</code> <code class="numerics">5</code> <code class="keyword">div</code> <code class="numerics">2</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">10.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">2</code></span></span></div><div class="line alt1"><code class="number">11.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">6&gt;</code> <code class="numerics">5</code> <code class="keyword">rem</code> <code class="numerics">2</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">12.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">1</code></span></span></div></div></div>

<p>You should have noticed Erlang doesn't care if you enter floating point numbers or integers: both types are supported when dealing with arithmetic. <hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">你应该注意到 Erlang 并不关心你输入的是浮点数还是整数：在处理算术时两种类型都支持。</hcfy-result><!--hcfy-anchor--><img class="right" src="https://learnyousomeerlang.com/static/img/calculator.png" width="97" height="128" alt="A calculator with the number '80085' typed in" title="tee hee"> Integers and floating values are pretty much the only types of data Erlang's mathematical operators will handle transparently for you. However, if you want to have the integer-to-integer division, use <code>div</code>, and to have the modulo operator, use <code>rem</code> (remainder).<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">整数和浮点数几乎是 Erlang 的数学运算符为你透明地处理的唯一数据类型。然而，如果你想拥有整数到整数的除法，请使用&nbsp;<code>div</code>&nbsp;，如果想拥有 modulo 运算符，请使用&nbsp;<code>rem</code>&nbsp;（余）。</hcfy-result><!--hcfy-anchor--></p>

<p>Note that we can use several operators in a single expression, and mathematical operations obey the normal precedence rules.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">请注意，我们可以在一个表达式中使用几个运算符，数学运算服从正常的优先级规则。</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_333757" class="syntaxhighlighter nogutter "><div class="bar                     "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">7&gt;</code> <code class="plain">(</code><code class="numerics">50</code> <code class="symbols">*</code> <code class="numerics">100</code><code class="plain">) </code><code class="symbols">-</code> <code class="numerics">4999</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">1</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">8&gt;</code> <code class="symbols">-</code><code class="plain">(</code><code class="numerics">50</code> <code class="symbols">*</code> <code class="numerics">100</code> <code class="symbols">-</code> <code class="numerics">4999</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">-1</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">9&gt;</code> <code class="symbols">-</code><code class="numerics">50</code> <code class="symbols">*</code> <code class="plain">(</code><code class="numerics">100</code> <code class="symbols">-</code> <code class="numerics">4999</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">6.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">244950</code></span></span></div></div></div>

<p>If you want to express integers in other bases than base 10, just enter the number as <code>Base#Value</code> (given Base is in the range 2..36):<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">如果你想用其他基数（即，进位数/进制）表示整数，而不是用基数 10 （而不是用十进制），那么就只需输入&nbsp;<code>Base#Value</code>&nbsp;即可（给定基数在 2 到 36 范围内）：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_510331" class="syntaxhighlighter nogutter "><div class="bar                                "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">10&gt;</code> <code class="numerics">2</code><code class="plain">#</code><code class="numerics">101010</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">42</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">11&gt;</code> <code class="numerics">8</code><code class="plain">#</code><code class="numerics">0677</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">447</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">12&gt;</code> <code class="numerics">16</code><code class="plain">#AE</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">6.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">174</code></span></span></div></div></div>

<p>Awesome! Erlang has the power of the calculator you have on the corner of your desk with a weird syntax on top of it! Absolutely exciting!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">棒极了！ Erlang 拥有你放在桌角的计算器的威力，上面还有一个奇怪的语法！绝对让人兴奋！</hcfy-result><!--hcfy-anchor--></p>


<h3><a class="section" name="invariable-variables">Invariable Variables<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">不变的变量</hcfy-result><!--hcfy-anchor--></a></h3>

<p>Doing arithmetic is alright, but you won't go far without being able to store results somewhere. For that, we'll use variables. If you have read the intro to this book, you'll know that variables can't be variable in functional programming. The basic behavior of variables can be demonstrated with these 7 expressions (note that variables begin with an uppercase letter):<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">做算术是没问题的，但如果不能把结果储存在某个地方，你就走不远。为此，我们将使用变量。如果你读过本书的介绍，你就会知道，在函数式编程中，变量是不能变的。变量的基本行为可以用这 7 个表达式来演示（注意，变量以大写字母开头）：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_377057" class="syntaxhighlighter nogutter "><div class="bar                                                                                                                                     "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">1&gt;</code> <code class="plain">One</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="errors">* 1: variable 'One' is unbound</code></span></span><hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true"><span style="color: rgb(78, 154, 6); text-indent: -21px; background-color: rgb(238, 238, 238);">&nbsp;* 1: 变量值 'One' 是未绑定的</span></hcfy-result><!--hcfy-anchor--></div><div class="line alt1"><code class="number">03.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">2&gt;</code> <code class="plain">One </code><code class="symbols">=</code> <code class="numerics">1</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">04.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">1</code></span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">3&gt;</code> <code class="plain">Un </code><code class="symbols">=</code> <code class="plain">Uno </code><code class="symbols">=</code> <code class="plain">One </code><code class="symbols">=</code> <code class="numerics">1</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">1</code></span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">4&gt;</code> <code class="plain">Two </code><code class="symbols">=</code> <code class="plain">One </code><code class="symbols">+</code> <code class="plain">One</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">2</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">5&gt;</code> <code class="plain">Two </code><code class="symbols">=</code> <code class="numerics">2</code><code class="symbols">.</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></div><div class="line alt2"><code class="number">10.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">2</code></span></span></div><div class="line alt1"><code class="number">11.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">6&gt;</code> <code class="plain">Two </code><code class="symbols">=</code> <code class="plain">Two </code><code class="symbols">+</code> <code class="numerics">1</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">12.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="errors">** exception error: no match of right hand side value 3</code></span></span><hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true"><span style="color: rgb(78, 154, 6); text-indent: -21px; background-color: rgb(238, 238, 238);">&nbsp;** 异常错误：无法匹配上右边的值 3</span></hcfy-result><!--hcfy-anchor--></div><div class="line alt1"><code class="number">13.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">7&gt;</code> <code class="atoms">two</code> <code class="symbols">=</code> <code class="numerics">2</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">14.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="errors">** exception error: no match of right hand side value 2</code></span></span><hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true"><span style="color: rgb(78, 154, 6); text-indent: -21px; background-color: rgb(238, 238, 238);">&nbsp;** 异常错误：无法匹配上右边的值 2</span></hcfy-result><!--hcfy-anchor--></div></div></div>

<p>The first thing these commands tell us is that you can assign a value to a variable exactly once; then you can 'pretend' to assign a value to a variable if it's the same value it already has. If it's different, Erlang will complain. It's a correct observation, but the explanation is a bit more complex and depends on the <code>=</code> operator. The <code>=</code> operator (not the variables) has the role of comparing values and complaining if they're different. If they're the same, it returns the value:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这些命令告诉我们的第一件事是，你可以准确地给一个变量赋值一次；然后你可以 "假装地" 给一个变量赋值，如果那等于它已有的值的话。如果不一样， Erlang 会抱怨。这是一个正确的现象，但解释起来就有点复杂了，而且取决于&nbsp;<code>=</code>&nbsp;运算符。&nbsp;<code>=</code>&nbsp;运算符（这不是赋值语句）的作用是比较数值，如果它们不一样就会抱怨。如果它们是一样的，它就会返回那个值。</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_755562" class="syntaxhighlighter nogutter "><div class="bar                           "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">8&gt;</code> <code class="numerics">47</code> <code class="symbols">=</code> <code class="numerics">45</code> <code class="symbols">+</code> <code class="numerics">2</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">47</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">9&gt;</code> <code class="numerics">47</code> <code class="symbols">=</code> <code class="numerics">45</code> <code class="symbols">+</code> <code class="numerics">3</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="errors">** exception error: no match of right hand side value 48</code></span></span><hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true"><span style="color: rgb(78, 154, 6); text-indent: -21px; background-color: rgb(238, 238, 238);">&nbsp;** 异常错误：无法匹配上右边的值 48</span></hcfy-result><!--hcfy-anchor--></div></div></div>

<p>What this operator does when mixed with variables is that if the left-hand side term is a variable and it is unbound (has no value associated to it), Erlang will automatically bind the right-hand side value to the variable on the left-hand side. The comparison will consequently succeed and the variable will keep the value in memory.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这个操作符与变量混合时的作用是，如果左边的项是一个变量，并且它没有绑定（没有被赋值）， Erlang 会自动将右边的值绑定到左边的变量上。因此，比较将会成功，并且该变量将在内存中保留该值。</hcfy-result><!--hcfy-anchor--></p>

<p>This behavior of the <code>=</code> operator is the basis of something called 'Pattern matching', which many functional programming languages have, although Erlang's way of doing things is usually regarded as more flexible and complete than alternatives. We'll see pattern matching with more detail when we visit the tuple and list types in this very chapter, and also with functions in the following chapters.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">运算符&nbsp;<code>=</code>&nbsp;这种行为是所谓的 "模式匹配" 的基础，许多函数式编程语言都有这种功能，尽管 Erlang 的做事方式通常被认为比其他方式更灵活和完整。当我们在这一章中访问元组和列表类型、以及在接下来的章节中还会看到函数上，我们会看到模式匹配的更多细节。</hcfy-result><!--hcfy-anchor--></p>

<p>The other thing the commands 1-7 told us is that variable names must begin with a capital letter. Command 7 failed because the word <var>two</var> had a lowercase letter to begin with. Technically, variables can start with an underscore ('_') too, but by convention their use is restricted to values you do not care about, yet you felt it was necessary to document what it contains.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">命令 1-7 告诉我们的另一件事是，变量名必须以大写字母开头。命令 7 失败了，因为&nbsp;<var style="background-color: rgb(255, 255, 255);">two</var>&nbsp;这个词是以小写字母开头的。从技术上讲，变量也可以以下划线&nbsp;('_') 开头，但按照惯例，它们的使用仅限于，你不关心它的值、然而你觉得有必要记录它所包含的内容的时候。</hcfy-result><!--hcfy-anchor--></p>

<p>You can also have variables that are only an underscore:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">你也可以有只有下划线的变量：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_793140" class="syntaxhighlighter nogutter "><div class="bar                                 "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">10&gt;</code> <code class="symbols">_</code> <code class="symbols">=</code> <code class="numerics">14</code><code class="numerics">+3</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">17</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">11&gt;</code> <code class="symbols">_</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="errors">* 1: variable '_' is unbound</code></span></span><hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true"><span style="color: rgb(78, 154, 6); text-indent: -21px; background-color: rgb(238, 238, 238);">&nbsp;* 1: 变量 '_' 未绑定</span></hcfy-result><!--hcfy-anchor--></div></div></div>

<p>Unlike any other kind of variable, it won't ever store any value. Totally useless for now, but you'll know it exists when we need it.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">与其他种类的变量不同，它永远不会存储任何值。现在完全没有用，但当我们需要它时，你会知道它的存在。</hcfy-result><!--hcfy-anchor--></p>

<div class="note">
	<p><strong>Note:</strong> If you're testing in the shell and save the wrong value to a variable, it is possible to 'erase' that variable by using the function <code>f(Variable).</code>. If you wish to clear all variable names, do <code>f().</code>.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">注意：如果你在 shell 中进行测试，并将错误的值保存到一个变量中，可以通过使用函数&nbsp;<code>f(Variable).</code>&nbsp;来 "擦除" 该变量。如果你希望清理掉所有的变量名，请执行&nbsp;<code>f().</code>&nbsp;。</hcfy-result><!--hcfy-anchor--></p>
	
	<p>These functions are there only to help you when testing and only work in the shell. When writing real programs, we won't be able to destroy values that way. Being able to do it only in the shell makes sense if you acknowledge Erlang being usable in industrial scenarios: it is wholly possible to have a shell being active for years without interruption... Let's bet that the variable <var>X</var> would be used more than once in that time period.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这些函数的存在只是为了在测试时帮助你，而且只在 shell 中工作。在编写真正的程序时，我们将不能以这种方式销毁数值。如果你承认 Erlang 可以在工业场景中使用，那么只在 shell 中使用是有意义的：一个 shell 完全有可能不间断地活动好几年…… 让我们打赌，变量名&nbsp;<var style="background-color: rgb(239, 243, 248);">X</var>&nbsp;在那个时间段内会被使用不止一次。</hcfy-result><!--hcfy-anchor--></p>
</div>


<h3><a class="section" name="atoms">Atoms<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">原子</hcfy-result><!--hcfy-anchor--></a></h3>


<p>There is a reason why variables names can't begin with a lowercase character: atoms. Atoms are literals, constants with their own name for value. What you see is what you get and don't expect more. The atom <var>cat</var> means "cat" and that's it. You can't play with it, you can't change it, you can't smash it to pieces; it's <var>cat</var>. Deal with it.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">变量名称不能以小写字母开头是有原因的：原子。原子是字面意思，是有自己名字的常量值。你看到的就是你得到的，不要期望更多。原子&nbsp;<var style="background-color: rgb(255, 255, 255);">cat</var>&nbsp;的意思是&nbsp;"cat" 并且仅此而已。你不能玩弄它，你不能改变它，你不能把它砸成碎片；它就是&nbsp;<var style="background-color: rgb(255, 255, 255);">cat</var>&nbsp;。处理好它。-----（译注：原子不是变量名，而是能和变量名绑定的仿佛 1 2 3 4 5 的一个值；你可以就当它是个数字，只不过不支持数学运算，并且还被允许写作多个小写字母这个样子。多说一嘴，在 elixir 里面是首字母大写或者冒号开头的是原子；另外 scheme 里也有类似的东西；在 scala 里面空的 object 也可以作原子用。这玩意儿你可以理解为很多时候比字符串更好的选择，因为在省去不必要的占空的同时它还做到了让与它相关的运算真的变得足够简单。其实譬如 java 里的枚举的话，先了解原子再了解枚举，可能会更豁然开朗一点儿。）</hcfy-result><!--hcfy-anchor--></p>

<p>While single words starting with a lowercase letter is a way to write an atom, there's more than one manner to do it:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">虽然以小写字母开头的单字是写原子的一种方式，但有不止一种方式可以做到：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_938730" class="syntaxhighlighter nogutter "><div class="bar                                                                                "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">1&gt;</code> <code class="atoms">atom</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">atom</code></span></span></div><div class="line alt1"><code class="number">03.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">2&gt;</code> <code class="atoms">atoms_rule</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">04.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">atoms_rule</code></span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">3&gt;</code> <code class="atoms">atoms_rule@erlang</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">atoms_rule@erlang</code></span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">4&gt;</code> <code class="atoms">'Atoms can be cheated!'</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">'Atoms can be cheated!'</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">5&gt;</code> <code class="atoms">atom</code> <code class="symbols">=</code> <code class="atoms">'atom'</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">10.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">atom</code></span></span></div></div></div>

<p>An atom should be enclosed in single quotes (') if it does not begin with a lower-case letter or if it contains other characters than alphanumeric characters, underscore (_), or @.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">如果一个原子不是以小写字母开头，或者包含除字母数字字符、下划线 (_) 或 @ 以外的其他字符，则应该用单引号 (') 括起来。</hcfy-result><!--hcfy-anchor--><br>
Expression 5 also shows that an atom with single quotes is exactly the same as a similar atom without them.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">表达式 5 还显示，带单引号的原子与不带单引号的类似原子完全相同。</hcfy-result><!--hcfy-anchor--></p>

<p>I compared atoms to constants having their name as their values. You may have worked with code that used constants before: as an example, let's say I have values for eye colors: <hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">我把原子比作以其名称为值的常量。你可能曾经处理过使用常量的代码：作为一个例子，假设我有眼睛颜色的值。</hcfy-result><!--hcfy-anchor--><img class="left" src="https://learnyousomeerlang.com/static/img/atom.png" width="193" height="198" alt="An Atom, as imagined by Rutherford"> <code>BLUE -&gt; 1, BROWN -&gt; 2, GREEN -&gt; 3, OTHER -&gt; 4</code>. You need to match the name of the constant to some underlying value. Atoms let you forget about the underlying values: my eye colors can simply be 'blue', 'brown', 'green' and 'other'. These colors can be used anywhere in any piece of code: the underlying values will never clash and it is impossible for such a constant to be undefined! If you really want constants with values associated to them, there's a way to do it that we'll see in <a class="chapter local" href="https://learnyousomeerlang.com/modules" title="Modules">chapter 4</a> (Modules).<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true"><code>BLUE -&gt; 1, BROWN -&gt; 2, GREEN -&gt; 3, OTHER -&gt; 4</code>&nbsp;。你需要将常量的名称与一些基础值相匹配。原子让你忘记底层值：我的眼睛颜色可以简单地称为 "蓝色" 、 "棕色" 、 "绿色" 和 "其他" 。这些颜色可以在任何一段代码中的任何地方使用：底层值永远不会发生冲突，而且这样的常量不可能是未定义的 如果你真的想让常量与数值相关联，有一种方法，我们将在第四章（模块）中看到。-----（译注：这里提到的就是原子这个数据类型的价值。你不需要麻烦地做一个数字对字符串的映射，然后才能开始做你的事情，其中还不得不用不明所以的数字来代指相应的含义，而字符串则只是一种笨拙的备注手段而已；用原子的话，这些本不必要计算的“数字”当然也就不会发生计算——因为不支持，所以不用怕出不该出的错误，而且代码非常简洁，你也不需要考虑什么多余的事，甚至不需要笨拙地用字符串备注，你只需要直接用就是了，这个语言的底层会把这些“不能计算的数字”在机器那边用最合适的方案来表达，比如……就好像一个只是有名字但并不占空的 object 那样。）</hcfy-result><!--hcfy-anchor--></p>

<p>An atom is therefore mainly useful to express or qualify data coupled with it. Used alone, it's a bit harder to find a good use to it. This is why we won't spend more time toying with them; their best use will come when coupled with other types of data.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">因此，一个原子主要用于表达或限定与之耦合的数据。单独使用时，要找到它的好用途就有点困难了。这就是为什么我们不会花更多的时间来玩弄它们；它们最好的用途将在与其他类型的数据耦合时出现。-----（译注：这里所谓的耦合方式之一比如就是在元组中结对。原子作为键值对中的键的部分存在，比用臃肿且易错的字符串或者不明所以的数字做键都要高到不知哪里去了。当然，滥用的坏处紧接着就会被提及了。）</hcfy-result><!--hcfy-anchor--></p>

<div class="note koolaid">
	<p><strong>Don't drink too much Kool-Aid:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">不要喝太多的酷爱饮料：</hcfy-result><!--hcfy-anchor--></strong><br>
		Atoms are really nice and a great way to send messages or represent constants. However there are pitfalls to using atoms for too many things: an atom is referred to in an "atom table" which consumes memory (4 bytes/atom in a 32-bit system, 8 bytes/atom in a 64-bit system). The atom table is not garbage collected, and so atoms will accumulate until the system tips over, either from memory usage or because 1048577 atoms were declared.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">原子真的很好，是发送消息或表示常数的好方法。然而，过多地使用原子会有一些隐患：原子在 "原子表" 中被提及，会消耗内存（ 32 位系统中 4 字节/原子， 64 位系统中 8 字节/原子）。原子表没有垃圾回收，因此原子会不断累积，直到系统，要么因为内存占用、要么因为申报了 11451411 个原子，而翻倒。</hcfy-result><!--hcfy-anchor--></p>

	<p>This means atoms should not be generated dynamically for whatever reason; if your system has to be reliable and user input lets someone crash it at will by telling it to create atoms, you're in serious trouble. Atoms should be seen as tools for the developer because honestly, it's what they are.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这意味着不管出于什么原因，都不应该动态生成原子；如果你的系统必须是可靠的，而用户的输入让某人通过告诉它创建原子而随意破坏它，那么你就有大麻烦了。原子应该被看作是开发者的工具，因为说实话，它们就是这样。-----（译注：确实如此。）</hcfy-result><!--hcfy-anchor--></p>
</div>

<div class="note">
	<p><strong>Note:</strong> some atoms are reserved words and can not be used except for what the language designers wanted them to be: function names, operators, expressions, etc. These are:
		<code>after and andalso band begin bnot bor bsl bsr bxor case catch cond div end fun if let not of or orelse query receive rem try when xor</code><hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">注意：有些原子是保留字（译注：即有可能是关键字或暂时不是但你仍然不能用），除了语言设计者希望它们成为的功能名称、运算符、表达式等以外，不能使用。这些是：&nbsp;<code>after and andalso band begin bnot bor bsl bsr bxor case catch cond div end fun if let not of or orelse query receive rem try when xor</code>&nbsp;-----（译注：看！人家就连关键字也是用原子做的！（这意味着什么呢？））</hcfy-result><!--hcfy-anchor--></p>
</div>

<img class="right" src="https://learnyousomeerlang.com/static/img/boole.png" width="198" height="224" alt="George Boole" title="&quot;Sup baby, would you like to go Booling?&quot;">

<h3><a class="section" name="bool-and-compare">Boolean Algebra &amp; Comparison operators<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">布尔代数 &amp; 比较运算符</hcfy-result><!--hcfy-anchor--></a></h3>

<p>One would be in pretty deep trouble if one couldn't tell the difference between what's small and big, what's true and false. As any other language, Erlang has ways to let you use boolean operations and to compare items.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">如果一个人不能区分什么是小的和大的，什么是真的和假的，那么他就会有很大的麻烦。和其他语言一样， Erlang 有办法让你使用布尔运算和比较项目。</hcfy-result><!--hcfy-anchor--></p>

<p>Boolean algebra is dirt simple:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">布尔代数是很简单的：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_623537" class="syntaxhighlighter nogutter "><div class="bar                             show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">1&gt;</code> <code class="atoms">true</code> <code class="keyword">and</code> <code class="atoms">false</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">false</code></span></span></div><div class="line alt1"><code class="number">03.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">2&gt;</code> <code class="atoms">false</code> <code class="keyword">or</code> <code class="atoms">true</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">04.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">true</code></span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">3&gt;</code> <code class="atoms">true</code> <code class="keyword">xor</code> <code class="atoms">false</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">true</code></span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">4&gt;</code> <code class="keyword">not</code> <code class="atoms">false</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">true</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">5&gt;</code> <code class="keyword">not</code> <code class="plain">(</code><code class="atoms">true</code> <code class="keyword">and</code> <code class="atoms">true</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">10.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">false</code></span></span></div></div></div>

<div class="note">
	<p><strong>Note:</strong> the boolean operators <code>and</code> and <code>or</code> will always evaluate arguments on both sides of the operator. If you want to have the short-circuit operators (which will only evaluate the right-side argument if it needs to), use <code>andalso</code> and <code>orelse</code>.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">注意：布尔运算符&nbsp;<code>and</code>&nbsp;和&nbsp;<code>or</code>&nbsp;总是会评估运算符两边的参数。如果你想拥有短路运算符（即如果可以的话它将只评估右边的参数），请使用&nbsp;<code>andalso</code>&nbsp;和&nbsp;<code>orelse</code>&nbsp;。</hcfy-result><!--hcfy-anchor--></p>
</div>

<p>Testing for equality or inequality is also dirt simple, but has slightly different symbols from those you see in many other languages:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">测试相等或不等也很土，但其符号与你在许多其他语言中看到的符号略有不同：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_128233" class="syntaxhighlighter nogutter "><div class="bar                                     "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">6&gt;</code> <code class="numerics">5</code> <code class="symbols">=:=</code> <code class="numerics">5</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">true</code></span></span></div><div class="line alt1"><code class="number">03.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">7&gt;</code> <code class="numerics">1</code> <code class="symbols">=:=</code> <code class="numerics">0</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">04.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">false</code></span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">8&gt;</code> <code class="numerics">1</code> <code class="symbols">=/=</code> <code class="numerics">0</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">true</code></span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">9&gt;</code> <code class="numerics">5</code> <code class="symbols">=:=</code> <code class="numerics">5.0</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">false</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">10&gt;</code> <code class="numerics">5</code> <code class="symbols">==</code> <code class="numerics">5.0</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">10.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">true</code></span></span></div><div class="line alt1"><code class="number">11.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">11&gt;</code> <code class="numerics">5</code> <code class="symbols">/</code><code class="symbols">=</code> <code class="numerics">5.0</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">12.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">false</code></span></span></div></div></div>

<p>First of all, if your usual language uses <code>==</code> and <code>!=</code> to test for and against equality, Erlang uses <code>=:=</code> and <code>=/=</code>.  The three last expressions (lines 9 to 11) also introduce us to a pitfall: Erlang won't care about floats and integers in arithmetic, but will do so when comparing them. No worry though, because the <code>==</code> and <code>/=</code> operators are there to help you in these cases. This is important to remember whether you want exact equality or not.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">首先，如果你常用的语言使用&nbsp;<code>==</code>&nbsp;和&nbsp;<code>!=</code>&nbsp;来测试相等与否，那么 Erlang 对应地就分别是&nbsp;<code>=:=</code>&nbsp;和&nbsp;<code>=/=</code>&nbsp;。 最后三个表达式（第 9 到 11 行）也给我们介绍了一个陷阱。 Erlang 在算术中不关心浮点数和整数，但在比较它们的时候会关心。不过不用担心，因为&nbsp;<code>==</code>&nbsp;和&nbsp;<code>/=</code>&nbsp;运算符在这些情况下可以帮助你。无论你是否想要完全相等，这一点都要记住。-----（译注：就是说，这两组，前组会更细致地比较类型、后者只比较值。）</hcfy-result><!--hcfy-anchor--></p>

<p>Other operators for comparisons are <code>&lt;</code> (less than), <code>&gt;</code> (greater than), <code>&gt;=</code> (greater than or equal to) and <code>=&lt;</code> (less than or equal to). That last one is backwards (in my opinion) and is the source of many syntax errors in my code. Keep an eye on that <code>=&lt;</code>.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">其他用于比较的运算符有&nbsp;<code>&lt;</code>&nbsp;（小于）、&nbsp;<code>&gt;</code>&nbsp;（大于）、&nbsp;<code>&gt;=</code>&nbsp;（大于或等于）和&nbsp;<code>=&lt;</code>&nbsp;（小于或等于）。最后一个是反向的（在我看来），是我代码中许多语法错误的来源。请注意那个&nbsp;<code>=&lt;</code>&nbsp;。-----（译注：其实这样挺好，省得新手迷惑，写代码就像画图一样愉快而且合理。就是得苦一苦已经习惯了类似于 C 那样的小于等于号的伙伴们了……入门的时候要把一个形似箭头的东西强行认成大小比较运算符，出门的时候还得再拧回来。而且这个&nbsp;<code>=&lt;</code>&nbsp;在 C++ 里貌似还有特定的别的含义！？。。。）</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_681743" class="syntaxhighlighter nogutter "><div class="bar                    "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">12&gt;</code> <code class="numerics">1</code> <code class="symbols">&lt;</code> <code class="numerics">2</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">true</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">13&gt;</code> <code class="numerics">1</code> <code class="symbols">&lt;</code> <code class="numerics">1</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">false</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">14&gt;</code> <code class="numerics">1</code> <code class="symbols">&gt;=</code> <code class="numerics">1</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">6.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">true</code></span></span></div><div class="line alt1"><code class="number">7.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">15&gt;</code> <code class="numerics">1</code> <code class="symbols">=&lt;</code> <code class="numerics">1</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">8.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">true</code></span></span></div></div></div>

<p>What happens when doing <code>5 + llama</code> or <code>5 == true</code>? There's no better way to know than trying it and subsequently getting scared by error messages!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">当做&nbsp;<code>5 + llama</code>&nbsp;或&nbsp;<code>5 == true</code>&nbsp;时会发生什么？没有比试一试和随后被错误信息吓到更好的方法了！</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_366182" class="syntaxhighlighter nogutter "><div class="bar                                                           "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">12&gt;</code> <code class="numerics">5</code> <code class="symbols">+</code> <code class="atoms">llama</code><code class="symbols">.</code></span></span><!--hcfy-anchor--></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="errors">** exception error: bad argument in an arithmetic expression</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 40px !important;"><code class="shell_output">in operator&nbsp; +/2</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 64px !important;"><code class="shell_output">called as 5 + llama</code></span></span></div></div></div>

<p>Welp! Erlang doesn't really like you misusing some of its fundamental types! The emulator returns a nice error message here. It tells us it doesn't like one of the two arguments used around the <code>+</code> operator!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">好吧！ Erlang 并不喜欢你滥用它的一些基本类型！仿真器在这里返回了一个漂亮的错误信息。它告诉我们它不喜欢在&nbsp;<code>+</code>&nbsp;运算符两侧用这样的两个参数!</hcfy-result><!--hcfy-anchor--></p>

<p>Erlang getting mad at you for wrong types is not always true though:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">不过， Erlang 并不总会因为错误的类型而对你生气：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_901734" class="syntaxhighlighter nogutter "><div class="bar              "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">13&gt;</code> <code class="numerics">5</code> <code class="symbols">=:=</code> <code class="atoms">true</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">false</code></span></span><!--hcfy-anchor--></div></div></div>

<p>Why does it refuse different types in some operations but not others? While Erlang doesn't let you <em>add</em> anything with everything, it will let you <em>compare</em> them. This is because the creators of Erlang thought pragmaticism beats theory and decided it would be great to be able to simply write things like general sorting algorithms that could order any term. It's there to make your life simpler and can do so the vast majority of the time.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">为什么它在某些运算操作中会拒绝不同的类型（即给出报错），另外一些却不会？虽然 Erlang 不许你对随便两个不同类型的东西求和，但它允许你比较它们。这是因为， Erlang 的创造者认为实用主义优于理论，并决定要让它能简单地写出譬如一般的排序算法这样的可以排序任何各种项目的东西。这将是一件好事。它的存在是为了让你的生活更简单，而且是要绝大多数时候都能如此。</hcfy-result><!--hcfy-anchor--></p>

<p>There is one last thing to keep in mind when doing boolean algebra and comparisons:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">在做布尔代数和比较的时候，还有最后一件事要记住：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_333391" class="syntaxhighlighter nogutter "><div class="bar                                           "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">14&gt;</code> <code class="numerics">0</code> <code class="symbols">==</code> <code class="atoms">false</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">false</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">15&gt;</code> <code class="numerics">1</code> <code class="symbols">&lt;</code> <code class="atoms">false</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">true</code></span></span></div></div></div>

<p>Chances are you're pulling your hair if you come from procedural languages or most object-oriented languages. Line 14 should evaluate to <var>true</var> and line 15 to <var>false</var>! After all, false means 0 and true is anything else! Except in Erlang. Because I lied to you. Yes, I did that. Shame on me.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">如果你来自过程式语言或大多数面向对象语言，这可能会让你揪自己的头发。你会觉得，第 14 行应该评估为&nbsp;<var style="background-color: rgb(255, 255, 255);">true</var>&nbsp;，第 15 行应该评估为&nbsp;<var style="background-color: rgb(255, 255, 255);">false</var>&nbsp;！毕竟， false 意味着 0 ，而 true 是其他任何东西（译注：这大概其实只是横行世界的 C 所规定下的设计并不好的东西而已）！但在 Erlang 中却例外。因为我对你撒谎了。是的，我这么做了。我真可耻。（</hcfy-result><!--hcfy-anchor--></p>

<p>Erlang has no such things as boolean <var>true</var> and <var>false</var>. The terms true and false are atoms, but they are integrated well enough into the language you shouldn't have a problem with that as long as you don't expect false and true to mean anything but false and true.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">Erlang 没有布尔&nbsp;<var style="background-color: rgb(255, 255, 255);">true</var>&nbsp;和&nbsp;<var style="background-color: rgb(255, 255, 255);">false</var>&nbsp;这样的东西。术语 true 和 false 是原子，但它们被很好地整合到了语言中，只要你不期望 false 和 true 是指除了 false 和 true 之外的任何东西，你就不应该有任何问题。-----（译注：就是说——这俩只是和别的原子一样类型的，单纯的，原子类的数据，罢了，没有和布尔有半点关系。当应当返回布尔真的时候， Erlang 会返回原子 'true' 、反之返回原子 'false' ，仅此而已，这俩并不是什么和原子无关却和别的语言里那样的布尔有关的东西。所以，怎么用原子，就怎么用这俩。也没必要申请新的原子指代真和假，没必要， 'true' 和 'false' 反正已经申过了，用就是了，不乱来就和别的语言的布尔值没啥区别……而且，由于你还知道它是原子，所以，现在这个语言是不是能够让你更有感觉了？有没有想到一些特有意思的事儿呢？！）</hcfy-result><!--hcfy-anchor--></p>

<div class="note">
	<p><strong>Note:</strong> The correct ordering of each element in a comparison is the following:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">注意：比较中每个元素的正确排序是这样的：</hcfy-result><!--hcfy-anchor--><br>
	<code>number &lt; atom &lt; reference &lt; fun &lt; port &lt; pid &lt; tuple &lt; list &lt; bit string<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true"><span style="font-size: 12.87px; background-color: rgb(238, 255, 204);">数字 &lt; 原子 &lt; 引用 &lt; 函数 &lt; 插口 &lt; 进程号 &lt; 元组 &lt; 列表 &lt; 二进制串</span></hcfy-result><!--hcfy-anchor--></code></p>
	<p>You don't know all these types of things yet, but you will get to know them through the book. Just remember that this is why you can compare anything with anything! To quote Joe Armstrong, one of the creators of Erlang: "The actual order is not important - but that a total ordering is well defined is important."<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">你还不知道所有这些类型的东西，但你会通过这本书了解它们。请记住，这就是为什么你可以用任何东西进行比较的原因！引用 Erlang 的创建者之一 Joe Armstrong 的话说 “实际的排序并不重要——但总的排序被很好地定义是很重要的。”</hcfy-result><!--hcfy-anchor--></p>
</div>


<h3><a class="section" name="tuples">Tuples<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">元组</hcfy-result><!--hcfy-anchor--></a></h3>

<p>A tuple is a way to organize data. It's a way to group together many terms when you know how many there are. In Erlang, a tuple is written in the form <code>{Element1, Element2, ..., ElementN}</code>. As an example, you'd give me the coordinates (x,y) if you wanted to tell me the position of a point in a Cartesian graph. We can represent this point as a tuple of two terms:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">元组是一种组织数据的方式。当你知道有多少个项目时，它就是一个将许多<span style="font-size: 12.8px; background-color: rgb(255, 255, 255);">项目</span>组合在一起的途径。在 Erlang 中，元组的写法是&nbsp;<code>{Element1, Element2, ..., ElementN}</code>&nbsp;。举个例子，如果你想告诉我笛卡尔图中一个点的位置，你会给我坐标 (x,y) 。我们可以把这个点表示为两个项的元组。</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_42632" class="syntaxhighlighter nogutter "><div class="bar                             "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">1&gt;</code> <code class="plain">X </code><code class="symbols">=</code> <code class="numerics">10</code><code class="plain">, Y </code><code class="symbols">=</code> <code class="numerics">4</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">4</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">2&gt;</code> <code class="plain">Point </code><code class="symbols">=</code> <code class="plain">{X,Y}</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">{10,4}</code></span></span></div></div></div>

<p>In this case, a point will always be two terms. Instead of carrying the variables <var>X</var> and <var>Y</var> around the place, you only have to carry one instead. However, what can I do if I receive a point and only want the <var>X</var> coordinate? It's not hard to extract that information. Remember that when we assigned values, Erlang would never complain if they were the same. Let's exploit that! You may need to clean the variables we had set with <code>f()</code>.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">在这种情况下，一个点将永远是两个项。你不需要带着变量&nbsp;<var style="background-color: rgb(255, 255, 255);">X</var>&nbsp;和&nbsp;<var style="background-color: rgb(255, 255, 255);">Y</var>&nbsp;到处走，你只需要带上一个变量就好了。然而，如果我收到一个点，只想要&nbsp;<var style="background-color: rgb(255, 255, 255);">X</var>&nbsp;坐标，我该咋整呢？这并不难，如果是从元组中取出其中一项的话。请记住，当我们做赋值操作时，如果前后相同， Erlang 就不会抱怨（报错）。我们可以利用这一点！哦，接下来你可能要先用&nbsp;<code>f()</code>&nbsp;清一下我们设过的变量。</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_358264" class="syntaxhighlighter nogutter "><div class="bar                                                                                               "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">3&gt;</code> <code class="plain">Point </code><code class="symbols">=</code> <code class="plain">{</code><code class="numerics">4</code><code class="plain">,</code><code class="numerics">5</code><code class="plain">}</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">{4,5}</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">4&gt;</code> <code class="plain">{X,Y} </code><code class="symbols">=</code> <code class="plain">Point</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">{4,5}</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">5&gt;</code> <code class="plain">X</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">6.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">4</code></span></span></div><div class="line alt1"><code class="number">7.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">6&gt;</code> <code class="plain">{X,</code><code class="symbols">_</code><code class="plain">} </code><code class="symbols">=</code> <code class="plain">Point</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">8.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">{4,5}</code></span></span></div></div></div>

<p>From then on we can use <var>X</var> to get the first value of the tuple! How did that happen?  <hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">如此以后，我们就可以用&nbsp;<var style="background-color: rgb(255, 255, 255);">X</var>&nbsp;来获取那个元组的第一个值了。但……这是怎么发生的？</hcfy-result><!--hcfy-anchor--><img class="left" src="https://learnyousomeerlang.com/static/img/mr-brackets.png" width="178" height="178" alt="{Mr.Brackets}">First, <var>X</var> and <var>Y</var> had no value and were thus considered unbound variables. When we set them in the tuple <var>{X,Y}</var> on the left-hand side of the <code>=</code> operator, the <code>=</code> operator compares both values: <var>{X,Y}</var> vs. <var>{4,5}</var>. Erlang is smart enough to unpack the values from the tuple and distribute them to the unbound variables on the left-hand side. Then the comparison is only <code>{4,5} = {4,5}</code>, which obviously succeeds! That's one of the many forms of pattern matching.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">原本，这个&nbsp;<var style="background-color: rgb(255, 255, 255);">X</var>&nbsp;和&nbsp;<var style="background-color: rgb(255, 255, 255);">Y</var>&nbsp;都没有值，所以是被视为未绑定变量的。当我们把它们放在&nbsp;<code>=</code>&nbsp;运算符左侧的元组&nbsp;<var style="background-color: rgb(255, 255, 255);">{X,Y}</var>&nbsp;中时，&nbsp;<code>=</code>&nbsp;运算符会比较这两对值：&nbsp;<var style="background-color: rgb(255, 255, 255);">{X,Y}</var>&nbsp;和&nbsp;<var style="background-color: rgb(255, 255, 255);">{4,5}</var>&nbsp;。 Erlang 很聪明，它会把等号后面的元组中的值从元组中解包出来，并（按照位置地）把它们分配到等号前面的的未绑定变量上去绑定。在这之后，比较的结果就只是&nbsp;<code>{4,5} = {4,5}</code>&nbsp;而已了，而这显然会成功！这也就是模式匹配的多种形式之一了。</hcfy-result><!--hcfy-anchor--></p>

<p>Note that on expression 6, I used the anonymous <var>_</var> variable. This is exactly how it's meant to be used: to drop the value that would usually be placed there since we won't use it. The <var>_</var> variable is always seen as unbound and acts as a wildcard for pattern matching. Pattern matching to unpack tuples will only work if the number of elements (the tuple's length) is the same.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">请注意，在表达式 6 中，我使用了匿名的&nbsp;<var style="background-color: rgb(255, 255, 255);">_</var>&nbsp;变量。这也正是它应被使用的正确的方式：不取出该位置的值，因为我们不会用到它——或者你也可以当作是，这个对应位置的值被赋值给名为下划线的变量后，这个变量又被重置成没赋值了。总之，&nbsp;<var style="background-color: rgb(255, 255, 255);">_</var>&nbsp;变量总是被视为非绑定的，并作为模式匹配的通配符。另外，像这种解包赋值的操作，只有当等号前后元组的元素数量（也就是元组长度）相同时，模式匹配解包元组才会有效。</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_687396" class="syntaxhighlighter nogutter "><div class="bar                                            show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">7&gt;</code> <code class="plain">{</code><code class="symbols">_</code><code class="plain">,</code><code class="symbols">_</code><code class="plain">} </code><code class="symbols">=</code> <code class="plain">{</code><code class="numerics">4</code><code class="plain">,</code><code class="numerics">5</code><code class="plain">}</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">{4,5}</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">8&gt;</code> <code class="plain">{</code><code class="symbols">_</code><code class="plain">,</code><code class="symbols">_</code><code class="plain">} </code><code class="symbols">=</code> <code class="plain">{</code><code class="numerics">4</code><code class="plain">,</code><code class="numerics">5</code><code class="plain">,</code><code class="numerics">6</code><code class="plain">}</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="errors">** exception error: no match of right hand side value {4,5,6}</code></span></span></div></div></div>

<p>Tuples can also be useful when working with single values. How so? The simplest example is temperature:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">在处理单个数值时，元组也可以很有用。怎么说呢？最简单的例子是温度（其实就是把数值和 Atom 的单位表示打包在一起）：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_280253" class="syntaxhighlighter nogutter "><div class="bar                       "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">9&gt;</code> <code class="plain">Temperature </code><code class="symbols">=</code> <code class="numerics">23.213</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">23.213</code></span></span></div></div></div>

<p>Well, it sounds like a good day to go to the beach... Wait, is this temperature in Kelvin, Celsius or Fahrenheit?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">嗯，这听起来像是一个去海滩的好日子…… 等等，这个温度的单位是开尔文？摄氏？还是华氏？</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_925454" class="syntaxhighlighter nogutter "><div class="bar                   show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">10&gt;</code> <code class="plain">PreciseTemperature </code><code class="symbols">=</code> <code class="plain">{</code><code class="atoms">celsius</code><code class="plain">, </code><code class="numerics">23.213</code><code class="plain">}</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">{celsius,23.213}</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">11&gt;</code> <code class="plain">{</code><code class="atoms">kelvin</code><code class="plain">, T} </code><code class="symbols">=</code> <code class="plain">PreciseTemperature</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="errors">** exception error: no match of right hand side value {celsius,23.213}</code></span></span></div></div></div>

<p>This throws an error, but it's exactly what we want! This is, again, pattern matching at work. The <code>=</code> operator ends up comparing <var>{kelvin, T}</var> and <var>{celsius, 23.213}</var>: even if the variable <var>T</var> is unbound, Erlang won't see the <var>celsius</var> atom as identical to the <var>kelvin</var> atom when comparing them. An exception is thrown which stops the execution of code. By doing so, the part of our program that expects a temperature in Kelvin won't be able to process temperatures sent in Celsius. This makes it easier for the programmer to know what is being sent around and also works as a debugging aid. A tuple which contains an atom with one element following it is called a 'tagged tuple'. Any element of a tuple can be of any type, even another tuple:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">它抛了个错误出来，而这正是我们需要的！这个是模式匹配在起作用，再一次地。&nbsp;<code>=</code>&nbsp;操作符最终比较了&nbsp;<var style="background-color: rgb(255, 255, 255);">{kelvin, T}</var>&nbsp;和&nbsp;<var style="background-color: rgb(255, 255, 255);">{celsius, 23.213}</var>&nbsp;：虽然变量&nbsp;<var style="background-color: rgb(255, 255, 255);">T</var>&nbsp;是未绑定，但 Erlang 在比较二者（的前面部分）时却不会把&nbsp;<var style="background-color: rgb(255, 255, 255);">celsius</var>&nbsp;原子和&nbsp;<span style="font-size: 12.8px; background-color: rgb(255, 255, 255);">&nbsp;</span><var style="background-color: rgb(255, 255, 255);">kelvin</var><span style="font-size: 12.8px; background-color: rgb(255, 255, 255);">&nbsp;</span>&nbsp;原子视为等同（这当然不会……）。所以，一个异常被抛出，而在这里不该发生的赋值操作也就没有发生。通过这样做，我们期待开尔文温度的程序的部分将不能接受到摄氏度的温度。这就能让程序员更容易知道被发送来这里的是什么（因为有了上述功能后大家只需要再建立好约定就成了），也可以作为一种调试的辅助手段。一个元组，包含一个原子、以及其后面的另外一个什么元素，这样的元组被称为 "标记元组" 。后面那个元素可以是任何类型，甚至可以是又一个元组。</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_237022" class="syntaxhighlighter nogutter "><div class="bar                          show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">12&gt;</code> <code class="plain">{</code><code class="atoms">point</code><code class="plain">, {X,Y}}</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">{point,{4,5}}</code></span></span></div></div></div>

<p>What if we want to carry around more than one Point though?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">那要是我们想带上一个以上的坐标呢？</hcfy-result><!--hcfy-anchor--></p>


<h3><a class="section" name="lists">Lists!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">对它使用列表吧！</hcfy-result><!--hcfy-anchor--></a></h3>

<p>Lists are the bread and butter of many functional languages. They're used to solve all kinds of problems and are undoubtedly the most used data structure in Erlang. Lists can contain anything! Numbers, atoms, tuples, other lists; your wildest dreams in a single structure. The basic notation of a list is <code>[Element1, Element2, ..., ElementN]</code> and you can mix more than one type of data in it:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">Lists 是许多函数式语言里面如同馒头面条米饭一样的东西。这玩意儿被拿来解决各种问题，并且它毋庸置疑地是 Erlang 中使用频率最多的一种数据结构。 Lists 可以包含任何东西！数字、原子、图元（元组）、别的列表；你最疯狂的梦想也全都在这一个结构之中。列表的基本符号是&nbsp;<code>[Element1, Element2, ..., ElementN]</code>&nbsp;，你可以在其中混合多种类型的数据：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_717470" class="syntaxhighlighter nogutter "><div class="bar               show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">1&gt;</code> <code class="plain">[</code><code class="numerics">1</code><code class="plain">, </code><code class="numerics">2</code><code class="plain">, </code><code class="numerics">3</code><code class="plain">, {</code><code class="atoms">numbers</code><code class="plain">,[</code><code class="numerics">4</code><code class="plain">,</code><code class="numerics">5</code><code class="plain">,</code><code class="numerics">6</code><code class="plain">]}, </code><code class="numerics">5.34</code><code class="plain">, </code><code class="atoms">atom</code><code class="plain">]</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[1,2,3,{numbers,[4,5,6]},5.34,atom]</code></span></span></div></div></div>

<p>Simple enough, right?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">非常简单，对吧？</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_502894" class="syntaxhighlighter nogutter "><div class="bar      show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">2&gt;</code> <code class="plain">[</code><code class="numerics">97</code><code class="plain">, </code><code class="numerics">98</code><code class="plain">, </code><code class="numerics">99</code><code class="plain">]</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">"abc"</code></span></span></div></div></div>

<p>Uh oh! This is one of the most disliked things in Erlang: strings! Strings are lists and the notation is absolutely the exact same! Why do people dislike it? Because of this:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">Uh oh ！这是 Erlang 中最不受欢迎的东西之一：字符串！字符串就是列表，符号也绝对是一模一样的！那为啥大家不喜欢它？因为这个：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_793149" class="syntaxhighlighter nogutter "><div class="bar                                    "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">3&gt;</code> <code class="plain">[</code><code class="numerics">97</code><code class="plain">,</code><code class="numerics">98</code><code class="plain">,</code><code class="numerics">99</code><code class="plain">,</code><code class="numerics">4</code><code class="plain">,</code><code class="numerics">5</code><code class="plain">,</code><code class="numerics">6</code><code class="plain">]</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[97,98,99,4,5,6]</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">4&gt;</code> <code class="plain">[</code><code class="numerics">233</code><code class="plain">]</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">"é"</code></span></span></div></div></div>

<p>Erlang will print lists of numbers as numbers only when at least one of them could not also represent a letter! There is no such thing as a real string in Erlang! This will no doubt come to haunt you in the future and you'll hate the language for it. Don't despair, because there are other ways to write strings we'll see later in this chapter.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">只有当数字列表中至少有一个数字无法同时代表一个字母时， Erlang 才会将整个列表打印为数字列表！在 Erlang 中没有真正意义上的字符串！而这无疑会在将来困扰着你，会叫你因此讨厌这门语言。不过不要绝望，后续还会价绍别的写字符串的方法。</hcfy-result><!--hcfy-anchor--></p>

<div class="note koolaid">
	<p><strong>Don't drink too much Kool-Aid:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">不要喝太多的酷爱饮料：</hcfy-result><!--hcfy-anchor--></strong><br>
		This is why you may have heard Erlang is said to suck at string manipulation: there is no built-in string type like in most other languages. This is because of Erlang's origins as a language created and used by telecom companies. They never (or rarely) used strings and as such, never felt like adding them officially. However, most of Erlang's lack of sense in string manipulations is getting fixed with time: The VM now natively supports Unicode strings, and overall gets faster on string manipulations all the time.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这就是为什么你可能听说 Erlang 在字符串处理方面很糟糕：没有像大多数其他语言那样的内置字符串类型。这是因为 Erlang 是由电信公司创建和使用的语言。他们从来没有（或很少）使用字符串，因此，从来没有觉得要正式添加它们。然而，随着时间的推移， Erlang 在字符串处理方面的大部分缺乏意义的问题正在得到解决。现在的虚拟机原生支持 Unicode 字符串，并且在字符串处理上的整体速度一直在提高。</hcfy-result><!--hcfy-anchor--></p>
	<p>There is also a way to store strings as a binary data structure, making them really light and faster to work with. All in all, there are still some functions missing from the standard library and while string processing is definitely doable in Erlang, there are somewhat better languages for tasks that need lots of it, like Perl or Python.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">还有一种方法可以将字符串存储为二进制数据结构，使其工作起来非常轻快。总而言之，标准库中仍然缺少一些功能，虽然字符串处理在 Erlang 中肯定是可以做到的，但对于需要大量字符串的任务，还有更好的语言，如 Perl 或 Python 。</hcfy-result><!--hcfy-anchor--></p>
</div>

<p>To glue lists together, we use the <code>++</code> operator. The opposite of <code>++</code> is <code>--</code> and will remove elements from a list:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">为了把列表粘在一起，我们使用&nbsp;<code>++</code>&nbsp;运算符。&nbsp;<code>++</code>&nbsp;的反义是&nbsp;<code>--</code>&nbsp;，它将从一个列表中删除元素：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_539129" class="syntaxhighlighter nogutter "><div class="bar                                                                                                            "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">5&gt;</code> <code class="plain">[</code><code class="numerics">1</code><code class="plain">,</code><code class="numerics">2</code><code class="plain">,</code><code class="numerics">3</code><code class="plain">] </code><code class="symbols">++</code> <code class="plain">[</code><code class="numerics">4</code><code class="plain">,</code><code class="numerics">5</code><code class="plain">]</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[1,2,3,4,5]</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">6&gt;</code> <code class="plain">[</code><code class="numerics">1</code><code class="plain">,</code><code class="numerics">2</code><code class="plain">,</code><code class="numerics">3</code><code class="plain">,</code><code class="numerics">4</code><code class="plain">,</code><code class="numerics">5</code><code class="plain">] </code><code class="symbols">--</code> <code class="plain">[</code><code class="numerics">1</code><code class="plain">,</code><code class="numerics">2</code><code class="plain">,</code><code class="numerics">3</code><code class="plain">]</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[4,5]</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">7&gt;</code> <code class="plain">[</code><code class="numerics">2</code><code class="plain">,</code><code class="numerics">4</code><code class="plain">,</code><code class="numerics">2</code><code class="plain">] </code><code class="symbols">--</code> <code class="plain">[</code><code class="numerics">2</code><code class="plain">,</code><code class="numerics">4</code><code class="plain">]</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">6.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[2]</code></span></span></div><div class="line alt1"><code class="number">7.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">8&gt;</code> <code class="plain">[</code><code class="numerics">2</code><code class="plain">,</code><code class="numerics">4</code><code class="plain">,</code><code class="numerics">2</code><code class="plain">] </code><code class="symbols">--</code> <code class="plain">[</code><code class="numerics">2</code><code class="plain">,</code><code class="numerics">4</code><code class="plain">,</code><code class="numerics">2</code><code class="plain">]</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">8.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[]</code></span></span></div></div></div>

<p>Both <code>++</code> and <code>--</code> are right-associative. This means the elements of many <code>--</code> or <code>++</code> operations will be done from right to left, as in the following examples:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">&nbsp;<code>++</code>&nbsp;和&nbsp;<code>--</code>&nbsp;都是右键关联的。这意味着许多&nbsp;<code>--</code>&nbsp;或&nbsp;<code>++</code>&nbsp;操作的元素将从右到左进行，如以下例子：-----（译注：就是说，如果想要从左往右着来，要把左边的用小括号括起来，像这样：&nbsp;<code>([1,2,3,4,5] -- [1,2,3]) -- [4,5]</code>&nbsp;，否则，如果是&nbsp;<code>[1,2,3,4,5] -- [1,2,3] -- [4,5]</code>&nbsp;的话，那就是&nbsp;<code>[1,2,3] -- [4,5]</code>&nbsp;先被计算，相当于是&nbsp;<code>[1,2,3,4,5] -- ([1,2,3] -- [4,5])</code>&nbsp;这样子了。没记错的话，这个运算符操作小列表的速度会更快（还是占用更少来着），所以建议把小列表放后面，尽可能地。）</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_938376" class="syntaxhighlighter nogutter "><div class="bar                                          "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">9&gt;</code> <code class="plain">[</code><code class="numerics">1</code><code class="plain">,</code><code class="numerics">2</code><code class="plain">,</code><code class="numerics">3</code><code class="plain">] </code><code class="symbols">--</code> <code class="plain">[</code><code class="numerics">1</code><code class="plain">,</code><code class="numerics">2</code><code class="plain">] </code><code class="symbols">--</code> <code class="plain">[</code><code class="numerics">3</code><code class="plain">]</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[3]</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">10&gt;</code> <code class="plain">[</code><code class="numerics">1</code><code class="plain">,</code><code class="numerics">2</code><code class="plain">,</code><code class="numerics">3</code><code class="plain">] </code><code class="symbols">--</code> <code class="plain">[</code><code class="numerics">1</code><code class="plain">,</code><code class="numerics">2</code><code class="plain">] </code><code class="symbols">--</code> <code class="plain">[</code><code class="numerics">2</code><code class="plain">]</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[2,3]</code></span></span></div></div></div>

<p>Let's keep going. The first element of a list is named the Head, and the rest of the list is named the Tail. We will use two built-in functions (BIF) to get them.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">继续。一个列表的第一个元素被命名为 Head ，列表的其余部分被命名为 Tail 。我们将使用两个内置函数（ BIF ）来获取它们。</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_130548" class="syntaxhighlighter nogutter "><div class="bar                  show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">11&gt;</code> <code class="functions">hd</code><code class="plain">([</code><code class="numerics">1</code><code class="plain">,</code><code class="numerics">2</code><code class="plain">,</code><code class="numerics">3</code><code class="plain">,</code><code class="numerics">4</code><code class="plain">])</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">1</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">12&gt;</code> <code class="functions">tl</code><code class="plain">([</code><code class="numerics">1</code><code class="plain">,</code><code class="numerics">2</code><code class="plain">,</code><code class="numerics">3</code><code class="plain">,</code><code class="numerics">4</code><code class="plain">])</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[2,3,4]</code></span></span></div></div></div>

<div class="note">
	<p><strong>Note:</strong>  built-in functions (BIFs) are usually functions that could not be implemented in pure Erlang, and as such are defined in C, or whichever language Erlang happens to be implemented on (it was Prolog in the 80's). There are still some BIFs that could be done in Erlang but were still implemented in C in order to provide more speed to common operations. One example of this is the <code>length(List)</code> function, which will return the (you've guessed it) length of the list passed in as the argument.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">注意：内置函数（ BIFs ）通常是无法在纯 Erlang 中实现的函数，这是因为它是被定义在 C 语言、或者是 Erlang 的实现语言（ 80 年代是 Prolog ）中。还有一些 BIF 可以在 Erlang 中实现，但为了给普通操作提供更多的速度，仍然用 C 语言实现。这方面的一个例子是&nbsp;<code>length(List)</code>&nbsp;函数，它将返回（你已经猜到了）作为参数传入的 list 的长度。</hcfy-result><!--hcfy-anchor--></p>
</div>

<p>Accessing or adding the head is fast and efficient: virtually all applications where you need to deal with lists will always operate on the head first. As it's used so frequently, there is a nicer way to separate the head from the tail of a list with the help of pattern matching: <code>[Head|Tail]</code>. Here's how you would add a new head to a list:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">访问或添加头部是快速而有效的：几乎所有需要处理列表的应用程序都会先对头部进行操作。由于它的使用非常频繁，有一种更好的方法可以借助于模式匹配将列表的头部和尾部分开：&nbsp;<code>[Head|Tail]</code>&nbsp;。下面是你如何在一个列表中添加一个新的头部：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_992918" class="syntaxhighlighter nogutter "><div class="bar                       show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">13&gt;</code> <code class="plain">List </code><code class="symbols">=</code> <code class="plain">[</code><code class="numerics">2</code><code class="plain">,</code><code class="numerics">3</code><code class="plain">,</code><code class="numerics">4</code><code class="plain">]</code><code class="symbols">.</code></span></span><!--hcfy-anchor--></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[2,3,4]</code></span></span><!--hcfy-anchor--></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">14&gt;</code> <code class="plain">NewList </code><code class="symbols">=</code> <code class="plain">[</code><code class="numerics">1</code><code class="symbols">|</code><code class="plain">List]</code><code class="symbols">.</code></span></span><!--hcfy-anchor--></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[1,2,3,4]</code></span></span><!--hcfy-anchor--></div></div></div>

<p>When processing lists, as you usually start with the head, you want a quick way to also store the tail to later operate on it. If you remember the way tuples work and how we used pattern matching to unpack the values of a point (<var>{X,Y}</var>), you'll know we can get the first element (the head) sliced off a list in a similar manner.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">当处理列表时，由于你通常从头部开始，你希望有一个快速的方法来同时存储尾部，以便以后对其进行操作。如果你还记得图元（元组）的工作方式，以及我们如何使用模式匹配来解包一个点的值 (<var style="background-color: rgb(255, 255, 255);">{X,Y}</var>) ，你就会知道我们可以用类似的方式获得从列表中切下的第一个元素（头部）。</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_958787" class="syntaxhighlighter nogutter "><div class="bar                           show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">15&gt;</code> <code class="plain">[Head</code><code class="symbols">|</code><code class="plain">Tail] </code><code class="symbols">=</code> <code class="plain">NewList</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[1,2,3,4]</code></span></span></div><div class="line alt1"><code class="number">03.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">16&gt;</code> <code class="plain">Head</code><code class="symbols">.</code></span></span><!--hcfy-anchor--></div><div class="line alt2"><code class="number">04.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">1</code></span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">17&gt;</code> <code class="plain">Tail</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[2,3,4]</code></span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">18&gt;</code> <code class="plain">[NewHead</code><code class="symbols">|</code><code class="plain">NewTail] </code><code class="symbols">=</code> <code class="plain">Tail</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[2,3,4]</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">19&gt;</code> <code class="plain">NewHead</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">10.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">2</code></span></span></div></div></div>

<p>The <code>|</code> we used is named the cons operator (constructor). In fact, any list can be built with only cons and values:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">我们使用的&nbsp;<code>|</code>&nbsp;被命名为 cons 操作符（构造器）。事实上，任何列表都可以只用 cons 和 value 来构建：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_569199" class="syntaxhighlighter nogutter "><div class="bar                    "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">20&gt;</code> <code class="plain">[</code><code class="numerics">1</code> <code class="symbols">|</code> <code class="plain">[]]</code><code class="symbols">.</code></span></span><hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__">20&gt; [1 | []].</hcfy-result><!--hcfy-anchor--></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[1]</code></span></span><hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__">[1]</hcfy-result><!--hcfy-anchor--></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">21&gt;</code> <code class="plain">[</code><code class="numerics">2</code> <code class="symbols">|</code> <code class="plain">[</code><code class="numerics">1</code> <code class="symbols">|</code> <code class="plain">[]]]</code><code class="symbols">.</code></span></span><hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__">21&gt; [2 | [1 | []]].</hcfy-result><!--hcfy-anchor--></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[2,1]</code></span></span><hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__">[2,1]</hcfy-result><!--hcfy-anchor--></div><div class="line alt1"><code class="number">5.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">22&gt;</code> <code class="plain">[</code><code class="numerics">3</code> <code class="symbols">|</code> <code class="plain">[</code><code class="numerics">2</code> <code class="symbols">|</code> <code class="plain">[</code><code class="numerics">1</code> <code class="symbols">|</code> <code class="plain">[]] ] ]</code><code class="symbols">.</code></span></span><hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__">22&gt; [3 | [2 | [1 | []] ] ].</hcfy-result><!--hcfy-anchor--></div><div class="line alt2"><code class="number">6.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[3,2,1]</code></span></span><hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__">[3,2,1]</hcfy-result><!--hcfy-anchor--></div></div></div>

<p>This is to say any list can be built with the following formula: <code>[Term1| [Term2 | [... | [TermN]]]]...</code>. Lists can thus be defined recursively as a head preceding a tail, which is itself a head followed by more heads. In this sense we could imagine a list being a bit like an earthworm: you can slice it in half and you'll then have two worms.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这就是说，任何列表都可以用以下公式建立：&nbsp;<code>[Term1| [Term2 | [... | [TermN]]]]...</code>&nbsp;。因此，列表可以被递归地定义为一个头在一个尾巴之前，而这个尾巴本身就是一个后面还有更多的头的头。在这个意义上，我们可以想象一个列表有点像一条蚯蚓：你可以把它切成两半，然后你就会有两条蚯蚓。</hcfy-result><!--hcfy-anchor--></p>

<img class="explanation" src="https://learnyousomeerlang.com/static/img/worm.png" width="288" height="331" alt="Two drawn worms, the first one normal with the text 'Head' and 'tail' as usual; the second has its head cut off, and under it a new 'head' is written." title="Worms, like lists can be defined recursively.">

<p>The ways Erlang lists can be built are sometimes confusing to people who are not used to similar constructors. To help you get familiar with the concept, read all of these examples (hint: they're all equivalent):<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">&nbsp;Erlang 列表的构建方式有时会让不习惯类似构建器的人感到困惑。为了帮助你熟悉这个概念，请阅读所有这些例子（提示：它们都是等价的）：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_480029" class="syntaxhighlighter nogutter "><div class="bar                show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[a, b, c, d]</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[a, b, c, d | []]</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[a, b | [c, d]]</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[a, b | [c | [d]]]</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[a | [b | [c | [d]]]]</code></span></span></div><div class="line alt2"><code class="number">6.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[a | [b | [c | [d | [] ]]]]</code></span></span></div></div></div>

<p>With this understood, you should be able to deal with list comprehensions.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">了解了这一点，你应该能够处理好对列表的理解。</hcfy-result><!--hcfy-anchor--></p>

<div class="note">
	<p><strong>Note:</strong> Using the form <code>[1 | 2]</code> gives what we call an 'improper list'. Improper lists will work when you pattern match in the <code>[Head|Tail]</code> manner, but will fail to be used with standard functions of Erlang (even <code>length()</code>). This is because Erlang expects proper lists. Proper lists end with an empty list as their last cell. When declaring an item like <code>[2]</code>, the list is automatically formed in a proper manner. As such, <code>[1|[2]]</code> would work! Improper lists, although syntactically valid, are of very limited use outside of user-defined data structures.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">注意：使用&nbsp;<code>[1 | 2]</code>&nbsp;的形式会得到 "不恰当的列表" 。当你以&nbsp;<code>[Head|Tail]</code>&nbsp;的方式进行模式匹配时，即便存在不恰当的列表，程序也仍能继续工作；但在使用 Erlang 的标准函数（甚至是&nbsp;<code>length()</code>&nbsp;）时就会失败。这是因为 Erlang 期望的是正确的列表。正确的列表以空列表作为其最后一个单元格结束。当声明一个像&nbsp;<code>[2]</code>&nbsp;这样的项目时，列表会自动以适当的方式形成。因此，写成&nbsp;<code>[1|[2]]</code>&nbsp;就可以工作了。不正确的列表，尽管在语法上是有效的，但在用户定义的数据结构之外，用途非常有限。</hcfy-result><!--hcfy-anchor--></p>
</div>


<h3><a class="section" name="list-comprehensions">List Comprehensions<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">列表推导式</hcfy-result><!--hcfy-anchor--></a></h3>

<p>List comprehensions are ways to build or modify lists. They also make programs short and easy to understand compared to other ways of manipulating lists. It's based off the idea of set notation; if you've ever taken mathematics classes with set theory or if you've ever looked at mathematical notation, you probably know how that works. Set notation basically tells you how to build a set by specifying properties its members must satisfy. List comprehensions may be hard to grasp at first, but they're worth the effort. They make code cleaner and shorter, so don't hesitate to try and type in the examples until you understand them!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">列表推导式是建立或修改列表的方法。与其他操作列表的方法相比，它们还可以使程序变得简短和易于理解。它是基于集合符号的概念；如果你曾经上过集合理论的数学课，或者你曾经看过数学符号，你可能知道它是如何工作的。集合符号法基本上告诉你如何通过指定其成员必须满足的属性来建立一个（新的）集合。列表推导式一开始可能很难掌握，但它们是值得努力的。它们使代码更简洁、更短，所以不要犹豫，试着在例子中打字，直到你弄懂它们为止!</hcfy-result><!--hcfy-anchor--></p>

<p>An example of set notation would be <hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">一个集合符号的例子是</hcfy-result><!--hcfy-anchor--><img style="float:none; display:inline;" src="https://learnyousomeerlang.com/static/img/set-comprehension.png" alt="{x ∈ ℜ x = x^2}">.  That set notation tells you the results you want will be all real numbers who are equal to their own square. The result of that set would be <var>{0,1}</var>. Another set notation example, simpler and abbreviated would be <code>{x : x &gt; 0}</code>. Here, what we want is all numbers where <var>x</var> &gt; 0.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">。这个集合符号告诉你，你想要的结果将是，所有等于其自身平方的实数。该集合的结果应是&nbsp;<var style="background-color: rgb(255, 255, 255);">{0,1}</var>&nbsp;。另一个集合表示的例子，更简单和简略的写法是&nbsp;<code>{x : x &gt; 0}</code>&nbsp;。在这里，我们要的是所有大于零的&nbsp;<var style="background-color: rgb(255, 255, 255);">x</var>&nbsp;数字。</hcfy-result><!--hcfy-anchor--></p>

<p>List comprehensions in Erlang are about building sets from other sets. Given the set <code>{2n : n in L}</code> where L is the list <var>[1,2,3,4]</var>, the Erlang implementation would be:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">&nbsp;Erlang 中的列表推导式用于从其他集合中构建集合。给定集合&nbsp;<code>{2n : n in L}</code>&nbsp;，其中L是列表&nbsp;<var style="background-color: rgb(255, 255, 255);">[1,2,3,4]</var>&nbsp;， Erlang 的写法是：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_925993" class="syntaxhighlighter nogutter "><div class="bar                       "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">1&gt;</code> <code class="plain">[</code><code class="numerics">2</code><code class="symbols">*</code><code class="plain">N </code><code class="symbols">|</code><code class="symbols">|</code> <code class="plain">N </code><code class="symbols">&lt;-</code> <code class="plain">[</code><code class="numerics">1</code><code class="plain">,</code><code class="numerics">2</code><code class="plain">,</code><code class="numerics">3</code><code class="plain">,</code><code class="numerics">4</code><code class="plain">]]</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[2,4,6,8]</code></span></span></div></div></div>

<p>Compare the mathematical notation to the Erlang one and there's not a lot that changes: brackets ({}) become square brackets ([]), the colon (:) becomes two pipes (||) and the word 'in' becomes the arrow (&lt;-). We only change symbols and keep the same logic.  In the example above, each value of <var>[1,2,3,4]</var> is sequentially pattern matched to <var>N</var>. The arrow acts exactly like the <code>=</code> operator, with the exception that it doesn't throw exceptions.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">比较一下数学符号与 Erlang 符号，看起来没有太多的变化：大括号 ({}) 变成了方括号 ([]) ，冒号 (:) 变成了两个管道 (||) ，"in" 字变成了箭头 (&lt;-) 。我们只改变符号，所表达的逻辑仍是保持不变的。在上面的例子中，&nbsp;<var style="background-color: rgb(255, 255, 255);">[1,2,3,4]</var>&nbsp;的每个值都是按顺序与&nbsp;<var style="background-color: rgb(255, 255, 255);">N</var>&nbsp;进行模式匹配的。箭头的作用与&nbsp;<code>=</code>&nbsp;运算符完全一样，但它不会抛出异常。</hcfy-result><!--hcfy-anchor--></p>

<p>You can also add constraints to a list comprehension by using operations that return boolean values. if we wanted all the even numbers from one to ten, we could write something like:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">你还可以通过使用返回布尔值的操作，来给列表推导式添加约束条件。如果我们想要从一到十的所有偶数，我们可以写成这样：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_133250" class="syntaxhighlighter nogutter "><div class="bar                            "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">2&gt;</code> <code class="plain">[X </code><code class="symbols">|</code><code class="symbols">|</code> <code class="plain">X </code><code class="symbols">&lt;-</code> <code class="plain">[</code><code class="numerics">1</code><code class="plain">,</code><code class="numerics">2</code><code class="plain">,</code><code class="numerics">3</code><code class="plain">,</code><code class="numerics">4</code><code class="plain">,</code><code class="numerics">5</code><code class="plain">,</code><code class="numerics">6</code><code class="plain">,</code><code class="numerics">7</code><code class="plain">,</code><code class="numerics">8</code><code class="plain">,</code><code class="numerics">9</code><code class="plain">,</code><code class="numerics">10</code><code class="plain">], X </code><code class="keyword">rem</code> <code class="numerics">2</code> <code class="symbols">=:=</code> <code class="numerics">0</code><code class="plain">]</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[2,4,6,8,10]</code></span></span></div></div></div>

<p>Where <code>X rem 2 =:= 0</code> checks if a number is even. Practical applications come when we decide we want to apply a function to each element of a list, forcing it to respect constraints, etc. As an example, say we own a restaurant. A customer enters, sees our menu and asks if he could have the prices of all the items costing between $3 and $10 with taxes (say 7%) counted in afterwards.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">其中的&nbsp;<code>X rem 2 =:= 0</code>&nbsp;会检查一个数字是否为偶数。那么，实际应用就来了：当我们决定要对一个列表的每个元素应用一个函数时，我们可以要求只取遵守约束条件的部分，等等。举个例子，假设我们拥有一家餐馆。一个顾客进来，看到我们的菜单，问他是否可以把所有价格在三到十美元之间的项目的价格加上税金（比如 7% ）后算个总数。</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_943628" class="syntaxhighlighter nogutter "><div class="bar                                  "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">3&gt;</code> <code class="plain">RestaurantMenu </code><code class="symbols">=</code> <code class="plain">[{</code><code class="atoms">steak</code><code class="plain">, </code><code class="numerics">5.99</code><code class="plain">}, {</code><code class="atoms">beer</code><code class="plain">, </code><code class="numerics">3.99</code><code class="plain">}, {</code><code class="atoms">poutine</code><code class="plain">, </code><code class="numerics">3.50</code><code class="plain">}, {</code><code class="atoms">kitten</code><code class="plain">, </code><code class="numerics">20.99</code><code class="plain">}, {</code><code class="atoms">water</code><code class="plain">, </code><code class="numerics">0.00</code><code class="plain">}]</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[{steak,5.99},</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 8px !important;"><code class="shell_output">{beer,3.99},</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 8px !important;"><code class="shell_output">{poutine,3.5},</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 8px !important;"><code class="shell_output">{kitten,20.99},</code></span></span></div><div class="line alt2"><code class="number">6.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 8px !important;"><code class="shell_output">{water,0.0}]</code></span></span></div><div class="line alt1"><code class="number">7.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">4&gt;</code> <code class="plain">[{Item, Price</code><code class="symbols">*</code><code class="numerics">1.07</code><code class="plain">} </code><code class="symbols">|</code><code class="symbols">|</code> <code class="plain">{Item, Price} </code><code class="symbols">&lt;-</code> <code class="plain">RestaurantMenu, Price </code><code class="symbols">&gt;=</code> <code class="numerics">3</code><code class="plain">, Price </code><code class="symbols">=&lt;</code> <code class="numerics">10</code><code class="plain">]</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">8.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[{steak,6.409300000000001},{beer,4.2693},{poutine,3.745}]</code></span></span></div></div></div>

<p>Of course, the decimals aren't rounded in a readable manner, but you get the point. The recipe for list comprehensions in Erlang is therefore <code>NewList = [Expression || Pattern &lt;- List, Condition1, Condition2, ... ConditionN]</code>. The part <code>Pattern &lt;- List</code> is named a Generator expression. You can have more than one!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">当然，小数没有以可读的方式进行四舍五入，但你明白这不是要点。因此， Erlang 中的列表推导式的一般形式就是&nbsp;<code>NewList = [Expression || Pattern &lt;- List, Condition1, Condition2, ... ConditionN]</code>&nbsp;。在&nbsp;<code>Pattern &lt;- List</code>&nbsp;的部分被命名为「生成器」表达式。对此，你可以写不止一个！</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_753907" class="syntaxhighlighter nogutter "><div class="bar               "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">5&gt;</code> <code class="plain">[X</code><code class="symbols">+</code><code class="plain">Y </code><code class="symbols">|</code><code class="symbols">|</code> <code class="plain">X </code><code class="symbols">&lt;-</code> <code class="plain">[</code><code class="numerics">1</code><code class="plain">,</code><code class="numerics">2</code><code class="plain">], Y </code><code class="symbols">&lt;-</code> <code class="plain">[</code><code class="numerics">2</code><code class="plain">,</code><code class="numerics">3</code><code class="plain">]]</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[3,4,4,5]</code></span></span></div></div></div>

<p>This runs the operations <code>1+2</code>, <code>1+3</code>, <code>2+2</code>, <code>2+3</code>. So if you want to make the list comprehension recipe more generic, you get: <code>NewList = [Expression || GeneratorExp1, GeneratorExp2, ..., GeneratorExpN, Condition1, Condition2, ... ConditionM]</code>. Note that the generator expressions coupled with pattern matching also act as a filter:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这样就可以运行&nbsp;<code>1+2</code><span style="font-size: 12.8px; background-color: rgb(255, 255, 255);">,&nbsp;</span><code>1+3</code><span style="font-size: 12.8px; background-color: rgb(255, 255, 255);">,&nbsp;</span><code>2+2</code><span style="font-size: 12.8px; background-color: rgb(255, 255, 255);">,&nbsp;</span><code>2+3</code>&nbsp;的操作。因此，如果你想使列表推导式的一般形式更通用，你会写出：&nbsp;<code>NewList = [Expression || GeneratorExp1, GeneratorExp2, ..., GeneratorExpN, Condition1, Condition2, ... ConditionM]</code>&nbsp;。请注意，生成器表达式如果用上模式匹配的话，也可达到过滤的效果：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_349306" class="syntaxhighlighter nogutter "><div class="bar                         show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">6&gt;</code> <code class="plain">Weather </code><code class="symbols">=</code> <code class="plain">[{</code><code class="atoms">toronto</code><code class="plain">, </code><code class="atoms">rain</code><code class="plain">}, {</code><code class="atoms">montreal</code><code class="plain">, </code><code class="atoms">storms</code><code class="plain">}, {</code><code class="atoms">london</code><code class="plain">, </code><code class="atoms">fog</code><code class="plain">},&nbsp;&nbsp; </code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">6&gt;</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="plain">{</code><code class="atoms">paris</code><code class="plain">, </code><code class="atoms">sun</code><code class="plain">}, {</code><code class="atoms">boston</code><code class="plain">, </code><code class="atoms">fog</code><code class="plain">}, {</code><code class="atoms">vancouver</code><code class="plain">, </code><code class="atoms">snow</code><code class="plain">}]</code><code class="symbols">.</code></span></span></div><div class="line alt1"><code class="number">03.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[{toronto,rain},</code></span></span></div><div class="line alt2"><code class="number">04.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 8px !important;"><code class="shell_output">{montreal,storms},</code></span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 8px !important;"><code class="shell_output">{london,fog},</code></span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 8px !important;"><code class="shell_output">{paris,sun},</code></span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 8px !important;"><code class="shell_output">{boston,fog},</code></span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 8px !important;"><code class="shell_output">{vancouver,snow}]</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">7&gt;</code> <code class="plain">FoggyPlaces </code><code class="symbols">=</code> <code class="plain">[X </code><code class="symbols">|</code><code class="symbols">|</code> <code class="plain">{X, </code><code class="atoms">fog</code><code class="plain">} </code><code class="symbols">&lt;-</code> <code class="plain">Weather]</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">10.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[london,boston]</code></span></span></div></div></div>

<p>If an element of the list 'Weather' doesn't match the {X, fog} pattern, it's simply ignored in the list comprehension whereas the <code>=</code> operator would have thrown an exception.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">如果列表&nbsp;'Weather' 中的一个元素不符合 {X, fog} 模式，它在列表推导中会被简单地忽略——不过用&nbsp;<code>=</code>&nbsp;操作符的话就会抛出一个异常咯。</hcfy-result><!--hcfy-anchor--></p>

<p>There is one more basic data type left for us to see for now. It is a surprising feature that makes interpreting binary data easy as pie.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">现在，还能留给我们看的只剩下一个基本数据类型了。它里面有一个令人惊讶的功能，一个会使解析二进制数据容易很多的功能。</hcfy-result><!--hcfy-anchor--></p>


<img class="right" src="https://learnyousomeerlang.com/static/img/binometer.png" width="211" height="132" alt="Speedometer with values in binary">

<h3><a class="section" name="bit-syntax">Bit Syntax!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">比特语法！</hcfy-result><!--hcfy-anchor--></a></h3>

<p>Most languages have support for manipulating data such as numbers, atoms, tuples, lists, records and/or structs, etc. Most of them also only have very raw facilities to manipulate binary data. Erlang goes out of its way to provide useful abstractions when dealing with binary values with pattern matching taken to the next level. It makes dealing with raw binary data fun and easy (no, really), which was necessary for the telecom applications it was created to help with. Bit manipulation has a unique syntax and idioms that may look kind of weird at first, but if you know how bits and bytes generally work, this should make sense to you. <strong>You may want to skip the rest of this chapter otherwise</strong>.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">大多数语言都支持对像如数字、原子、图元、列表、记录和/或结构体，等等这样类型的数据的操作。他们中的大多数也只有非常原始的设施来操作二进制类型的数据。 Erlang 不遗余力地提供有用的抽象用来处理二进制类型的值，这一并也将模式匹配提升到新的层次。它使处理原始的二进制数据变得有趣简单（不是玩笑，真的），这对于它所创建的电信应用是必要的。位（ Bit ）操作有一个独特的语法和习惯，一开始可能看起来有点奇怪，但如果你知道位和字节一般是如何工作的，这对你应该是有意义的。否则你可能想跳过本章接下来的部分。</hcfy-result><!--hcfy-anchor--></p>

<p>Bit syntax encloses binary data between &lt;&lt; and &gt;&gt;, splits it in readable segments, and each segment is separated by a comma. A segment is a sequence of bits of a binary (not necessarily on a byte boundary, although this is the default behaviour). Say we want to store an orange pixel of true color (24 bits). If you've ever checked colors in Photoshop or in a CSS style sheet for the web, you know the hexadecimal notation has the format #RRGGBB.  A tint of orange is <var>#F09A29</var> in that notation, which could be expanded in Erlang to:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">比特语法将二进制数据包围在 &lt;&lt; 和 &gt;&gt; 之间，将其分割成可读段，每个段用逗号隔开。一个段是一个二进制的比特序列（不一定在一个字节的边界上，虽然这是默认行为）。譬如，我们想存储一个真彩色的橙色像素（ 24 比特）。如果你曾经在 Photoshop 或网页的 CSS 样式表中检查过颜色，你就知道十六进制符号的格式是 #RRGGBB 。在这个符号中，橙色的色调是&nbsp;<var style="background-color: rgb(255, 255, 255);">#F09A29</var>&nbsp;，在 Erlang 中可以扩展为：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_77338" class="syntaxhighlighter nogutter "><div class="bar                       "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">1&gt;</code> <code class="plain">Color </code><code class="symbols">=</code> <code class="numerics">16</code><code class="plain">#F09A29</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">15768105</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">2&gt;</code> <code class="plain">Pixel </code><code class="symbols">=</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="plain">Color:</code><code class="numerics">24</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">&lt;&lt;240,154,41&gt;&gt;</code></span></span></div></div></div>

<p>This basically says "Put the binary values of <var>#F09A29</var> on 24 bits of space (Red on 8 bits, Green on 8 bits and Blue also on 8 bits) in the variable Pixel." The value can later be taken to be written to a file. This doesn't look like much, but once written to a file, what you'd get by opening it in a text editor would be a bunch of unreadable characters. When you read back from the file, Erlang would interpret the binary into the nice <var>&lt;&lt;240,151,41&gt;&gt;</var> format again!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这基本上等同于说，“把&nbsp;<var style="background-color: rgb(255, 255, 255);">#F09A29</var>&nbsp;这个（ binary 的）数值放在 24 比特的空间里（其中 8 位存红值、 8 位存绿值、以及 8 位存蓝值），并绑定 Pixel 变量。” 该值以后可以取出来再写到文件中。这看起来可能用处不大，但一旦写入文件，你用文本编辑器打开的话，看到的就只有一对人眼不可读的乱码字符。但当你（用 Erlang ）把它们再从文件中读回的时候， Erlang 又能把二进制文件再次解释成看起来很棒的&nbsp;<var style="background-color: rgb(255, 255, 255);">&lt;&lt;240,151,41&gt;&gt;</var>&nbsp;的样子！</hcfy-result><!--hcfy-anchor--></p>

<p>What's more interesting is the ability to pattern match with binaries to unpack content:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">更有趣的是，能够用二进制文件进行模式匹配来解包其内容：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_644511" class="syntaxhighlighter nogutter "><div class="bar                                                                                                        "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">3&gt;</code> <code class="plain">Pixels </code><code class="symbols">=</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="numerics">213</code><code class="plain">,</code><code class="numerics">45</code><code class="plain">,</code><code class="numerics">132</code><code class="plain">,</code><code class="numerics">64</code><code class="plain">,</code><code class="numerics">76</code><code class="plain">,</code><code class="numerics">32</code><code class="plain">,</code><code class="numerics">76</code><code class="plain">,</code><code class="numerics">0</code><code class="plain">,</code><code class="numerics">0</code><code class="plain">,</code><code class="numerics">234</code><code class="plain">,</code><code class="numerics">32</code><code class="plain">,</code><code class="numerics">15</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">&lt;&lt;213,45,132,64,76,32,76,0,0,234,32,15&gt;&gt;</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">4&gt;</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="plain">Pix1,Pix2,Pix3,Pix4</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code> <code class="symbols">=</code> <code class="plain">Pixels</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="errors">** exception error: no match of right hand side value &lt;&lt;213,45,132,64,76,32,76,</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 448px !important;"><code class="shell_output">0,0,234,32,15&gt;&gt;</code></span></span></div><div class="line alt2"><code class="number">6.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">5&gt;</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="plain">Pix1:</code><code class="numerics">24</code><code class="plain">, Pix2:</code><code class="numerics">24</code><code class="plain">, Pix3:</code><code class="numerics">24</code><code class="plain">, Pix4:</code><code class="numerics">24</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code> <code class="symbols">=</code> <code class="plain">Pixels</code><code class="symbols">.</code></span></span></div><div class="line alt1"><code class="number">7.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">&lt;&lt;213,45,132,64,76,32,76,0,0,234,32,15&gt;&gt;</code></span></span></div></div></div>

<p>What we did on command 3 is declare what would be precisely 4 pixels of RGB colors in binary.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">我们在命令 3 上所做的，正是用二进制类型声明 4 个像素的 RGB 颜色。</hcfy-result><!--hcfy-anchor--><br>
	On expression 4, we tried to unpack 4 values from the binary content. It throws an exception, because we have more than 4 segments, we in fact have 12! So what we do is tell Erlang that each variable on the left side will hold 24 bits of data. That's what <code>Var:24</code> means. We can then take the first pixel and unpack it further into single color values:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">在表达式 4 中，我们试图从二进制值里解包 4 个值。它抛出了一个异常，因为我们有超过 4 个段（&nbsp;segment ），事实上我们有 12 个！所以我们要做的是告诉 Erlang ，左边的每个变量将容纳24比特的数据。这就是&nbsp;<code>Var:24</code>&nbsp;的意思。然后，我们可以把第一个像素点进一步解包成单色的值：-----（译注：表达式 6 相当于&nbsp;<code>&lt;&lt;R:8, G:8, B:8&gt;&gt; = &lt;&lt;13970820:24&gt;&gt;<r:8, g:8,="" b:8="">.</r:8,></code>&nbsp;。二进制类型是一种复合类型，算是吧，至少它能装基本类型。虽然好像只能是数字。）</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_254084" class="syntaxhighlighter nogutter "><div class="bar                                                                                                                      "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">6&gt;</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="plain">R:</code><code class="numerics">8</code><code class="plain">, G:</code><code class="numerics">8</code><code class="plain">, B:</code><code class="numerics">8</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code> <code class="symbols">=</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="plain">Pix1:</code><code class="numerics">24</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">&lt;&lt;213,45,132&gt;&gt;</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">7&gt;</code> <code class="plain">R</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">213</code></span></span></div></div></div>

<p>"Yeah that's dandy. What if I only wanted the first color from the start though? will I have to unpack all these values all the time?" Hah! Doubt not! Erlang introduces more syntactic sugar and pattern matching to help you around:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">“啊对对对，这很好。但如果我从一开始就只想要第一种颜色呢？ 我是不是要一直解开所有这些值？” 哈！毋庸置疑！ Erlang 引入了更多的语法糖和模式匹配来帮助你：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_870053" class="syntaxhighlighter nogutter "><div class="bar                                          "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">8&gt;</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="plain">R:</code><code class="numerics">8</code><code class="plain">, Rest</code><code class="symbols">/</code><code class="atoms">binary</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code> <code class="symbols">=</code> <code class="plain">Pixels</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">&lt;&lt;213,45,132,64,76,32,76,0,0,234,32,15&gt;&gt;</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">9&gt;</code> <code class="plain">R</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">213</code></span></span></div></div></div>

<p>Nice, huh? That's because Erlang accepts more than one way to describe a binary segment. Those are all valid:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">很棒，对吧？这是因为 Erlang 接受不止一种方式来描述一个二进制段。这些都是有效的：</hcfy-result><!--hcfy-anchor--></p>
<pre class="expand">	Value
	Value:Size
	Value/TypeSpecifierList
	Value:Size/TypeSpecifierList
</pre>

<p>where <var>Size</var> is going to represent bits or bytes (depending on <var>Type</var> and <var>Unit</var> below), and <var>TypeSpecifierList</var> represents one or more of the following:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true"></hcfy-result></p><div style="text-align: justify;"><span style="font-size: 0.8em;">其中&nbsp;</span><var style="background-color: rgb(255, 255, 255);">Size</var><span style="font-size: 0.8em;">&nbsp;要代表比特长度或字节长度（取决于下面的&nbsp;</span><var style="background-color: rgb(255, 255, 255);">Type</var><span style="font-size: 0.8em;">&nbsp;和&nbsp;</span><var style="background-color: rgb(255, 255, 255);">Unit</var><span style="font-size: 0.8em;">&nbsp;），而&nbsp;</span><var style="background-color: rgb(255, 255, 255);">TypeSpecifierList</var><span style="font-size: 0.8em;">&nbsp;代表以下的一种或多种。-----（译注：比特类型没有层次结构：&nbsp;</span><span style="text-align: justify; background-color: rgb(238, 255, 204); font-size: 11.44px;"><font color="#555555" face="monospace">&lt;&lt;1:24&gt;&gt;</font></span><span style="font-size: 0.8em;">&nbsp;是&nbsp;</span><span style="background-color: rgb(238, 255, 204); color: rgb(85, 85, 85); font-family: monospace; font-size: 11.44px;">&lt;&lt;0,0,1&gt;&gt;</span><span style="font-size: 0.8em;">&nbsp;，&nbsp;</span><span style="background-color: rgb(238, 255, 204); color: rgb(85, 85, 85); font-family: monospace; font-size: 11.44px;">&lt;&lt; &lt;&lt;1:24&gt;&gt;/bits &gt;&gt;</span><span style="font-size: 0.8em;">&nbsp;还是&nbsp;</span><span style="background-color: rgb(238, 255, 204); color: rgb(85, 85, 85); font-family: monospace; font-size: 11.44px;">&lt;&lt;0,0,1&gt;&gt;</span><span style="font-size: 0.8em;">&nbsp;，&nbsp;</span><span style="background-color: rgb(238, 255, 204);"><font color="#555555" face="monospace"><span style="font-size: 11.44px;">&lt;&lt; &lt;&lt;1:24&gt;&gt;/bits,&lt;&lt;1:24&gt;&gt;/bits &gt;&gt;</span></font></span><span style="font-size: 0.8em;">&nbsp;是&nbsp;</span><span style="background-color: rgb(238, 255, 204); color: rgb(85, 85, 85); font-family: monospace; font-size: 11.44px;">&lt;&lt;0,0,1,0,0,1&gt;&gt;</span><span style="font-size: 0.8em;">&nbsp;，另外这里不加&nbsp;</span><span style="background-color: rgb(238, 255, 204); color: rgb(85, 85, 85); font-family: monospace; font-size: 11.44px;">/bits</span><span style="font-size: 0.8em;">&nbsp;的话会出错。）</span></div><!--hcfy-anchor--><p></p>

<dl>
	<dt>Type<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__">类型</hcfy-result><!--hcfy-anchor--></dt>
	<dd>Possible values: <code>integer | float | binary | bytes | bitstring | bits | utf8 | utf16 | utf32</code><hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">可能的值：&nbsp;<code>integer | float | binary | bytes | bitstring | bits | utf8 | utf16 | utf32</code></hcfy-result><!--hcfy-anchor--></dd>
	<dd>This represents the kind of binary data used. Note that 'bytes' is shorthand for 'binary' and 'bits' is shorthand for 'bitstring'. When no type is specified, Erlang assumes an 'integer' type.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这代表了二进制数据使用的种类。注意，“字节”是“二进制”的简称，“比特”是“比特串”的简称。当没有指定类型时， Erlang 假定为“整数”类型。</hcfy-result><!--hcfy-anchor--></dd>
	<dt>Signedness<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">有符号性</hcfy-result><!--hcfy-anchor--></dt>
	<dd>Possible values: <code>signed | unsigned</code><hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">可能的值：&nbsp;<code>signed | unsigned</code></hcfy-result><!--hcfy-anchor--></dd>
	<dd>Only matters for matching when the type is integer. The default is 'unsigned'.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">只有当类型为整数时，会对匹配产生到影响。默认是“无符号”。</hcfy-result><!--hcfy-anchor--></dd>
	<dt>Endianness<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">字节序（端序/尾序）</hcfy-result><!--hcfy-anchor--></dt>
	<dd>Possible values: <code>big | little | native</code><hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">可能的值：&nbsp;<code>big | little | native</code></hcfy-result><!--hcfy-anchor--></dd>
	<dd>Endianness only matters when the Type is either integer, utf16, utf32, or float. This has to do with how the system reads binary data. As an example, the BMP image header format holds the size of its file as an integer stored on 4 bytes. For a file that has a size of 72 bytes, a little-endian system would represent this as <code>&lt;&lt;72,0,0,0&gt;&gt;</code> and a big-endian one as <code>&lt;&lt;0,0,0,72&gt;&gt;</code>. One will be read as '72' while the other will be read as '1207959552', so make sure you use the right endianness. There is also the option to use 'native', which will choose at run-time if the CPU uses little-endianness or big-endianness natively. By default, endianness is set to 'big'.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">字节序只有在类型为 integer 、 utf16 、 utf32 或 float 时才是重要的。这与系统读取二进制数据的方式有关。作为一个例子， BMP 图像头格式将其文件的大小作为一个整数存储在 4 个字节上。对于一个 72 字节的文件，一个&nbsp;little-endian 的系统将表示为&nbsp;<code>&lt;&lt;72,0,0,0&gt;&gt;</code>&nbsp;、而一个 big-endian 的系统表示为&nbsp;<code>&lt;&lt;0,0,0,72&gt;&gt;</code>&nbsp;。一个会被读作“72”，另一个会被读作“1207959552”，所以要确保你使用正确的字节序。还有一个选项是使用“native”，它将在运行时选择此时正在使用的 CPU 是使用小跨度还是大跨度的。默认情况下，字节数被设置为“big”。</hcfy-result><!--hcfy-anchor--></dd>
	<dt>Unit<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">单位</hcfy-result><!--hcfy-anchor--></dt>
	<dd>written <code>unit:Integer</code><hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">写作&nbsp;<code>unit:Integer</code></hcfy-result><!--hcfy-anchor--></dd>
	<dd>This is the size of each segment, in bits. The allowed range is 1..256 and is set by default to 1 for integers, floats and bit strings and to 8 for binary. The utf8, utf16 and utf32 types require no unit to be defined. The multiplication of Size by Unit is equal to the number of bits the segment will take and must be evenly divisible by 8. The unit size is usually used to ensure byte-alignment.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这是每个段（&nbsp;segment ）的大小，单位（类型）是&nbsp;bits 。允许的范围是 1 到 256 ，对于整数、浮点数和比特串默认设置为 1 ，对于二进制设置为 8 。 utf8 、 utf16 和 utf32 类型不要求定义单位。大小与单位的乘法等于该段将采取的比特数，并且必须均匀地除以 8 。单位大小通常用于确保字节对齐。</hcfy-result><!--hcfy-anchor--></dd>
</dl>

<p>The TypeSpecifierList is built by separating attributes by a '-'.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">&nbsp;TypeSpecifierList 是通过用“-”来分隔属性而建立的。</hcfy-result><!--hcfy-anchor--></p>

<p>Some examples may help digest the definitions:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">一些例子可以帮助消化这些定义：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_836486" class="syntaxhighlighter nogutter "><div class="bar                                                                                                                                                                                                                                                          "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">10&gt;</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="plain">X1</code><code class="symbols">/</code><code class="atoms">unsigned</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code> <code class="symbols">=</code>&nbsp; <code class="symbols">&lt;</code><code class="symbols">&lt;-</code><code class="numerics">44</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">&lt;&lt;"Ô"&gt;&gt;</code></span></span></div><div class="line alt1"><code class="number">03.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">11&gt;</code> <code class="plain">X1</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">04.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">212</code></span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">12&gt;</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="plain">X2</code><code class="symbols">/</code><code class="atoms">signed</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code> <code class="symbols">=</code>&nbsp; <code class="symbols">&lt;</code><code class="symbols">&lt;-</code><code class="numerics">44</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code><code class="symbols">.</code>&nbsp;</span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">&lt;&lt;"Ô"&gt;&gt;</code></span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">13&gt;</code> <code class="plain">X2</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">-44</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">14&gt;</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="plain">X2</code><code class="symbols">/</code><code class="atoms">integer</code><code class="symbols">-</code><code class="atoms">signed</code><code class="symbols">-</code><code class="atoms">little</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code> <code class="symbols">=</code>&nbsp; <code class="symbols">&lt;</code><code class="symbols">&lt;-</code><code class="numerics">44</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">10.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">&lt;&lt;"Ô"&gt;&gt;</code></span></span></div><div class="line alt1"><code class="number">11.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">15&gt;</code> <code class="plain">X2</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">12.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">-44</code></span></span></div><div class="line alt1"><code class="number">13.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">16&gt;</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="plain">N:</code><code class="numerics">8</code><code class="symbols">/</code><code class="atoms">unit</code><code class="plain">:</code><code class="numerics">1</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code> <code class="symbols">=</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="numerics">72</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">14.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">&lt;&lt;"H"&gt;&gt;</code></span></span></div><div class="line alt1"><code class="number">15.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">17&gt;</code> <code class="plain">N</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">16.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">72</code></span></span></div><div class="line alt1"><code class="number">17.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">18&gt;</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="plain">N</code><code class="symbols">/</code><code class="atoms">integer</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code> <code class="symbols">=</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="numerics">72</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">18.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">&lt;&lt;"H"&gt;&gt;</code></span></span></div><div class="line alt1"><code class="number">19.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">19&gt;</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="plain">Y:</code><code class="numerics">4</code><code class="symbols">/</code><code class="atoms">little</code><code class="symbols">-</code><code class="atoms">unit</code><code class="plain">:</code><code class="numerics">8</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code> <code class="symbols">=</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="numerics">72</code><code class="plain">,</code><code class="numerics">0</code><code class="plain">,</code><code class="numerics">0</code><code class="plain">,</code><code class="numerics">0</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code><code class="symbols">.</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></div><div class="line alt2"><code class="number">20.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">&lt;&lt;72,0,0,0&gt;&gt;</code></span></span></div><div class="line alt1"><code class="number">21.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">20&gt;</code> <code class="plain">Y</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">22.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">72</code></span></span></div></div></div>

<p>You can see there are more than one way to read, store and interpret binary data. This is a bit confusing, but still much simpler than using the usual tools given by most languages.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">你可以看到有不止一种方法来读取、存储和解释二进制数据。这有点令人困惑，但仍然比使用大多数语言给出的常规工具简单得多。-----（译注：多说一句，&nbsp;<span style="background-color: rgb(238, 255, 204);"><font color="#555555" face="monospace"><span style="font-size: 11.44px;">&lt;&lt;X&gt;&gt; = &lt;&lt;-44/unsigned&gt;&gt;.</span></font></span>&nbsp;和&nbsp;<span style="background-color: rgb(238, 255, 204);"><font color="#555555" face="monospace"><span style="font-size: 11.44px;">&lt;&lt;X/unsigned&gt;&gt; = &lt;&lt;-44&gt;&gt;.</span></font></span>&nbsp;对&nbsp;<span style="color: rgb(85, 85, 85); font-family: monospace; font-size: 11.44px; background-color: rgb(238, 255, 204);">X</span>&nbsp;的效果是一样的；连字符&nbsp;<span style="color: rgb(85, 85, 85); font-family: monospace; font-size: 11.44px; background-color: rgb(238, 255, 204);">-</span>&nbsp;前后单词的顺序可以改变，这顺序对解析结果没啥影响。）</hcfy-result><!--hcfy-anchor--></p>

<p>The standard binary operations (shifting bits to left and right, binary 'and', 'or', 'xor', or 'not') also exist in Erlang. Just use the functions <code>bsl</code> (Bit Shift Left), <code>bsr</code> (Bit Shift Right), <code>band</code>, <code>bor</code>, <code>bxor</code>, and <code>bnot</code>.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">标准的二进制操作（向左和向右移位，二进制“and”、“or”、“xor”或“not”）在 Erlang 中也存在。只需使用函数&nbsp;<code>bsl</code>&nbsp;（比特左移）、&nbsp;<code>bsr</code>&nbsp;（比特右移）、&nbsp;<code>band</code>&nbsp;、&nbsp;<code>bor</code>&nbsp;、&nbsp;<code>bxor</code>&nbsp;和&nbsp;<code>bnot</code>&nbsp;。</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_58590" class="syntaxhighlighter nogutter "><div class="bar                     "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="numerics">2</code><code class="plain">#</code><code class="numerics">00100</code> <code class="symbols">=</code> <code class="numerics">2</code><code class="plain">#</code><code class="numerics">00010</code> <code class="keyword">bsl</code> <code class="numerics">1</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="numerics">2</code><code class="plain">#</code><code class="numerics">00001</code> <code class="symbols">=</code> <code class="numerics">2</code><code class="plain">#</code><code class="numerics">00010</code> <code class="keyword">bsr</code> <code class="numerics">1</code><code class="symbols">.</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="numerics">2</code><code class="plain">#</code><code class="numerics">10101</code> <code class="symbols">=</code> <code class="numerics">2</code><code class="plain">#</code><code class="numerics">10001</code> <code class="keyword">bor</code> <code class="numerics">2</code><code class="plain">#</code><code class="numerics">00101</code><code class="symbols">.</code></span></span></div></div></div>

<p>With that kind of notation and the bit syntax in general, parsing and pattern matching binary data is a piece of cake. One could parse TCP segments with code like this:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">有了这种符号和一般的比特语法，解析和模式匹配二进制数据是小菜一碟。人们可以用这样的代码来解析TCP段：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_329053" class="syntaxhighlighter nogutter "><div class="bar                           "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="plain">SourcePort:</code><code class="numerics">16</code><code class="plain">, DestinationPort:</code><code class="numerics">16</code><code class="plain">,</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 16px !important;"><code class="plain">AckNumber:</code><code class="numerics">32</code><code class="plain">,</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 16px !important;"><code class="plain">DataOffset:</code><code class="numerics">4</code><code class="plain">, </code><code class="symbols">_</code><code class="plain">Reserved:</code><code class="numerics">4</code><code class="plain">, Flags:</code><code class="numerics">8</code><code class="plain">, WindowSize:</code><code class="numerics">16</code><code class="plain">,</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 16px !important;"><code class="plain">CheckSum: </code><code class="numerics">16</code><code class="plain">, UrgentPointer:</code><code class="numerics">16</code><code class="plain">,</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 16px !important;"><code class="plain">Payload</code><code class="symbols">/</code><code class="atoms">binary</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code> <code class="symbols">=</code> <code class="plain">SomeBinary</code><code class="symbols">.</code></span></span></div></div></div>

<p>The same logic can then be applied to anything binary: video encoding, images, other protocol implementations, etc.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">同样的逻辑也可用于任何其它的二进制事物：视频编码、图像、其他协议实现等。</hcfy-result><!--hcfy-anchor--></p>

<div class="note koolaid">
	<p><strong>Don't drink too much Kool-Aid:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">不要喝太多酷爱饮料：</hcfy-result><!--hcfy-anchor--></strong><br>
		Erlang is slow compared to languages like C or C++. Unless you are a patient person, it would be a bad idea to do stuff like converting videos or images with it, even though the binary syntax makes it extremely interesting as I hinted above. Erlang is just not that great at heavy number crunching.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">与 C 或 C++ 等语言相比， Erlang 很慢。除非你是个有耐心的人，否则用它来做转换视频或图像这样的事情是个坏主意——尽管如我上面所暗示的，二进制语法使它非常有趣。埃尔朗在繁重的数字运算方面并不那么出色。</hcfy-result><!--hcfy-anchor--></p>
	
	<p>Take note, however, that Erlang is still mighty fast for applications that do not require number crunching: reacting to events, message passing (with the help of atoms being extremely light), etc. It can deal with events in matters of milliseconds and as such is a great candidate for soft-real-time applications.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">然而，请注意， Erlang 对于不需要数字计算的应用来说仍然是非常快的：对事件的反应、消息传递（借助于原子非常轻）等等。它可以处理以毫秒为单位的事件，因此是软实时应用的最佳选择。</hcfy-result><!--hcfy-anchor--></p>
</div>

<img class="right" src="https://learnyousomeerlang.com/static/img/string.png" width="38" height="142" alt="A string">

<p>There's a whole other aspect to binary notation: bit strings. Binary strings are bolted on top of the language the same way they are with lists, but they're much more efficient in terms of space. This is because normal lists are linked lists (1 'node' per letter) while bit strings are more like C arrays. Bit strings use the syntax <code>&lt;&lt;"this is a bit string!"&gt;&gt;</code>. The downside of binary strings compared to lists is a loss in simplicity when it comes to pattern matching and manipulation. Consequently, people tend to use binary strings when storing text that won't be manipulated too much or when space efficiency is a real issue.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">二进制符还有一个完全不同的方面：位（比特）串。位串以同列表一样的方式被固定在语言的顶部，但它在空间方面更有效率。这是因为，普通的列表是&nbsp;linked lists （一个字母一个“节点”），而位串更像 C 语言的数组。位串使用的语法是&nbsp;<code>&lt;&lt;"这样就是个位串！"&gt;&gt;</code>&nbsp;。与列表相比，位串的缺点是，在模式匹配和操纵处理方面失去了简单性。因此，人们倾向于在存储不会被太多操作的文本、或空间效率是一个真正的问题时，才使用位串。</hcfy-result><!--hcfy-anchor--></p>

<div class="note">
	<p><strong>Note:</strong> Even though bit strings are pretty light, you should avoid using them to tag values. It could be tempting to use string literals to say <code>{&lt;&lt;"temperature"&gt;&gt;,50}</code>, but always use atoms when doing that. Previously in this chapter, atoms were said to be taking only 4 or 8 bytes in space, no matter how long they are. By using them, you'll have basically no overhead when copying data from function to function or sending it to another Erlang node on another server. <hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">注意：尽管位串很轻，但你应该避免使用它们来标记数值。使用字符串字面意义来表示&nbsp;<code>{&lt;&lt;"temperature"&gt;&gt;,50}</code>&nbsp;大概会很诱人，但在做这种事的时候一定还是要使用原子。在本章之前，已经说过原子是只占用 4 或 8 个字节空间的，不管它对应的代码有多长。通过使用原子，你在从函数间复制数据或将其发送到另一台服务器上的另一个 Erlang 节点时，是基本上没开销的。</hcfy-result><!--hcfy-anchor--><br>
    Conversely, do not use atoms to replace strings because they are lighter. Strings can be manipulated (splitting, regular expressions, etc) while atoms can only be compared and nothing else.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">相应地，也不要因为原子更轻就试图用它全然取缔掉字符串（位串）。字符串能被操作（拆分、正则表达式等），原子只能被比较、其它一概不行。-----（译注：就是说，能用原子就满足需要，那就一定要用原子；必须要用到位串的能力，那就别用原子。当然，后一种情况能转化成前一种情况，就请务必转化；确实不能转化，也不要生搬硬套地把位串替成原子。）</hcfy-result><!--hcfy-anchor--></p>
</div>


<h3><a class="section" name="binary-comprehensions">Binary Comprehensions<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">二进制推导式</hcfy-result><!--hcfy-anchor--></a></h3>

<p>Binary comprehensions are to bit syntax what list comprehensions are to lists: a way to make code short and concise. They are relatively new in the Erlang world as they were there in previous revisions of Erlang, but required a module implementing them to use a special compile flag in order to work. Since the R13B revisions (those used here), they've become standard and can be used anywhere, including the shell:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">二进制推导式对比特语法的作用，就像列表推导式对列表的作用一样：一种使代码短小精悍的方法。它们在 Erlang 世界中相对较新，因为它们在以前的 Erlang 版本中就存在、但实现它们所依赖的模块要用上一个特殊的编译标志才能工作。从 R13B 版本（本文用的就是）开始，它们已经成为标准，可以在任何地方使用，包括 shell ：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_833519" class="syntaxhighlighter nogutter "><div class="bar                            show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">1&gt;</code> <code class="plain">[ X </code><code class="symbols">|</code><code class="symbols">|</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="plain">X</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code> <code class="symbols">&lt;</code><code class="symbols">=</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="numerics">1</code><code class="plain">,</code><code class="numerics">2</code><code class="plain">,</code><code class="numerics">3</code><code class="plain">,</code><code class="numerics">4</code><code class="plain">,</code><code class="numerics">5</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code><code class="plain">, X </code><code class="keyword">rem</code> <code class="numerics">2</code> <code class="symbols">==</code> <code class="numerics">0</code><code class="plain">]</code><code class="symbols">.</code>&nbsp;&nbsp;&nbsp;&nbsp;</span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[2,4]</code></span></span></div></div></div>

<p>The only change in syntax from regular list comprehensions is the <code>&lt;-</code> which became <code>&lt;=</code> and using binaries (&lt;&lt;&gt;&gt;) instead of lists ([]). Earlier in this chapter we've seen an example where there was a binary value of many pixels on which we used pattern matching to grab the RGB values of each pixel. It was alright, but on larger structures, it would become possibly harder to read and maintain. The same exercise can be done with a one-line binary comprehension, which is much cleaner:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">与常规的列表理解法相比，语法上唯一的变化是&nbsp;<code>&lt;-</code>&nbsp;变成了&nbsp;<code>&lt;=</code>&nbsp;，并且使用（输入）的是二进制 (&lt;&lt;&gt;&gt;) 而不是列表 ([]) 。在本章的前面，我们已经看到过一个例子了，就是那个有一个许多像素的二进制值（ Pixels ），我们用模式匹配来抓取每个像素的 RGB 值。它基本还不错，但要是一个更大的结构，再那样写就可能变得更难阅读维护。同一个行动用这样一行二进制推导式就可以，而且它明显比以前清晰多了：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_118098" class="syntaxhighlighter nogutter "><div class="bar                                                                                                                                    "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">2&gt;</code> <code class="plain">Pixels </code><code class="symbols">=</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="numerics">213</code><code class="plain">,</code><code class="numerics">45</code><code class="plain">,</code><code class="numerics">132</code><code class="plain">,</code><code class="numerics">64</code><code class="plain">,</code><code class="numerics">76</code><code class="plain">,</code><code class="numerics">32</code><code class="plain">,</code><code class="numerics">76</code><code class="plain">,</code><code class="numerics">0</code><code class="plain">,</code><code class="numerics">0</code><code class="plain">,</code><code class="numerics">234</code><code class="plain">,</code><code class="numerics">32</code><code class="plain">,</code><code class="numerics">15</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">&lt;&lt;213,45,132,64,76,32,76,0,0,234,32,15&gt;&gt;</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">3&gt;</code> <code class="plain">RGB </code><code class="symbols">=</code> <code class="plain">[ {R,G,B} </code><code class="symbols">|</code><code class="symbols">|</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="plain">R:</code><code class="numerics">8</code><code class="plain">,G:</code><code class="numerics">8</code><code class="plain">,B:</code><code class="numerics">8</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code> <code class="symbols">&lt;</code><code class="symbols">=</code> <code class="plain">Pixels ]</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[{213,45,132},{64,76,32},{76,0,0},{234,32,15}]</code></span></span></div></div></div>

<p>Changing <code>&lt;-</code> to <code>&lt;=</code> let us use a binary stream as a generator. The complete binary comprehension basically changed binary data to integers inside tuples. Another binary comprehension syntax exists to let you do the exact opposite:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">把&nbsp;<code>&lt;-</code>&nbsp;改为&nbsp;<code>&lt;=</code>&nbsp;，就能让我们把二进制流作为一个生成器（&nbsp;generator ）来使用。完整的二进制推导式，基本上是将二进制数据改为图元内的整数这样用的。但还有另一种二进推导式的语法，能让你做反过来的事情：-----（译注：看下面代码，正如之前说过的，二进制复合是没有嵌套层次的性质的。）</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_716852" class="syntaxhighlighter nogutter "><div class="bar                                                                      "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">4&gt;</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="plain">R:</code><code class="numerics">8</code><code class="plain">, G:</code><code class="numerics">8</code><code class="plain">, B:</code><code class="numerics">8</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code> <code class="symbols">|</code><code class="symbols">|</code>&nbsp; <code class="plain">{R,G,B} </code><code class="symbols">&lt;-</code> <code class="plain">RGB </code><code class="symbols">&gt;</code><code class="symbols">&gt;</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">&lt;&lt;213,45,132,64,76,32,76,0,0,234,32,15&gt;&gt;</code></span></span></div></div></div>

<p>Be careful, as the elements of the resulting binary require a clearly defined size if the generator returned binaries:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">要小心，如果生成器返回二进制文件，那么生成的二进制文件的元素需要有明确定义的大小（但这示例其实是明确定义的类型吧喂？）：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_752025" class="syntaxhighlighter nogutter "><div class="bar                                     "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">5&gt;</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="plain">Bin</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code> <code class="symbols">|</code><code class="symbols">|</code> <code class="plain">Bin </code><code class="symbols">&lt;-</code> <code class="plain">[</code><code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="numerics">3</code><code class="plain">,</code><code class="numerics">7</code><code class="plain">,</code><code class="numerics">5</code><code class="plain">,</code><code class="numerics">4</code><code class="plain">,</code><code class="numerics">7</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code><code class="plain">] </code><code class="symbols">&gt;</code><code class="symbols">&gt;</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="errors">** exception error: bad argument</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">6&gt;</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="plain">Bin</code><code class="symbols">/</code><code class="atoms">binary</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code> <code class="symbols">|</code><code class="symbols">|</code> <code class="plain">Bin </code><code class="symbols">&lt;-</code> <code class="plain">[</code><code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="numerics">3</code><code class="plain">,</code><code class="numerics">7</code><code class="plain">,</code><code class="numerics">5</code><code class="plain">,</code><code class="numerics">4</code><code class="plain">,</code><code class="numerics">7</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code><code class="plain">] </code><code class="symbols">&gt;</code><code class="symbols">&gt;</code><code class="symbols">.</code>&nbsp;</span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">&lt;&lt;3,7,5,4,7&gt;&gt;</code></span></span></div></div></div>

<p>It's also possible to have a binary comprehension with a binary generator, given the fixed-size rule above is respected:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">只要遵守上面的固定大小规则，也可以用二进制生成器来组成二进制推导式：-----（译注：我来组成头部！！🤖（其实这里还是可以强调一下这玩意儿没有层次结构这回事儿。））</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_569560" class="syntaxhighlighter nogutter "><div class="bar                       "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">7&gt;</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="plain">(X</code><code class="numerics">+1</code><code class="plain">)</code><code class="symbols">/</code><code class="atoms">integer</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code> <code class="symbols">|</code><code class="symbols">|</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="plain">X</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code> <code class="symbols">&lt;</code><code class="symbols">=</code> <code class="symbols">&lt;</code><code class="symbols">&lt;</code><code class="numerics">3</code><code class="plain">,</code><code class="numerics">7</code><code class="plain">,</code><code class="numerics">5</code><code class="plain">,</code><code class="numerics">4</code><code class="plain">,</code><code class="numerics">7</code><code class="symbols">&gt;</code><code class="symbols">&gt;</code> <code class="symbols">&gt;</code><code class="symbols">&gt;</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">&lt;&lt;4,8,6,5,8&gt;&gt;</code></span></span></div></div></div>

<div class="note">
	<p><strong>Note:</strong> At the time of this writing, binary comprehensions were seldom used and not documented very well. As such, it was decided not to dig more than what is necessary to identify them and understand their basic working. To understand more bit syntax as a whole, read the <a class="external" href="http://user.it.uu.se/~pergu/papers/erlang05.pdf" title="Bit-level Binaries and Generalized Comprehensions in Erlang">white paper defining their specification</a>.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">注意：在写这篇文章的时候，二进制推导式很少使用，也没有很好的文档。因此，我们决定不挖掘太多的内容，以至于超过识别它们和理解它们的基本工作的所需。要了解更多的比特语法的整体情况，请阅读定义其规范的白皮书。</hcfy-result><!--hcfy-anchor--></p>
</div>
				<ul class="navigation">
											<li><a href="https://learnyousomeerlang.com/starting-out" title="Previous chapter">&lt; Previous<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">&lt; 上一页</hcfy-result><!--hcfy-anchor--></a></li>
										
					<li><a href="https://learnyousomeerlang.com/contents" title="Index">Index<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">索引</hcfy-result><!--hcfy-anchor--></a></li>
					
											<li><a href="https://learnyousomeerlang.com/modules" title="Next chapter">Next &gt;<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">下一页 &gt;</hcfy-result><!--hcfy-anchor--></a></li>
									</ul>
			</div><div id="content">
            <div class="noscript"><noscript>Hey there, it appears your Javascript is disabled. That's fine, the site works without it. However, you might prefer reading it with syntax highlighting, which requires Javascript!</noscript></div>
<h2>Modules<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">模块</hcfy-result><!--hcfy-anchor--></h2>
<h3><a class="section" name="what-are-modules">What are modules<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">啥是模块</hcfy-result><!--hcfy-anchor--></a></h3>

<img class="left" src="https://learnyousomeerlang.com/static/img/modules.png" width="168" height="148" alt="A box with functions written on it" title="And yes, I do believe functions are squiggly little colorfoul lines stuffed in a cardboard box.">

<p>Working with the interactive shell is often considered a vital part of using dynamic programming languages. It is useful to test all kinds of code and programs. Most of the basic data types of Erlang were used without even needing to open a text editor or saving files. You could drop your keyboard, go play ball outside and call it a day, but you would be a terrible Erlang programmer if you stopped right there. Code needs to be saved somewhere to be used!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">使用交互式外壳（ SHell ）工作通常被认为是使用动态编程语言的一个重要部分。它对测试各种代码和程序都很有用。使用 Erlang 的大部分基本数据类型，甚至不需要打开文本编辑器或保存文件。你可以放下键盘，去外面打球，然后收工。但，若你当真就此止步，你便不是一个足够好的 Erlang 程序员。代码总归是要被存在某个地方来用的啊！</hcfy-result><!--hcfy-anchor--></p>

<p>This is what modules are for. Modules are a bunch of functions regrouped in a single file, under a single name. Additionally, all functions in Erlang must be defined in modules. You have already used modules, perhaps without realizing it. The BIFs mentioned in the previous chapter, like <code>hd</code> or <code>tl</code>, actually belong to the <code>erlang</code> module, as well as all of the arithmetic, logic and Boolean operators. BIFs from the <code>erlang</code> module differ from other functions as they are automatically imported when you use Erlang. Every other function defined in a module you will ever use needs to be called with the form <code>Module:Function(Arguments)</code>.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这就是模块的作用。模块是一个有名字的、整合了一堆函在一个文件中的东西。并且， Erlang 中的所有函数也都必须在模块中定义（译注：其实匿名函数除外）。其实你可能已经使用了模块，只是没注意到而已。譬如上一章提到的 BIF ，如&nbsp;<code>hd</code>&nbsp;或&nbsp;<code>tl</code>&nbsp;，它们就属于&nbsp;<code>erlang</code>&nbsp;模块；还有所有的算术、逻辑和布尔运算符也都是这样。&nbsp;<code>erlang</code>&nbsp;模块的 BIF 与其他函数不同，当你使用 Erlang 时，它们会被自动导入。其它所有别的模块中定义的函数，你要想调用，就要写&nbsp;<code>Module:Function(Arguments)</code>&nbsp;。</hcfy-result><!--hcfy-anchor--></p>

<p>You can see for yourself:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">你可以亲自试试看：</hcfy-result><!--hcfy-anchor--></p>


<div id="highlighter_851534" class="syntaxhighlighter nogutter "><div class="bar                            show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：找不到source的语种下拉框。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：找不到source的语种下拉框。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：找不到source的语种下拉框。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">1&gt;</code> <code class="functions">erlang:element</code><code class="plain">(</code><code class="numerics">2</code><code class="plain">, {</code><code class="atoms">a</code><code class="plain">,</code><code class="atoms">b</code><code class="plain">,</code><code class="atoms">c</code><code class="plain">})</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">b</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">2&gt;</code> <code class="functions">element</code><code class="plain">(</code><code class="numerics">2</code><code class="plain">, {</code><code class="atoms">a</code><code class="plain">,</code><code class="atoms">b</code><code class="plain">,</code><code class="atoms">c</code><code class="plain">})</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">b</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">3&gt;</code> <code class="functions">lists:seq</code><code class="plain">(</code><code class="numerics">1</code><code class="plain">,</code><code class="numerics">4</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">6.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[1,2,3,4]</code></span></span></div><div class="line alt1"><code class="number">7.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">4&gt;</code> <code class="functions">seq</code><code class="plain">(</code><code class="numerics">1</code><code class="plain">,</code><code class="numerics">4</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">8.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="errors">** exception error: undefined shell command seq/2</code></span></span></div></div></div>


<p>Here, the <code>seq</code> function from the list module was not automatically imported, while <code>element</code> was. The error 'undefined shell command' comes from the shell looking for a shell command like <code>f()</code> and not being able to find it. There are some functions from the <code>erlang</code> module which are not automatically imported, but they're not used too frequently.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">在此， list 模块的&nbsp;<code>seq</code>&nbsp;函数没能被自动导入，但&nbsp;<code>element</code>&nbsp;却被导入了。错误报告 'undefined shell command' 来自于 shell 试图找到像&nbsp;<code>f()</code>&nbsp;这样 shell 命令时没能找到的情况。还有一些来自&nbsp;<code>erlang</code>&nbsp;模块的函数没有被自动导入，但它们的使用频率并不高。</hcfy-result><!--hcfy-anchor--></p>

<p>Logically, you should put functions about similar things inside a single module. Common operations on lists are kept in the <code>lists</code> module, while functions to do input and output (such as writing to the terminal or in a file) are regrouped in the <code>io</code> module. One of the only modules you will encounter which doesn't respect that pattern is the aforementioned <code>erlang</code> module that has functions which do math, conversions, deal with multiprocessing, fiddle with the virtual machine's settings, etc. They have no point in common except being built-in functions. You should avoid creating modules like <code>erlang</code> and instead focus on clean logical separations.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">逻辑上讲，你应该把和类似东西相关的函数都放在一个模块里。常见的对列表的操作都放在&nbsp;<code>lists</code>&nbsp;模块中；而承担输入输出功能（如把数据写到终端或文件中）的函数，则是被组合在了&nbsp;<code>io</code>&nbsp;模块里。你会遇到的唯一一个不遵守这个套路模块，就是前面提到的&nbsp;<code>erlang</code>&nbsp;模块，它有数学、转换、多进程、摆弄虚拟机设置，等等这样的功能；而它们，除了“是内置函数”这一点外，也再没有别的任何共同点了。你应该避免创建这样的像&nbsp;<code>erlang</code>&nbsp;一样的模块，而应当专心做到，干净清晰、且合乎逻辑的分划。</hcfy-result><!--hcfy-anchor--></p>

<h3><a class="section" name="module-declaration">Module Declaration<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">模块的声明</hcfy-result><!--hcfy-anchor--></a></h3>

<img class="right" src="https://learnyousomeerlang.com/static/img/declaration.png" width="95" height="139" alt="A scroll with small text on it" title="I HEREBY DECLARE THIS MODULE AS INDEPENDENT FROM THE OTHERS">

<p>When writing a module, you can declare two kinds of things: <em>functions</em> and <em>attributes</em>. Attributes are metadata describing the module itself such as its name, the functions that should be visible to the outside world, the author of the code, and so on. This kind of metadata is useful because it gives hints to the compiler on how it should do its job, and also because it lets people retrieve useful information from compiled code without having to consult the source.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">编写模块时，你可以声明两种东西：函数和属性。属性是描述模块本身的元数据，比如它的名字、它应该对外界可见的函数、它代码的作者，等等。像这种元数据很有用的：因为它给编译器提供了提示，告诉它应该如何做它的工作；以及还因为它使得人们可以无需查阅源码，只是通过编译后的字节码就能检索到有用的信息。</hcfy-result><!--hcfy-anchor--></p>

<p>There is a large variety of module attributes currently used in Erlang code across the world; as a matter of fact, you can even declare your own attributes for whatever you please. There are some pre-defined attributes that will appear more frequently than others in your code. All module attributes follow the form <code>-Name(Attribute).</code>. Only one of them is necessary for your module to be compilable:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">目前，世界各地的 Erlang 代码中使用了大量的模块属性；并且事实上，你甚至还可以随你的喜好为你自己声明任意的属性。在此有一些预定义的属性，它们在你的代码工作中会出现得比其他属性更加频繁。所有的模块属性都遵循&nbsp;<code>-Name(Attribute).</code>&nbsp;的形式。在所有的这些属性中，只有一个，是你模块之可以被编译的必要条件：</hcfy-result><!--hcfy-anchor--></p>

<dl>
	<dt>-module(Name).</dt>
	<dd>This is always the first attribute (and statement) of a file, and for good reason: it's the name of the current module, where <var>Name</var> is an <a class="chapter" href="https://learnyousomeerlang.com/starting-out-for-real#atoms" title="atom definition">atom</a>. This is the name you'll use to call functions from other modules. The calls are made with the <code>M:F(A)</code> form, where <var>M</var> is the module name, <var>F</var> the function, and <var>A</var> the arguments.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">它总是一个文件的第一个属性（也是第一个语句），而且有很好的理由如此设计：它是当前模块的模块名（其中的&nbsp;<var style="background-color: rgb(255, 255, 255);">Name</var>&nbsp;是一个原子）。你要用到一个模块的模块名，来在别的模块里调用那些定义在了这个模块里头的函数。调用时采用的形式就是&nbsp;<code>M:F(A)</code>&nbsp;——其中，&nbsp;<var style="background-color: rgb(255, 255, 255);">M</var>&nbsp;是模块名称、&nbsp;<var style="background-color: rgb(255, 255, 255);">F</var>&nbsp;是函数名、&nbsp;<var style="background-color: rgb(255, 255, 255);">A</var>&nbsp;是参数列表。</hcfy-result><!--hcfy-anchor--></dd>
</dl>

<p>It's time to code already! Our first module will be very simple and useless. Open your text editor and type in the following, then save it under <code>useless.erl</code>:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">是时候写写代码了！我们的第一个模块将会非常地简单而且没用。打开你的文本编辑器，输入以下内容，然后保存它们在&nbsp;<code>useless.erl</code>&nbsp;文件里：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_211013" class="syntaxhighlighter nogutter "><div class="bar                                       "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：找不到source的语种下拉框。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：找不到source的语种下拉框。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：找不到source的语种下拉框。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">-module</code><code class="plain">(</code><code class="atoms">useless</code><code class="plain">)</code><code class="symbols">.</code></span></span></div></div></div>

<p>This line of text is a valid module. Really! Of course it's useless without functions. Let's first decide what functions will be exported from our 'useless' module. To do this, we will use another attribute:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这行文本就是一个有效的模块。真的！当然，没有函数（功能）也是没有用的。让我们首先决定一下，要允许哪些函数从我们的“无用”模块中对外可见。要做到这件事，我们得用到另外一个属性：</hcfy-result><!--hcfy-anchor--></p>

<dl>
	<dt>-export([Function1/Arity, Function2/Arity, ..., FunctionN/Arity]).</dt>
	<dd>This is used to define what functions of a module can be called by the outside world. It takes a list of functions with their respective arity. The arity of a function is an integer representing how many arguments can be passed to the function. This is critical information, because different functions defined within a module can share the same name if and only if they have a different arity. The functions <code>add(X,Y)</code> and <code>add(X,Y,Z)</code> would thus be considered different and written in the form <code>add/2</code> and <code>add/3</code> respectively.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这个属性 (export) ，能用来定义当前模块中的哪些函数允许被外部调用。它接受一个满是函数名的列表，其中每个函数名后都要跟着写上自己参数列表的长度（称之为 arity ：节数）。一个函数的 arity （节数）是一个整数，代表了该函数接受参数的个数。这个信息是很重要的，因为，同模块中允许不同函数使用同样的函数名，只要它们节数不同（译注：更简要的表述是：同模块内必须同名且同节数的才能定位到同一个函数）。就是说，函数&nbsp;<code>add(X,Y)</code>&nbsp;和函数&nbsp;<code>add(X,Y,Z)</code>&nbsp;是两个不同的函数；而要指代二者，就分别要写作为&nbsp;<code>add/2</code>&nbsp;和&nbsp;<code>add/3</code>&nbsp;的形式。</hcfy-result><!--hcfy-anchor--></dd>
</dl>

<div class="note">
	<p><strong>Note:</strong> Exported functions represent a module's interface. It is important to define an interface revealing strictly what is necessary for it to be used and nothing more. Doing so lets you fiddle with all the other [hidden] details of your implementation without breaking code that might depend on your module.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">注意：一个模块有哪些被导出函数，代表了这个模块有哪些对外使用的接口。定义一个接口时，严谨地揭示所有使用它时需提供信息（而不是别的信息），是很重要的。这样做，可以另你在不需要破坏所有可能依赖你模块的代码的前提下，随意地摆弄你在这个模块里实现的所有其他的【隐藏着的】细节。</hcfy-result><!--hcfy-anchor--></p>
</div>

<p>Our useless module will first export a useful function named 'add', which will take two arguments. The following <code>-export</code> attribute can be added after the module declaration:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">我们的无用模块将首先导出一个名为“ add ”的有用的函数（它接受两个参数）。下面的&nbsp;<code>-export</code>&nbsp;属性可以写在模块声明之后：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_98362" class="syntaxhighlighter nogutter "><div class="bar        show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：找不到source的语种下拉框。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：找不到source的语种下拉框。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：找不到source的语种下拉框。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">-export</code><code class="plain">([</code><code class="atoms">add</code><code class="symbols">/</code><code class="numerics">2</code><code class="plain">])</code><code class="symbols">.</code></span></span></div></div></div>

<p>And now write the function:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">然后再写上个这么个函数：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_690335" class="syntaxhighlighter nogutter "><div class="bar                                   "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">add(A,B) </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="plain">A </code><code class="symbols">+</code> <code class="plain">B</code><code class="symbols">.</code></span></span></div></div></div>

<p>The syntax of a function follows the form <code>Name(Args) -&gt; Body.</code>, where <var>Name</var> has to be an atom and <var>Body</var> can be one or more Erlang expressions separated by commas. The function is ended with a period. Note that Erlang doesn't use the 'return' keyword. 'Return' is useless! Instead, the last logical expression of a function to be executed will have its value returned to the caller automatically without you having to mention it.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">函数的定义语法遵循&nbsp;<code>Name(Args) -&gt; Body.</code>&nbsp;的形式，其中&nbsp;<var style="background-color: rgb(255, 255, 255);">Name</var>&nbsp;必须是一个原子、而&nbsp;<var style="background-color: rgb(255, 255, 255);">Body</var>&nbsp;可以是一个或多个用逗号分隔的 Erlang 表达式。函数以句点结束。注意， Erlang 不用“ return ”关键字的，写“ return ”是没有用的！函数会用最后一个表达式（句点紧挨着的那个）的返回值作为函数的返回值，你无需提及你要返回啥。（译注：这其实也就制止了，那种通过指定返回时机来强行打断函数整体的，那种“不函数式”的行为。）</hcfy-result><!--hcfy-anchor--></p>

<p>Add the following function (why yes, every tutorial needs a 'Hello world' example! Even at the fourth chapter!), without forgetting to add it to the <code>-export</code> attribute.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">添加以下函数（对的没错，每个教程都需要一个“ Hello world ”的例子！即便是在第四章！），以及别忘了把它添加到&nbsp;<code>-export</code>&nbsp;属性中。</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_955310" class="syntaxhighlighter nogutter "><div class="bar                 "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">%% Shows greetings.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">%% io:format/1 is the standard function used to output text.</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">hello() </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="functions">io:format</code><code class="plain">(</code><code class="string">"Hello, world!~n"</code><code class="plain">)</code><code class="symbols">.</code></span></span></div></div></div>

<p>What we see from this function is that comments are single-line only and begin with a <code>%</code> sign (using <code>%%</code> is purely a question of style.) The <code>hello/0</code> function also demonstrates how to call functions from foreign modules inside yours. In this case, <code>io:format/1</code> is the standard function to output text, as written in the comments.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">我们从这个函数中看到的是，注释只能是单行，并以&nbsp;<code>%</code>&nbsp;符号开始（使用&nbsp;<code>%%</code>&nbsp;纯粹是一个风格问题）。函数&nbsp;<code>hello/0</code>&nbsp;还演示了如何在你的模块中调用别的模块的函数。在此处，&nbsp;<code>io:format/1</code>&nbsp;是输出文本的标准函数，如注释之所描述。</hcfy-result><!--hcfy-anchor--></p>

<p>A last function will be added to the module, using both functions <code>add/2</code> and <code>hello/0</code>:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这是我们所要添加到该模块中的最后一个函数，它在定义里调用了&nbsp;<code>add/2</code>&nbsp;和&nbsp;<code>hello/0</code>&nbsp;这两个函数：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_519392" class="syntaxhighlighter nogutter "><div class="bar               "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">greet</code><code class="symbols">_</code><code class="plain">and</code><code class="symbols">_</code><code class="plain">add</code><code class="symbols">_</code><code class="plain">two(X) </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="functions">hello</code><code class="plain">(),</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="functions">add</code><code class="plain">(X,</code><code class="numerics">2</code><code class="plain">)</code><code class="symbols">.</code></span></span></div></div></div>

<img class="left" src="https://learnyousomeerlang.com/static/img/imports.png" width="145" height="134" alt="A box being put in another one" title="Yes, I'm reusing drawings on that one">

<p>Do not forget to add <code>greet_and_add_two/1</code> to the exported function list. The calls to <code>hello/0</code> and <code>add/2</code> don't need to have the module name prepended to them because they were declared in the module itself.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">别忘了把&nbsp;<code>greet_and_add_two/1</code>&nbsp;也添加到要导出的函数名列表里。在它的定义里，对&nbsp;<code>hello/0</code>&nbsp;和&nbsp;<code>add/2</code>&nbsp;的调用不需要预留模块名称，这是因为那两者本来也就是在这同一个模块里面定义的。</hcfy-result><!--hcfy-anchor--></p>

<p>Had you wanted to be able to call <code>io:format/1</code> in the same manner as <code>add/2</code> or any other function defined within the module, you could have added the following module attribute at the beginning of the file: <code>-import(io, [format/1]).</code>. Then you could have called <code>format("Hello, World!~n").</code> directly. More generally, the <code>-import</code> attribute follows this recipe:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">如果你想在调用&nbsp;<code>io:format/1</code>&nbsp;的时候，只需要通过类似于&nbsp;<code>add/2</code>&nbsp;这样的模块内定义的函数的形式，你可以在模块定义文件的开头添加这样的一个模块属性：&nbsp;<code>-import(io, [format/1]).</code>&nbsp;。然后，你就能直接写譬如&nbsp;<code>format("Hello, World!~n").</code>&nbsp;了。更一般来讲，&nbsp;<code>-import</code>&nbsp;属性遵循这样的形式：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_632373" class="syntaxhighlighter nogutter "><div class="bar         show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">-import</code><code class="plain">(Module, [Function1</code><code class="symbols">/</code><code class="plain">Arity, </code><code class="symbols">.</code><code class="symbols">.</code><code class="symbols">.</code><code class="plain">, FunctionN</code><code class="symbols">/</code><code class="plain">Arity])</code><code class="symbols">.</code></span></span></div></div></div>

<p>Importing a function is not much more than a shortcut for programmers when writing their code. Erlang programmers are often discouraged from using the <code>-import</code> attribute as some people find it reduces the readability of code. In the case of <code>io:format/2</code>, the function <code>io_lib:format/2</code> also exists. Finding which one is used means going to the top of the file to see from which module it was imported. Consequently, leaving the module name in is considered good practice. Usually, the only functions you'll see imported come from the lists module: its functions are used with a higher frequency than those from most other modules.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">导入函数不过是一种便捷途径。 Erlang 程序员通常不被鼓励使用&nbsp;<code>-import</code>&nbsp;属性，因为有人发现这样会降低代码可读性。在&nbsp;<code>io:format/2</code>&nbsp;的情况下，函数&nbsp;<code>io_lib:format/2</code>&nbsp;也存在。要想知道被调用的到底是哪个函数，就必须得去顶部的所有被导入模块里挨个儿找一遍。所以，在每次调用时把模块名也写清楚，这一般是更好的做法。一般而言，你会看到，唯一导入着用函数的模块，也就是 list 的模块：因为这里的函数比之别的模块的，用得也更频繁。</hcfy-result><!--hcfy-anchor--></p>

<p>Your <code><a class="source" href="https://learnyousomeerlang.com/static/erlang/useless.erl" title="final implementation">useless</a></code> module should now look like the following file:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">你&nbsp;<code><a class="source" href="https://learnyousomeerlang.com/static/erlang/useless.erl" title="final implementation" style="font-size: 12px;">useless</a></code>&nbsp;模块文件的内容，现看起来应该像下面这样：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_42779" class="syntaxhighlighter nogutter "><div class="bar                                                                                                                 "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">-module</code><code class="plain">(</code><code class="atoms">useless</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">-export</code><code class="plain">([</code><code class="atoms">add</code><code class="symbols">/</code><code class="numerics">2</code><code class="plain">, </code><code class="atoms">hello</code><code class="symbols">/</code><code class="numerics">0</code><code class="plain">, </code><code class="atoms">greet_and_add_two</code><code class="symbols">/</code><code class="numerics">1</code><code class="plain">])</code><code class="symbols">.</code></span></span></div><div class="line alt1"><code class="number">03.</code><span class="content"><span class="block" style="margin-left: 0px !important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">04.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">add(A,B) </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="plain">A </code><code class="symbols">+</code> <code class="plain">B</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><span class="block" style="margin-left: 0px !important;">&nbsp;</span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">%% Shows greetings.</code></span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">%% io:format/1 is the standard function used to output text.</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">hello() </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">10.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="functions">io:format</code><code class="plain">(</code><code class="string">"Hello, world!~n"</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt1"><code class="number">11.</code><span class="content"><span class="block" style="margin-left: 0px !important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">12.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">greet</code><code class="symbols">_</code><code class="plain">and</code><code class="symbols">_</code><code class="plain">add</code><code class="symbols">_</code><code class="plain">two(X) </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt1"><code class="number">13.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="functions">hello</code><code class="plain">(),</code></span></span></div><div class="line alt2"><code class="number">14.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="functions">add</code><code class="plain">(X,</code><code class="numerics">2</code><code class="plain">)</code><code class="symbols">.</code></span></span></div></div></div>

<p>We are done with the "useless" module. You can save the file under the name <code>useless.erl</code>. The file name should be the module name as defined in the <code>-module</code> attribute, followed by '.erl', which is the standard Erlang source extension.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">我们完成了“没啥用”模块的编写。你可以把它存到名为&nbsp;<code>useless.erl</code>&nbsp;的文件里。文件名应和&nbsp;<code>-module</code>&nbsp;中定义的模块名相同，再在后面加上“ .erl ”的后缀——这是合乎标准的 Erlang 代码扩展名。</hcfy-result><!--hcfy-anchor--></p>

<p>Before showing how to compile the module and finally try all its exciting functions, we will see how to define and use macros. Erlang macros are really similar to C's '#define' statements, mainly used to define short functions and constants. They are simple expressions represented by text that will be replaced before the code is compiled for the VM. Such macros are mainly useful to avoid having magic values floating around your modules. A macro is defined as a module attribute of the form: <code>-define(MACRO, some_value).</code> and is used as <code>?MACRO</code> inside any function defined in the module. A 'function' macro could be written as <code>-define(sub(X,Y), X-Y).</code> and used like <code>?sub(23,47)</code>, later replaced by <code>23-47</code> by the compiler. Some people will use more complex macros, but the basic syntax stays the same.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">在展示如何编译模块并最终尝试其所有令人兴奋的功能之前，我们将看到如何定义和使用宏。 Erlang 宏实际上类似于 C 语言的“ #define ”语句，主要用于定义简短的函数和常量。它们是用文本表示的简单表达式，在编译前，代码会基于宏中定义的规则被替换。像这种宏，主要是为了避免代码中存在魔法值。一个宏通过一个属性来定义，形如：&nbsp;<code>-define(MACRO, some_value).</code>&nbsp;，并以&nbsp;<code>?MACRO</code>&nbsp;的样子在这个模块的任何函数里使用。一个“函数”宏可写成&nbsp;<code>-define(sub(X,Y), X-Y).</code>&nbsp;并以&nbsp;<code>?sub(23,47)</code>&nbsp;的样子使用，它在后面就会被编译器替换为&nbsp;<code>23-47</code>&nbsp;。有些人能把宏玩儿出更多的花儿，但基本语法依然还是这些。</hcfy-result><!--hcfy-anchor--></p>


<h3><a class="section" name="compiling-the-code">Compiling the code<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">编译代码</hcfy-result><!--hcfy-anchor--></a></h3>

<p>Erlang code is compiled to bytecode in order to be used by the virtual machine. You can call the compiler from many places: <code>$ <a class="docs" href="http://erlang.org/doc/man/erlc.html" title="erlc manual">erlc</a> flags file.erl</code> when in the command line, <code>compile:file(FileName)</code> when in the shell or in a module, <code>c()</code> when in the shell, etc.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">要将 Erlang 代码编译为字节码以用于虚机。可以从很多地方调用编译器：命令行执行&nbsp;<code>$&nbsp;<a class="docs" href="http://erlang.org/doc/man/erlc.html" title="erlc manual" style="font-size: 12px;">erlc</a>&nbsp;flags file.erl</code>&nbsp;、要么 Erlang-SHell 或模块中调用&nbsp;<code>compile:file(FileName)</code>&nbsp;、要么在&nbsp;Erlang-SHell 调用&nbsp;<code>c()</code>&nbsp;，且不限于这些。</hcfy-result><!--hcfy-anchor--></p>

<p>It's time to compile our useless module and try it. Open the Erlang shell, type in:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">编译一下我们的“没啥用”模块吧，是骡是马拉出来遛遛。打开 Erlang SHell ，输入：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_999940" class="syntaxhighlighter nogutter "><div class="bar                                                                                            "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">1&gt;</code> <code class="functions">cd</code><code class="plain">(</code><code class="string">"/path/to/where/you/saved/the-module/"</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">"Path Name to the directory you are in"</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">ok</code></span></span></div></div></div>

<p>By default, the shell will only look for files in the same directory it was started in and the standard library: <code>cd/1</code> is a function defined exclusively for the Erlang shell, telling it to change the directory to a new one so it's less annoying to browse for our files. Windows users should remember to use forward slashes. When this is done, do the following:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">默认情况下， shell 只会在它启动的同一目录下寻找文件。标准库的：&nbsp;<code>cd/1</code>&nbsp;是一个专门为 Erlang shell 定义的函数，它可以用于告知解释器把目录换成新的，这样浏览我们的文件就不会那么烦人了（译注：指退出来换目录再进去。除 cd 外还有 ls 和 pwd ，用法和 Linux shell 的差不多）。 Windows 用户应该记得使用正斜线。完成后，做如下操作：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_980769" class="syntaxhighlighter nogutter "><div class="bar                                                                      "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">查看来源</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">打印</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">?</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">2&gt;</code> <code class="plain">c(</code><code class="atoms">useless</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">{ok,useless}</code></span></span></div></div></div>

<p>If you have another message, make sure the file is named correctly, that you are in the right directory and that you've made no mistake in your <a class="source" href="https://learnyousomeerlang.com/static/erlang/useless.erl" title="check against THIS!">module</a>. Once you successfully compile code, you'll notice that a <code>useless.beam</code> file was added next to <code>useless.erl</code> in your directory. This is the compiled module. Let's try our first functions ever:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">如果你有其他信息（译注：譬如错误信息），请确保文件命名正确，你在正确的目录中，并且你的模块没有错误。一旦你成功地编译了代码，你会发现在你的目录中，在&nbsp;<code>useless.erl</code>&nbsp;旁边增加了一个&nbsp;<code>useless.beam</code>&nbsp;文件。这就是编译后的模块。让我们尝试一下我们的第一个函数：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_386896" class="syntaxhighlighter nogutter "><div class="bar                                     show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">3&gt;</code> <code class="functions">useless:add</code><code class="plain">(</code><code class="numerics">7</code><code class="plain">,</code><code class="numerics">2</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">9</code></span></span></div><div class="line alt1"><code class="number">03.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">4&gt;</code> <code class="functions">useless:hello</code><code class="plain">()</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">04.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">Hello, world!</code></span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">ok</code></span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">5&gt;</code> <code class="functions">useless:greet_and_add_two</code><code class="plain">(</code><code class="symbols">-</code><code class="numerics">3</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">Hello, world!</code></span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">-1</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">6&gt;</code> <code class="functions">useless:not_a_real_function</code><code class="plain">()</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">10.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="errors">** exception error: undefined function useless:not_a_real_function/0</code></span></span></div></div></div>

<p>The functions work as expected: <code>add/2</code> adds numbers, <code>hello/0</code> outputs "Hello, world!", and <code>greet_and_add_two/1</code> does both! Of course, you might be asking why <code>hello/0</code> returns the atom 'ok' after outputting text. This is because Erlang functions and expressions must <strong>always</strong> return something, even if they would not need to in other languages. As such, <code>io:format/1</code> returns 'ok' to denote a normal condition, the absence of errors.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这些函数按预期工作：&nbsp;<code>add/2</code>&nbsp;让数字相加，&nbsp;<code>hello/0</code>&nbsp;输出 "Hello, world!" ，而&nbsp;<code>greet_and_add_two/1</code>&nbsp;同时做这两件事。当然，你可能会问，为什么&nbsp;<code>hello/0</code>&nbsp;在输出文本后返回原子 'ok' 。这是因为 Erlang 函数和表达式必须<b>总是</b>返回一些东西，虽说在其他语言中的函数不一定需要这样做。因此，&nbsp;<code>io:format/1</code>&nbsp;返回 'ok' 以表示正常情况，即表示没有错误。</hcfy-result><!--hcfy-anchor--></p>

<p>Expression 6 shows an error being thrown because a function doesn't exist. If you have forgotten to export a function, this is the kind of error message you will have when trying it out.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">表达式 6 显示了一个错误的抛出，因为该个函数并不存在。如果你忘了导出一个函数，这也会是你在尝试调用它时将会得到的错误信息。</hcfy-result><!--hcfy-anchor--></p>

<div class="note">
	<p><strong>Note:</strong> If you were ever wondering, '.beam' stands for <em>Bogdan/Björn's Erlang Abstract Machine</em>, which is the VM itself. Other virtual machines for Erlang exist, but they're not really used anymore and are history: JAM (Joe's Abstract Machine, inspired by Prolog's <a class="external" href="http://en.wikipedia.org/wiki/Warren_Abstract_Machine" title="Warren Abstract Machin">WAM</a> and old BEAM, which attempted to compile Erlang to C, then to native code. Benchmarks demonstrated little benefits in this practice and the concept was given up.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">注意：如果你想知道的话我会告诉你， '.beam' 代表 Bogdan/Björn 的 Erlang 抽象机，它就是虚拟机本身。其他 Erlang 的虚拟机也存在，但它们已经不怎么用了，成为历史。 JAM (Joe's Abstract Machine) ，灵感来自 Prolog 的 WAM 和旧的 BEAM ，它试图将 Erlang 编译成 C ，然后再编译成本地代码。基准测试表明这种做法没有什么好处，所以这个概念被放弃了。</hcfy-result><!--hcfy-anchor--></p>
</div>

<p>There are a whole lot of compilation flags existing to get more control over how a module is compiled. You can get a list of all of them in the <a class="docs" href="http://erlang.org/doc/man/compile.html">Erlang documentation</a>. The most common flags are:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这里有一大堆编译标志，可以对模块的编译方式进行更多的控制。你可以在 Erlang 文档中获得所有这些标志的列表。最常见的标志有：</hcfy-result><!--hcfy-anchor--></p>

<dl>
	<dt>-debug_info</dt>
	<dd>Erlang tools such as debuggers, code coverage and static analysis tools will use the debug information of a module in order to do their work.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">如调试器、代码覆盖率和静态分析工具等 Erlang 工具，将使用模块的调试信息来完成它们的工作。</hcfy-result><!--hcfy-anchor--></dd>
	<dt>-{outdir,Dir}</dt>
	<dd>By default, the Erlang compiler will create the 'beam' files in the current directory. This will let you choose where to put the compiled file.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">默认情况下， Erlang 编译器会在当前目录下创建 'beam' 文件。这个 flag 能让你选择将编译后的文件放在哪里。</hcfy-result><!--hcfy-anchor--></dd>
	<dt>-export_all</dt>
	<dd>Will ignore the <code>-export</code> module attribute and will instead export all functions defined. This is mainly useful when testing and developing new code, but should not be used in production.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这样将忽略模块里的&nbsp;<code>-export</code>&nbsp;属性，并放出所有定义的函数。它主要在测试和开发新代码时有用，而不该在生产中使用。</hcfy-result><!--hcfy-anchor--></dd>
	<dt>-{d,Macro} or {d,Macro,Value}</dt>
	<dd>Defines a macro to be used in the module, where <var>Macro</var> is an atom. This is more frequently used when dealing when unit-testing, ensuring that a module will only have its testing functions created and exported when they are explicitly wanted. By default, <var>Value</var> is 'true' if it's not defined as the third element of the tuple.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">定义一个在模块中使用的宏，其中&nbsp;<var style="background-color: rgb(255, 255, 255);">Macro</var>&nbsp;是一个原子。这在处理单元测试时更经常使用，确保一个模块只有在明确需要时才会创建和导出测试函数。默认情况下，如果没有定义为元组的第三个元素，&nbsp;<var style="background-color: rgb(255, 255, 255);">Value</var>&nbsp;就是 "true"。</hcfy-result><!--hcfy-anchor--></dd>
</dl>

<p>To compile our <code>useless</code> module with some flags, we could do one of the following:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">为了带上标志地编译我们的&nbsp;<code>useless</code>&nbsp;模块，我们可以做以下的事情：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_523464" class="syntaxhighlighter nogutter "><div class="bar                     show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">7&gt;</code> <code class="functions">compile:file</code><code class="plain">(</code><code class="atoms">useless</code><code class="plain">, [</code><code class="atoms">debug_info</code><code class="plain">, </code><code class="atoms">export_all</code><code class="plain">])</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">{ok,useless}</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">8&gt;</code> <code class="plain">c(</code><code class="atoms">useless</code><code class="plain">, [</code><code class="atoms">debug_info</code><code class="plain">, </code><code class="atoms">export_all</code><code class="plain">])</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">{ok,useless}</code></span></span></div></div></div>

<p>You can also be sneaky and define compile flags from within a module, with a module attribute. To get the same results as from expressions 7 and 8, the following line could be added to the module:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">你也可以偷偷摸摸地在一个模块中用模块属性来定义编译标志。为了得到与表达式 7 和 8 相同的结果，可以在模块中加入以下一行：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_393387" class="syntaxhighlighter nogutter "><div class="bar      show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">-compile</code><code class="plain">([</code><code class="atoms">debug_info</code><code class="plain">, </code><code class="atoms">export_all</code><code class="plain">])</code><code class="symbols">.</code></span></span></div></div></div>

<p>Then just compile and you'll get the same results as if you manually passed flags. Now that we're able to write down functions, compile them and execute them, it's time to see how far we can take them!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">然后只需编译，你就会得到与手动传递标记相同的结果。现在我们已经能够写下函数，编译它们并执行它们了，现在是时候看看我们能把它们运用到什么程度了！</hcfy-result><!--hcfy-anchor--></p>

<div class="note">
	<p><strong>Note:</strong> another option is to compile your Erlang module to native code. Native code compiling is <strong>not</strong> available for every platform and OS, but on those that support it, it can make your programs go faster (about 20% faster, based on anecdotal evidence). To compile to native code, you need to use the <code>hipe</code> module and call it the following way: <code>hipe:c(Module,OptionsList).</code> You could also use <code>c(Module,[native]).</code> when in the shell to achieve similar results. Note that the .beam file generated will contain both native and non-native code, and the native part will not be portable across platforms.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">注意：另一个选择是将你的 Erlang 模块编译成原生（本地）代码（即脱离 vm 运行）。不是每个平台和操作系统都可以进行原生代码编译，但在那些支持它的平台和操作系统上，它可以使你的程序更快（根据传闻，大约快 20% ）。要编译成原生代码，你需要使用&nbsp;<code>hipe</code>&nbsp;模块，并按以下方式调用它：&nbsp;<code>hipe:c(Module,OptionsList).</code>&nbsp;。你也可以在 shell 中使用&nbsp;<code>c(Module,[native]).</code>&nbsp;来达到类似的效果。注意，生成的 .beam 文件将包含本地和非本地代码，本地部分将不能跨平台移植。（译注：所谓 Native ，有时被翻译成本地有时被翻译成原生，它是一种强调，一般来说，一个程序是 X Native 的，意思就是说它在 X 的（或者具有 X 特性的）地方（或者说环境）上，会得到最佳状态的发挥，而在非 X 的地方，可能会表现极差，甚至难以部署运行。 X 这个位置一般是代入一些架构，可以是处理器指令集这样层面的“架构”、也可以是操作系统层面的“架构”、甚至可以是是否属于云的这层含义上的“架构”，当然应该不仅限于这些层面。所谓架构就是平台嘛，无所谓它是在哪个抽象层级来讲的。）</hcfy-result><!--hcfy-anchor--></p>
</div>


<h3><a class="section" name="more-about-modules">More About Modules<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">更多关于模块的</hcfy-result><!--hcfy-anchor--></a></h3>

<p>Before moving on to learning more about writing functions and barely useful snippets of code, there are a few other miscellaneous bits of information that might be useful to you in the future that I'd like to discuss.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">在继续学习更多的函数编写与整一些勉强有用的代码片段之前，还有一些其他的杂七杂八的信息，可能对你在未来有用，我想讨论一下。</hcfy-result><!--hcfy-anchor--></p>

<p>The first one concerns metadata about modules. I mentioned in the beginning of this chapter that module attributes are metadata describing the module itself. Where can we find this metadata when we don't have an access to the source? Well the compiler plays nice with us: when compiling a module, it will pick up most module attributes and store them (along with other information) in a <code>module_info/0</code> function. You can see the metadata of the <code>useless</code> module the following way:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">第一个是关于模块的元数据。我在本章的开头提到，模块属性是描述模块本身的元数据。当我们不能访问源代码的时候，我们在哪里可以找到这些元数据呢？编译器对我们很友好：在编译一个模块时，它会获取大部分模块属性并将它们（连同其他信息）存储在&nbsp;<code>module_info/0</code>&nbsp;函数中。你可以通过以下方式看到&nbsp;<code>useless</code>&nbsp;模块的元数据：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_860884" class="syntaxhighlighter nogutter "><div class="bar                                               "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">9&gt;</code> <code class="functions">useless:module_info</code><code class="plain">()</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[{exports,[{add,2},</code></span></span></div><div class="line alt1"><code class="number">03.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 88px !important;"><code class="shell_output">{hello,0},</code></span></span></div><div class="line alt2"><code class="number">04.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 88px !important;"><code class="shell_output">{greet_and_add_two,1},</code></span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 88px !important;"><code class="shell_output">{module_info,0},</code></span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 88px !important;"><code class="shell_output">{module_info,1}]},</code></span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 8px !important;"><code class="shell_output">{imports,[]},</code></span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 8px !important;"><code class="shell_output">{attributes,[{vsn,[174839656007867314473085021121413256129]}]},</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 8px !important;"><code class="shell_output">{compile,[{options,[]},</code></span></span></div><div class="line alt2"><code class="number">10.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 88px !important;"><code class="shell_output">{version,"4.6.2"},</code></span></span></div><div class="line alt1"><code class="number">11.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 88px !important;"><code class="shell_output">{time,{2009,9,9,22,15,50}},</code></span></span></div><div class="line alt2"><code class="number">12.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 88px !important;"><code class="shell_output">{source,"/home/ferd/learn-you-some-erlang/useless.erl"}]}]</code></span></span></div><div class="line alt1"><code class="number">13.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">10&gt;</code> <code class="functions">useless:module_info</code><code class="plain">(</code><code class="atoms">attributes</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">14.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">[{vsn,[174839656007867314473085021121413256129]}]</code></span></span></div></div></div>


<p>The snippet above also shows an additional function, <code>module_info/1</code> which will let you grab one specific piece of information. You can see exported functions, imported functions (none in this case!), attributes (this is where your custom metadata would go), and compile options and information. Had you decided to add <code>-author("An Erlang Champ").</code> to your module, it would have ended up in the same section as <code>vsn</code>. There are limited uses to module attributes when it comes to production stuff, but they can be nice when doing little tricks to help yourself out: I'm using them in my <a class="source" href="https://learnyousomeerlang.com/static/erlang/tester.erl" title="Automatic testing module. See warnings/0.">testing script</a> for this book to annotate functions for which unit tests could be better; the script looks up module attributes, finds the annotated functions and shows a warning about them.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">上面的片段还显示了一个额外的函数，&nbsp;<code>module_info/1</code>&nbsp;，它能让你抓取其中一个特定的信息。你可以看到导出的函数、导入的函数（本例中没有！）、属性（这是你自定义元数据的地方）、以及编译选项和信息。如果你决定在你的模块中加入&nbsp;<code>-author("An Erlang Champ").</code>&nbsp;，它就会和&nbsp;<code>vsn</code>&nbsp;一样出现在同一个部分。当涉及到生产时，模块属性的用途有限，但当做一些小技巧来帮助自己时，它们会非常有用。我在本书的测试脚本（&nbsp;<a class="source" href="https://learnyousomeerlang.com/static/erlang/tester.erl" title="Automatic testing module. See warnings/0." style="font-size: 12.8px; background-color: rgb(255, 255, 255);">testing script</a>&nbsp;）中使用它们来注释那些单元测试可以做得更好的函数；该脚本查找模块属性，找到被注释的函数并显示一个警告。</hcfy-result><!--hcfy-anchor--></p>

<div class="note">
    <p><strong>Note:</strong> <code>vsn</code> is an automatically generated unique value differentiating each version of your code, excluding comments. It is used in code hot-loading (upgrading an application while it runs, without stopping it) and by some tools related to release handling. You can also specify a <code>vsn</code> value yourself if you want: just add <code>-vsn(VersionNumber)</code> to your module.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">注意：&nbsp;<code>vsn</code>&nbsp;是一个自动生成的唯一值，用于区分你的代码的每个版本，不包括注释。它被用于代码热加载（让应用程序能在运行时升级而不必需停止）和一些与发布处理有关的工具。如果你愿意，你也可以自己指定一个&nbsp;<code>vsn</code>&nbsp;值：只要在你的模块中加入&nbsp;<code>-vsn(VersionNumber)</code>&nbsp;。</hcfy-result><!--hcfy-anchor--></p>
</div>

<img class="right explanation" src="https://learnyousomeerlang.com/static/img/circular-dependencies.png" width="237" height="255" alt="A small graph with three nodes: Mom, Dad and You. Mom and Dad are parents of You, and You is brother of Dad. Text under: 'If circular dependencies are digusting in real life, maybe they should be disgusting in your programs too'" title="Seems clear enough.">

<p>Another point that would be nice to approach regards general module design: avoid circular dependencies! A module <var>A</var> should not call a module <var>B</var> that also calls module <var>A</var>. Such dependencies usually end up making code maintenance difficult. In fact, depending on too many modules even if they're not in a circular dependency can make maintenance harder. The last thing you want is to wake up in the middle of the night only to find a maniac software engineer or computer scientist trying to gouge your eyes out because of terrible code you have written.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">另一点是关于一般的模块设计：避免循环依赖！一个模块&nbsp;<var style="background-color: rgb(255, 255, 255);">A</var>&nbsp;不应该调用一个调用了模块&nbsp;<var style="background-color: rgb(255, 255, 255);">A</var>&nbsp;的模块&nbsp;<var style="background-color: rgb(255, 255, 255);">B</var>&nbsp;。这样的依赖关系通常最终会使代码维护变得困难。事实上，依赖太多的模块，即使它们不是循环依赖，也会使维护工作更加困难。你最不希望的就是在半夜醒来时，发现一个疯狂的软件工程师或计算机科学家因为你写的糟糕的代码而想把你的眼睛挖出来。</hcfy-result><!--hcfy-anchor--></p>

<p>For similar reasons (maintenance and fear for your eyes), it is usually considered a good practice to regroup functions that have similar roles close together. Starting and stopping an application or creating and deleting a record in some database are examples of such a scenario.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">出于类似的原因（维护以及对眼睛的担心），通常认为将有类似作用的函数重新组合在一起是一个好的做法。启动和停止一个应用程序或在一些数据库中创建和删除一条记录，就是这样的例子。</hcfy-result><!--hcfy-anchor--></p>

<p>Well, that's enough for the pedantic moralizations. How about we explore Erlang a little more?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">好了，这些迂腐的道德说教就到此为止。我们再去探索一下 Erlang 怎么样？</hcfy-result><!--hcfy-anchor--></p>
				<ul class="navigation">
											<li><a href="https://learnyousomeerlang.com/starting-out-for-real" title="Previous chapter">&lt; Previous<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">&lt; 上一页</hcfy-result><!--hcfy-anchor--></a></li>
										
					<li><a href="https://learnyousomeerlang.com/contents" title="Index">Index<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">索引</hcfy-result><!--hcfy-anchor--></a></li>
					
											<li><a href="https://learnyousomeerlang.com/syntax-in-functions" title="Next chapter">Next &gt;<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">下一页 &gt;</hcfy-result><!--hcfy-anchor--></a></li>
									</ul>
			</div><div id="content">
            <div class="noscript"><noscript>Hey there, it appears your Javascript is disabled. That's fine, the site works without it. However, you might prefer reading it with syntax highlighting, which requires Javascript!</noscript></div>
<h2>Syntax in functions<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">函数中的语法</hcfy-result><!--hcfy-anchor--></h2>

<h3><a class="section" name="pattern-matching">Pattern Matching<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">模式匹配</hcfy-result><!--hcfy-anchor--></a></h3>

<img class="right" src="https://learnyousomeerlang.com/static/img/snail.png" width="222" height="84" alt="A snail greeting you." title="The following code doesn't care about snails :(">

<p>Now that we have the ability to store and compile our code, we can begin to write more advanced functions. Those that we have written so far were extremely simple and a bit underwhelming. We'll get to more interesting stuff. The first function we'll write will need to greet someone differently according to gender. In most languages you would need to write something similar to this:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">现在我们有了存储和编译代码的能力，我们可以开始编写更高级的函数。到目前为止，我们所写的那些都是极其简单的，而且有点不尽人意。我们将进入到更有趣的东西。我们要写的第一个函数将需要根据性别对某人进行不同的问候。在大多数语言中，你需要写类似这样的东西：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_746601" class="syntaxhighlighter nogutter "><div class="bar                                "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="atoms">function</code> <code class="functions">greet</code><code class="plain">(Gender,Name)</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="keyword">if</code> <code class="plain">Gender </code><code class="symbols">==</code> <code class="atoms">male</code> <code class="keyword">then</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 64px !important;"><code class="functions">print</code><code class="plain">(</code><code class="string">"Hello, Mr. %s!"</code><code class="plain">, Name)</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="keyword">else</code> <code class="keyword">if</code> <code class="plain">Gender </code><code class="symbols">==</code> <code class="atoms">female</code> <code class="keyword">then</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 64px !important;"><code class="functions">print</code><code class="plain">(</code><code class="string">"Hello, Mrs. %s!"</code><code class="plain">, Name)</code></span></span></div><div class="line alt2"><code class="number">6.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="keyword">else</code></span></span></div><div class="line alt1"><code class="number">7.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 64px !important;"><code class="functions">print</code><code class="plain">(</code><code class="string">"Hello, %s!"</code><code class="plain">, Name)</code></span></span></div><div class="line alt2"><code class="number">8.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="keyword">end</code></span></span></div></div></div>

<p>With pattern-matching, Erlang saves you a whole lot of boilerplate code. A similar function in Erlang would look like this:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">通过模式匹配， Erlang 为你节省了大量的模板代码。一个类似的函数在 Erlang 中看起来是这样的：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_248338" class="syntaxhighlighter nogutter "><div class="bar              show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">greet(</code><code class="atoms">male</code><code class="plain">, Name) </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="functions">io:format</code><code class="plain">(</code><code class="string">"Hello, Mr. ~s!"</code><code class="plain">, [Name])</code><code class="symbols">;</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">greet(</code><code class="atoms">female</code><code class="plain">, Name) </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="functions">io:format</code><code class="plain">(</code><code class="string">"Hello, Mrs. ~s!"</code><code class="plain">, [Name])</code><code class="symbols">;</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">greet(</code><code class="symbols">_</code><code class="plain">, Name) </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">6.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="functions">io:format</code><code class="plain">(</code><code class="string">"Hello, ~s!"</code><code class="plain">, [Name])</code><code class="symbols">.</code></span></span></div></div></div>

<p>I'll admit that the printing function is a lot uglier in Erlang than in many other languages, but that is not the point. The main difference here is that we used pattern matching to define both what parts of a function should be used and bind the values we need at the same time. There was no need to first bind the values and then compare them! So instead of:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">我承认， Erlang 中的打印函数比许多其他语言中的要丑很多，但这不是重点。这里的主要区别是，我们用模式匹配来定义一个函数的哪些部分应该被使用，并同时绑定我们需要的值。没有必要先绑定数值，然后再进行比较。因此，代替掉这个写法：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_724702" class="syntaxhighlighter nogutter "><div class="bar                                                          "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="functions">function</code><code class="plain">(Args)</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 24px !important;"><code class="keyword">if</code> <code class="plain">X </code><code class="keyword">then</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 48px !important;"><code class="plain">Expression</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 24px !important;"><code class="keyword">else</code> <code class="keyword">if</code> <code class="plain">Y </code><code class="keyword">then</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 48px !important;"><code class="plain">Expression</code></span></span></div><div class="line alt2"><code class="number">6.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 24px !important;"><code class="keyword">else</code></span></span></div><div class="line alt1"><code class="number">7.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 48px !important;"><code class="plain">Expression</code></span></span></div></div></div>

<p>We write:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">我们写成这样：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_849978" class="syntaxhighlighter nogutter "><div class="bar                        "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="functions">function</code><code class="plain">(X) </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 16px !important;"><code class="plain">Expression</code><code class="symbols">;</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="functions">function</code><code class="plain">(Y) </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 16px !important;"><code class="plain">Expression</code><code class="symbols">;</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="functions">function</code><code class="plain">(</code><code class="symbols">_</code><code class="plain">) </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">6.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 16px !important;"><code class="plain">Expression</code><code class="symbols">.</code></span></span></div></div></div>

<p>in order to get similar results, but in a much more declarative style. Each of these <code>function</code> declarations is called a <em>function clause</em>. Function clauses must be separated by semicolons (<code>;</code>) and together form a <em>function declaration</em>. A function declaration counts as one larger statement, and it's why the final function clause ends with a period.  It's a "funny" use of tokens to determine workflow, but you'll get used to it. At least you'd better hope so because there's no way out of it!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">来达到同样的目的，只不过是通过声明函数的形式做到。这些函数（&nbsp;<code>function</code>&nbsp;）声明中，每一个分支都被称为一个函数子句。函数子句要用分号 (<code>;</code>) 隔开，然后所有子句共同构成了一个函数的声明。一个函数声明算作一个较大的语句，这就是为什么最后的函数子句以句号结束。这是一个 "有趣" 的使用标记来确定工作流程的方法，但你会习惯的。至少你最好希望如此，因为你没有办法摆脱它！-----（译注：多说一句，我认为这是极端妙的一种设计。它刚好完美对应于人类自然语言中的习惯，逗号（之后你会了解到）分号句号，三者的关系就像自然语言中一样的。我曾经在语文课上摸不着头脑：为什么非要让我们死死遵守只有三个层次级别（逗号分号句号）的规定呢？为什么没有第四个？按说应当支持无限个才对啊？终于，在 Erlang （确切说其实是该归功于 Prolog 了）这里，我确确实实地找到了答案：确实是只需要三层，也确实是必须能够三层，因为这显然是足够的了。函数有子句，每一个子句由表达式构成，表达式又用逗号分隔，就是三个层次，刚刚好，不用更多，也没必要更多，足够用了。所以，这个语法设计是真的厉害，至少对我来说，我认为原本语文课有义务予以确确实实诠释清楚，却没有诠释清楚（他们只是跟我说规定如此记住就好习惯就好这种毫不负责的鬼话）的问题，在 Erlang 这里，我得到了完全清晰的诠释！！这对我来说的意义甚至大过“优雅地进行集群并发编程”乃至于“正确地编程”这件事本身！！。）</hcfy-result><!--hcfy-anchor--></p>

<div class="note">
	<p><strong>Note:</strong> <code>io:format</code>'s formatting is done with the help of tokens being replaced in a string. The character used to denote a token is the tilde (<code>~</code>). Some tokens are built-in such as <code>~n</code>, which will be changed to a line-break. Most other tokens denote a way to format data. The function call <code>io:format("~s!~n",["Hello"]).</code> includes the token <code>~s</code>, which accepts strings and bitstrings as arguments, and <code>~n</code>. The final output message would thus be <code>"Hello!\n"</code>. Another widely used token is <code>~p</code>, which will print an Erlang term in a nice way (adding in indentation and everything).<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">注意：&nbsp;<code>io:format</code>&nbsp;的格式化是借助于在字符串中被替换的标记完成的。用来表示标记的字符是波浪号 (<code>~</code>) 。有些标记是内置的，如&nbsp;<code>~n</code>&nbsp;，它将被改为换行符。大多数其他标记表示一种格式化数据的方法。函数调用&nbsp;<code>io:format("~s!~n",["Hello"]).</code>&nbsp;包括标记&nbsp;<code>~s</code>&nbsp;，它接受字符串和比特串作为参数，以及&nbsp;<code>~n</code>&nbsp;。因此，最终的输出信息将是&nbsp;<code>"Hello!\n"</code>&nbsp;。另一个广泛使用的标记是&nbsp;<code>~p</code>&nbsp;，它将以一种漂亮的方式打印一个 Erlang 术语（增加缩进等效果）。</hcfy-result><!--hcfy-anchor--></p>
	<p>The <code>io:format</code> function will be seen in more details in later chapters dealing with input/output with more depth, but in the meantime you can try the following calls to see what they do:  <code>io:format("~s~n",[&lt;&lt;"Hello"&gt;&gt;])</code>, <code>io:format("~p~n",[&lt;&lt;"Hello"&gt;&gt;])</code>, <code>io:format("~~~n")</code>, <code>io:format("~f~n", [4.0])</code>, <code>io:format("~30f~n", [4.0])</code>. They're a small part of all that's possible and all in all they look a bit like <code>printf</code> in many other languages. If you can't wait until the chapter about I/O, you can read the <a class="docs" href="http://erlang.org/doc/man/io.html#format-3" title="straight from the horse's mouth">online documentation</a> to know more.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">函数&nbsp;<code>io:format</code>&nbsp;将在以后处理输入/输出的章节中详细介绍。但此时，你其实可以自己试一试以下调用并看看效果：&nbsp;<code>io:format("~s~n",[&lt;&lt;"Hello"&gt;&gt;])</code>&nbsp;、&nbsp;<code>io:format("~p~n",[&lt;&lt;"Hello"&gt;&gt;])</code>&nbsp;、&nbsp;<code>io:format("~~~n")</code>&nbsp;、&nbsp;<code>io:format("~f~n", [4.0])</code>&nbsp;、&nbsp;<code>io:format("~30f~n", [4.0])</code>&nbsp;。它们是所有可能的一小部分，总之，它们看起来有点像许多其他语言中的&nbsp;<code>printf</code>&nbsp;。如果你不能等到关于 I/O 的章节，你可以阅读他们的在线文档（&nbsp;<a class="docs" href="http://erlang.org/doc/man/io.html#format-3" title="straight from the horse's mouth" style="font-size: 14.4px; background-color: rgb(239, 243, 248);">online documentation</a>&nbsp;）来了解更多。</hcfy-result><!--hcfy-anchor--></p>
</div>


<p>Pattern matching in functions can get more complex and powerful than that. As you may or may not remember from a few chapters ago, we can pattern match on lists to get the heads and tails. Let's do this! Start a new module called <code><a class="source" href="https://learnyousomeerlang.com/static/erlang/functions.erl" title="complete module!">functions</a></code> in which we'll write a bunch of functions to explore many pattern matching avenues available to us:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">函数中的模式匹配可以变得比这更复杂和强大。你可能记得，也可能不记得，在几章之前，我们可以对列表进行模式匹配来获得头和尾。让我们这样做吧! 启动一个名为&nbsp;<code><a class="source" href="https://learnyousomeerlang.com/static/erlang/functions.erl" title="complete module!" style="font-size: 12px;">functions</a></code>&nbsp;的新模块，在这个模块中，我们将编写一堆函数来探索许多可用的模式匹配途径：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_901753" class="syntaxhighlighter nogutter "><div class="bar                 "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">-module</code><code class="plain">(</code><code class="atoms">functions</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">-compile</code><code class="plain">(</code><code class="atoms">export_all</code><code class="plain">)</code><code class="symbols">.</code> <code class="comments">%% replace with -export() later, for God's sake!</code></span></span></div></div></div>

<p>The first function we'll write is <code>head/1</code>, acting exactly like <code>erlang:hd/1</code> which takes a list as an argument and returns its first element. It'll be done with the help of the cons operator (<code>|</code>):<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">我们要写的第一个函数是&nbsp;<code>head/1</code>&nbsp;，它的作用与&nbsp;<code>erlang:hd/1</code>&nbsp;完全一样，它接收一个列表作为参数并返回其第一个元素。这将在 cons 运算符 (<code>|</code>) 的帮助下完成：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_546112" class="syntaxhighlighter nogutter "><div class="bar            show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">head([H</code><code class="symbols">|</code><code class="symbols">_</code><code class="plain">]) </code><code class="symbols">-&gt;</code> <code class="plain">H</code><code class="symbols">.</code></span></span></div></div></div>

<p>If you type <code>functions:head([1,2,3,4]).</code> in the shell (once the module is compiled), you can expect the value '1' to be given back to you. Consequently, to get the second element of a list you would create the function:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">如果你在 shell 中输入&nbsp;<code>functions:head([1,2,3,4]).</code>&nbsp;（这模块已被编译好了的话），你可以期待值 '1' 被反馈给你。因此，为了得到一个列表的第二个元素，你将创建这样一个函数：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_693665" class="syntaxhighlighter nogutter "><div class="bar         show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">second([</code><code class="symbols">_</code><code class="plain">,X</code><code class="symbols">|</code><code class="symbols">_</code><code class="plain">]) </code><code class="symbols">-&gt;</code> <code class="plain">X</code><code class="symbols">.</code></span></span></div></div></div>

<p>The list will just be deconstructed by Erlang in order to be pattern matched. Try it in the shell!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">列表将被 Erlang 解构，以便进行模式匹配。在 shell 中试试吧!</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_386751" class="syntaxhighlighter nogutter "><div class="bar                           "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">1&gt;</code> <code class="plain">c(</code><code class="atoms">functions</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">{ok, functions}</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">2&gt;</code> <code class="functions">functions:head</code><code class="plain">([</code><code class="numerics">1</code><code class="plain">,</code><code class="numerics">2</code><code class="plain">,</code><code class="numerics">3</code><code class="plain">,</code><code class="numerics">4</code><code class="plain">])</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">1</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">3&gt;</code> <code class="functions">functions:second</code><code class="plain">([</code><code class="numerics">1</code><code class="plain">,</code><code class="numerics">2</code><code class="plain">,</code><code class="numerics">3</code><code class="plain">,</code><code class="numerics">4</code><code class="plain">])</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">6.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">2</code></span></span></div></div></div>

<p>This could be repeated for lists as long as you want, although it would be impractical to do it up to thousands of values. This can be fixed by writing recursive functions, which we'll see how to do later on. For now, let's concentrate on more pattern matching. The concept of free and bound variables we discussed in <a class="chapter local" href="https://learnyousomeerlang.com/starting-out-for-real#invariable-variables" title="Invariable Variables">Starting Out (for real)</a> still holds true for functions: we can then compare and know if two parameters passed to a function are the same or not. For this, we'll create a function <code>same/2</code> that takes two arguments and tells if they're identical:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">你可以为你想要的那个长度重复类似的工作，尽管要做到成千上万的值是不现实的。但没关系，这事儿可以通过写递归来解决，具体的以后会提到。现在，让我们专注于更多的模式匹配。我们在《起步》章节（&nbsp;<a class="chapter local" href="https://learnyousomeerlang.com/starting-out-for-real#invariable-variables" title="Invariable Variables" style="font-size: 12.8px; background-color: rgb(255, 255, 255);">Starting Out (for real)</a>&nbsp;）中讨论的未绑定变量和绑定过的变量的特性，对函数来说仍然适用：这样我们就可以比较并知道传递给函数的两个参数是否相同。为此，我们将创建一个函数&nbsp;<code>same/2</code>&nbsp;，它接收两个参数并告诉它们是否相同：-----（译注：忘了之前知识点没关系，看下面代码领悟即可。该译注可跳过也可略读，下文有作者篇幅更大的讲解。。。。在这里（指下面那一小坨代码），参数列表的 X 会被赋值运算符给搞两次：第一次的时候相当于是没被绑定值的 X 和一个值一起被等号操作符操作，效果就是这个值（由传参传入的值）和 X 这个变量绑定（调用函数时候传参就等同于对该位置的这个变量搞了一下等号操作）；第二次的时候效果就是，一个已经绑定了值的 X 和一个值一起被等号操作了，这个效果就是如果不相等那就要报错了，而模式匹配的效果就正是：原来用等号如果报错那么在模式匹配这里就会变成匹配失败，反之则匹配成功。下划线是一定会匹配成功的，所以下面代码的最后一个（即第二个）分支的意思其实就是“如果上面的都匹配失败了那就轮到我来成功了否则就轮不到我”。）</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_215798" class="syntaxhighlighter nogutter "><div class="bar                                                       "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">same(X,X) </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="atoms">true</code><code class="symbols">;</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">same(</code><code class="symbols">_</code><code class="plain">,</code><code class="symbols">_</code><code class="plain">) </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="atoms">false</code><code class="symbols">.</code></span></span></div></div></div>
<p>And it's that simple. Before explaining how the function works, we'll go over the concept of bound and unbound variables again, just in case:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">所以在变量绑定的特性的加持下，要用 Erlang 表达上面的逻辑，也就能做到如此地简单。在解释这个函数的工作原理之前，我们要再次复习一下绑定和非绑定变量的概念，以备不时之需：</hcfy-result><!--hcfy-anchor--></p>

<img class="explanation" src="https://learnyousomeerlang.com/static/img/musical-chair.png" width="357" height="281" alt="A game of musical chair with 3 chairs: two occupied by a cat and a snake, and one free. The cat and snake are labelled 'values', the chairs on which they sit are labelled 'bound', and the free chair is labelled 'unbound'">

<p>If this game of musical chairs was Erlang, you'd want to sit on the empty chair. Sitting on one already occupied wouldn't end well! Joking aside, unbound variables are variables without any values attached to them (like our empty chair). Binding a variable is simply attaching a value to an unbound variable. In the case of Erlang, when you want to assign a value to a variable that is already bound, an error occurs <em>unless the new value is the same as the old one</em>. Let's imagine our snake on the right: if another snake comes around, it won't really change much to the game. You'll just have more angry snakes. If a different animal comes to sit on the chair (a honey badger, for example), things will go bad. Same values for a bound variable are fine, different ones are a bad idea. You can go back to the subchapter about <a class="chapter" href="https://learnyousomeerlang.com/starting-out-for-real#invariable-variables" title="Starting Out (for real)">Invariable Variables</a> if this concept is not clear to you.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">如果这个音乐椅游戏是 Erlang ，你会想坐在空椅子上。坐在已经有人的椅子上不会有好下场的。撇开玩笑不谈，非绑定变量是没有附加任何值的变量（如我们的空椅子），而绑定变量就是将一个值附加到一个非绑定变量上（椅子上坐了某个值）。在 Erlang 中，当你想给一个已经被绑定的变量赋值时，除非新值与旧值相同，否则会发生错误。让我们想象一下我们右边的蛇：如果再要求一次让这里坐同一条蛇，其实对游戏没有什么影响。你只是有更多愤怒的蛇（这句是玩笑）。如果要一个不同的动物来坐在椅子上（例如一只蜜獾），那就要影响游戏了。绑定变量的数值相同则可以，不同就不好办。如果你不明白为何如此，可以回看不变变量（&nbsp;<a class="chapter" href="https://learnyousomeerlang.com/starting-out-for-real#invariable-variables" title="Starting Out (for real)" style="font-size: 12.8px; background-color: rgb(255, 255, 255);">Invariable Variables</a>&nbsp;）的分章。</hcfy-result><!--hcfy-anchor--></p>

<p>Back to our code: what happens when you call <code>same(a,a)</code> is that the first <var>X</var> is seen as unbound: it automatically takes the value <code>a</code>. Then when Erlang goes over to the second argument, it sees <var>X</var> is already bound. It then compares it to the <code>a</code> passed as the second argument and looks to see if it matches. The pattern matching succeeds and the function returns <code>true</code>. If the two values aren't the same, this will fail and go to the second function clause, which doesn't care about its arguments (when you're the last to choose, you can't be picky!) and will instead return false. Note that this function can effectively take any kind of argument whatsoever! It works for any type of data, not just lists or single variables. As a rather advanced example, the following function prints a date, but only if it is formatted correctly:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">回到我们的代码：当你调用&nbsp;<code>same(a,a)</code>&nbsp;时发生的事情是，第一个&nbsp;<var style="background-color: rgb(255, 255, 255);">X</var>&nbsp;被看作是未绑定的：它自动取值&nbsp;<code>a</code>&nbsp;。然后当 Erlang 转到第二个参数时，它看到&nbsp;<var style="background-color: rgb(255, 255, 255);">X</var>&nbsp;已经被绑定，那它就得把已绑定的值的新来的那个比较比较了。如果一样，在该分支的模式匹配就成功了，函数就返回&nbsp;<code>true</code>&nbsp;；如果不一样，那么在这个分支的匹配就会失败，你就会顺着进到下一个分支匹配，而这里的下一个分支是不论传啥都能匹配的，因此你就在这个分支模式匹配成功，进入这个分支，没什么执行的逻辑，只是返回 false 。注意，这个函数可以有效地接受任何类型的参数！它适用于任何类型的数据，而不仅仅是列表或单个变量。作为一个相当高级的例子，下面的函数可以打印出一个日期，只要格式正确：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_45466" class="syntaxhighlighter nogutter "><div class="bar                                                  "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">valid</code><code class="symbols">_</code><code class="plain">time({Date </code><code class="symbols">=</code> <code class="plain">{Y,M,D}, Time </code><code class="symbols">=</code> <code class="plain">{H,Min,S}}) </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="functions">io:format</code><code class="plain">(</code><code class="string">"The Date tuple (~p) says today is: ~p/~p/~p,~n"</code><code class="plain">,[Date,Y,M,D]),</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="functions">io:format</code><code class="plain">(</code><code class="string">"The time tuple (~p) indicates: ~p:~p:~p.~n"</code><code class="plain">, [Time,H,Min,S])</code><code class="symbols">;</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">valid</code><code class="symbols">_</code><code class="plain">time(</code><code class="symbols">_</code><code class="plain">) </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="functions">io:format</code><code class="plain">(</code><code class="string">"Stop feeding me wrong data!~n"</code><code class="plain">)</code><code class="symbols">.</code></span></span></div></div></div>

<p>Note that it is possible to use the <code>=</code> operator in the function head, allowing us to match both the content inside a tuple (<code>{Y,M,D}</code>) and the tuple as a whole (<var>Date</var>). The function can be tested the following way:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">注意，可以在函数头部使用&nbsp;<code>=</code>&nbsp;运算符，让我们既能匹配元组内部的内容 (<code>{Y,M,D}</code>) ，又能匹配整个元组 (<var style="background-color: rgb(255, 255, 255);">Date</var>) 。该函数可以通过以下方式进行测试：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_541456" class="syntaxhighlighter nogutter "><div class="bar                           show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">4&gt;</code> <code class="plain">c(</code><code class="atoms">functions</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">{ok, functions}</code></span></span><!--hcfy-anchor--></div><div class="line alt1"><code class="number">03.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">5&gt;</code> <code class="functions">functions:valid_time</code><code class="plain">({{</code><code class="numerics">2011</code><code class="plain">,</code><code class="numerics">09</code><code class="plain">,</code><code class="numerics">06</code><code class="plain">},{</code><code class="numerics">09</code><code class="plain">,</code><code class="numerics">04</code><code class="plain">,</code><code class="numerics">43</code><code class="plain">}})</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">04.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">The Date tuple ({2011,9,6}) says today is: 2011/9/6,</code></span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">The time tuple ({9,4,43}) indicates: 9:4:43.</code></span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">ok</code></span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">6&gt;</code> <code class="functions">functions:valid_time</code><code class="plain">({{</code><code class="numerics">2011</code><code class="plain">,</code><code class="numerics">09</code><code class="plain">,</code><code class="numerics">06</code><code class="plain">},{</code><code class="numerics">09</code><code class="plain">,</code><code class="numerics">04</code><code class="plain">}})</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">Stop feeding me wrong data!</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">ok</code></span></span></div></div></div>

<p>There is a problem though! This function could take anything for values, even text or atoms, as long as the tuples are of the form <code>{{A,B,C}, {D,E,F}}</code>. This denotes one of the limits of pattern matching: it can either specify really precise values such as a known number of atom, or abstract values such as the head|tail of a list, a tuple of <var>N</var> elements, or anything (<code>_</code> and unbound variables), etc. To solve this problem, we use guards.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">不过有一个问题！这个函数可以取任何值，甚至是文本或原子，只要图元的形式是&nbsp;<code>{{A,B,C}, {D,E,F}}</code>&nbsp;。这说明了模式匹配的一个局限性：它只是能够指定真正精确的值，如已知的原子数，或者指定抽象的值，如列表的 头|尾 ，&nbsp;<var style="background-color: rgb(255, 255, 255);">N</var>&nbsp;个元素的元组，或者任何东西（&nbsp;<code>_</code>&nbsp;和非绑定变量）等等。为了解决这个问题，我们使用守卫。（译注：根据下文，我猜这里是想说，模式匹配只能指定明确的等于什么值，而且不能更细致地区分类型。）</hcfy-result><!--hcfy-anchor--></p>


<h3><a class="section" name="guards-guards">Guards, Guards!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">守卫，守卫！</hcfy-result><!--hcfy-anchor--></a></h3>

<img class="right" src="https://learnyousomeerlang.com/static/img/driving-age.png" width="199" height="160" alt="A baby driving a car" title="Baby on board // How I've adored // That sign on my car's windowpane... (© The Simpsons)">

<p>Guards are additional clauses that can go in a function's head to make pattern matching more expressive. As mentioned above, pattern matching is somewhat limited as it cannot express things like a range of value or certain types of data. A concept we couldn't represent is counting: is this 12 years old basketball player too short to play with the pros? Is this distance too long to walk on your hands? Are you too old or too young to drive a car? You couldn't answer these with simple pattern matching. I mean, you could represent the driving question such as:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">守护是额外的子句，可以放在函数的头部，使模式匹配更具表现力。如上所述，模式匹配有一定的局限性，因为它不能表达像数值范围或某些类型的数据的东西。我们无法表示的一个概念是计数：这个12岁的篮球运动员是不是太矮了，不能和职业球员一起打球？这个距离是不是太长了，不能用手走路？你是太老还是太年轻而不能开车？你不能用简单的模式匹配来回答这些。我的意思是，你可以用这样的方式表示驾驶问题：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_8699" class="syntaxhighlighter nogutter "><div class="bar                                show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">old</code><code class="symbols">_</code><code class="plain">enough(</code><code class="numerics">0</code><code class="plain">) </code><code class="symbols">-&gt;</code> <code class="atoms">false</code><code class="symbols">;</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">old</code><code class="symbols">_</code><code class="plain">enough(</code><code class="numerics">1</code><code class="plain">) </code><code class="symbols">-&gt;</code> <code class="atoms">false</code><code class="symbols">;</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">old</code><code class="symbols">_</code><code class="plain">enough(</code><code class="numerics">2</code><code class="plain">) </code><code class="symbols">-&gt;</code> <code class="atoms">false</code><code class="symbols">;</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="symbols">.</code><code class="symbols">.</code><code class="symbols">.</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">old</code><code class="symbols">_</code><code class="plain">enough(</code><code class="numerics">14</code><code class="plain">) </code><code class="symbols">-&gt;</code> <code class="atoms">false</code><code class="symbols">;</code></span></span></div><div class="line alt2"><code class="number">6.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">old</code><code class="symbols">_</code><code class="plain">enough(</code><code class="numerics">15</code><code class="plain">) </code><code class="symbols">-&gt;</code> <code class="atoms">false</code><code class="symbols">;</code></span></span></div><div class="line alt1"><code class="number">7.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">old</code><code class="symbols">_</code><code class="plain">enough(</code><code class="symbols">_</code><code class="plain">) </code><code class="symbols">-&gt;</code> <code class="atoms">true</code><code class="symbols">.</code></span></span></div></div></div>

<p>But it would be incredibly impractical. You can do it if you want, but you'll be alone to work on your code forever. If you want to eventually make friends, start a new <code><a class="source" href="https://learnyousomeerlang.com/static/erlang/guards.erl" title="guards module">guards</a></code> module so we can type in the "correct" solution to the driving question:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">但这将是非常不切实际的。如果你愿意，你可以这样做，但你将永远孤独地在你的代码上工作。如果你想最终交到朋友，那就启动一个新的&nbsp;<code><a class="source" href="https://learnyousomeerlang.com/static/erlang/guards.erl" title="guards module" style="font-size: 12px;">guards</a></code>&nbsp;模块，这样我们就可以输入驱动问题的 "正确" 解决方案：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_255096" class="syntaxhighlighter nogutter "><div class="bar        show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">old</code><code class="symbols">_</code><code class="plain">enough(X) </code><code class="keyword">when</code> <code class="plain">X </code><code class="symbols">&gt;=</code> <code class="numerics">16</code> <code class="symbols">-&gt;</code> <code class="atoms">true</code><code class="symbols">;</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">old</code><code class="symbols">_</code><code class="plain">enough(</code><code class="symbols">_</code><code class="plain">) </code><code class="symbols">-&gt;</code> <code class="atoms">false</code><code class="symbols">.</code></span></span></div></div></div>

<p>And you're done! As you can see, this is much shorter and cleaner. Note that a basic rule for guard expression is they must return <code>true</code> to succeed. The guard will fail if it returns <code>false</code> or if it throws an exception. Suppose we now forbid people who are over 104 years old to drive. Our valid ages for drivers is now from 16 years old up to 104 years old. We need to take care of that, but how? Let's just add a second guard clause:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">然后你就完成了！正如你所看到的，这要短得多，也干净得多。请注意，守护表达式的一个基本规则是它们必须返回&nbsp;<code>true</code>&nbsp;才能成功。如果表达式返回&nbsp;<code>false</code>&nbsp;或者抛出一个异常，则表达式将失败。假设我们现在禁止超过 104 岁的人开车。我们的司机的有效年龄现在是从 16 岁到 104 岁。我们需要处理这个问题，但如何处理呢？让我们添加第二个守护条款：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_413967" class="syntaxhighlighter nogutter "><div class="bar                                                 "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">right</code><code class="symbols">_</code><code class="plain">age(X) </code><code class="keyword">when</code> <code class="plain">X </code><code class="symbols">&gt;=</code> <code class="numerics">16</code><code class="plain">, X </code><code class="symbols">=&lt;</code> <code class="numerics">104</code> <code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="atoms">true</code><code class="symbols">;</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">right</code><code class="symbols">_</code><code class="plain">age(</code><code class="symbols">_</code><code class="plain">) </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="atoms">false</code><code class="symbols">.</code></span></span></div></div></div>

<p>The comma (<code>,</code>) acts in a similar manner to the operator <code>andalso</code> and the semicolon (<code>;</code>) acts a bit like <code>orelse</code> (described in "<a class="chapter local" href="https://learnyousomeerlang.com/starting-out-for-real#bool-and-compare">Starting Out (for real)</a>"). Both guard expressions need to succeed for the whole guard to pass. We could also represent the function the opposite way:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">逗号 (<code>,</code>) 的作用类似于运算符&nbsp;<code>andalso</code>&nbsp;，分号 (<code>;</code>) 的作用有点像&nbsp;<code>orelse</code>&nbsp;（那俩在 "<a class="chapter local" href="https://learnyousomeerlang.com/starting-out-for-real#bool-and-compare" style="font-size: 12.8px; background-color: rgb(255, 255, 255);">Starting Out (for real)</a>" 中讲过）。在这里，两个守护表达式都需要成功，整个守护才能通过。我们也可以用相反的方式来表示这个函数：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_991920" class="syntaxhighlighter nogutter "><div class="bar                           show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">wrong</code><code class="symbols">_</code><code class="plain">age(X) </code><code class="keyword">when</code> <code class="plain">X </code><code class="symbols">&lt;</code> <code class="numerics">16</code><code class="symbols">;</code> <code class="plain">X </code><code class="symbols">&gt;</code> <code class="numerics">104</code> <code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="atoms">true</code><code class="symbols">;</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">wrong</code><code class="symbols">_</code><code class="plain">age(</code><code class="symbols">_</code><code class="plain">) </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="atoms">false</code><code class="symbols">.</code></span></span></div></div></div>

<img class="left" src="https://learnyousomeerlang.com/static/img/guard.png" width="135" height="230" alt="Guard">

<p>And we get correct results from that too. Test it if you want (you should always test stuff!). In guard expressions, the semi-colon (<code>;</code>) acts like the <code>orelse</code> operator: if the first guard fails, it then tries the second, and then the next one, until either one guard succeeds or they all fail.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这样我们也能得到正确的结果。如果你想的话，可以测试一下（你应该总是测试东西！）。在守护表达式中，分号 (<code>;</code>) 的作用类似于运算符&nbsp;<code>orelse</code>&nbsp;（译注：这个上一段说过了）：如果第一个守护失败，它就会尝试第二个，然后是下一个，直到有一个守护成功或者它们都失败。（译注：其实你也可以理解为 <code>f(X) when cond_a -&gt; foo ; f(X) when cond_b -&gt; foo ; ... .</code> 被允许简写为&nbsp;<code>f(X) when cond_a ; cond_b -&gt; foo ; ... .</code> 。 ）</hcfy-result><!--hcfy-anchor--></p>

<p>You can use a few more functions than comparisons and boolean evaluation in functions, including math operations (<code>A*B/C &gt;= 0</code>) and functions about data types, such as <code>is_integer/1</code>, <code>is_atom/1</code>, etc. (We'll get back on them in the following chapter). One negative point about guards is that they will not accept user-defined functions because of side effects. Erlang is not a purely functional programming language (like <a class="external" href="http://learnyouahaskell.com/" title="PURE! PURE! OH GOD SO PURELY FUNCTIONAL!">Haskell</a> is) because it relies on side effects a lot: you can do I/O, send messages between actors or throw errors as you want and when you want. There is no trivial way to determine if a function you would use in a guard would or wouldn't print text or catch important errors every time it is tested over many function clauses. So instead, Erlang just doesn't trust you (and it may be right to do so!)<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">除了在函数中使用比较和布尔运算外，你还可以使用更多的函数，包括数学运算 (<code>A*B/C &gt;= 0</code>) 和关于数据类型的函数，如&nbsp;<code>is_integer/1</code>&nbsp;、&nbsp;<code>is_atom/1</code>&nbsp;等（我们将在下一章再讨论它们）。关于守卫的一个不太好的一点是，由于担心副作用的存在，他们不会接受用户定义的函数。 Erlang 不是一种纯粹的函数式编程语言（像 Haskell 那样），因为它非常依赖副作用：你可以做 I/O ，在角色之间发送消息，或者在你想的时候抛出错误。没有任何琐碎的方法来确定你在守卫的表达式中使用的函数是否会打印文本或在每次测试许多函数子句时捕获重要错误，因此， Erlang 不打算信任你，仅此而已（而且这样做应该是对的！）</hcfy-result><!--hcfy-anchor--></p>

<p>That being said, you should be good enough to understand the basic syntax of guards to understand them when you encounter them.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">也就是说，你应该很好地理解守卫的基本语法，以便在遇到它们时能够理解它们。</hcfy-result><!--hcfy-anchor--></p>

<div class="note">
    <p><strong>Note:</strong> I've compared <code>,</code> and <code>;</code> in guards to the operators <code>andalso</code> and <code>orelse</code>. They're not exactly the same, though. The former pair will catch exceptions as they happen while the latter won't. What this means is that if there is an error thrown in the first part of the guard <code>X &gt;= N; N &gt;= 0</code>, the second part can still be evaluated and the guard might succeed; if an error was thrown in the first part of <code>X &gt;= N orelse N &gt;= 0</code>, the second part will also be skipped and the whole guard will fail.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">注意：我把守卫中&nbsp;<code>,</code>&nbsp;和&nbsp;<code>;</code>&nbsp;比作运算符&nbsp;<code>andalso</code>&nbsp;和&nbsp;<code>orelse</code>&nbsp;这两个运算符，不过它们并不完全相同。前者会在异常发生时捕获异常，而后者则不会。这意味着，如果在守卫&nbsp;<code>X &gt;= N; N &gt;= 0</code>&nbsp;的第一部分出现了错误，第二部分仍然可以被评估，守卫可能会成功；如果在&nbsp;<code>X &gt;= N orelse N &gt;= 0</code>&nbsp;的第一部分出现了错误，第二部分也会被跳过，整个守卫会失败。-----（译注：就像我上面说过的那样，分号理解为一种对特定结构的简写会更贴切。）</hcfy-result><!--hcfy-anchor--></p>

    <p>However (there is always a 'however'), only <code>andalso</code> and <code>orelse</code> can be nested inside guards. This means <code>(A orelse B) andalso C</code> is a valid guard, while <code>(A; B), C</code> is not. Given their different use, the best strategy is often to mix them as necessary.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">然而（总是有一个 "然而" ），只有&nbsp;<code>andalso</code>&nbsp;和&nbsp;<code>orelse</code>&nbsp;可以嵌套在守卫里面。这意味着&nbsp;<code>(A orelse B) andalso C</code>&nbsp;是一个有效的守护表达式，而&nbsp;<code>(A; B), C</code>&nbsp;则不是。鉴于它们的不同用途，最好的策略往往是根据需要混合使用。-----（译注：看到了吧？还是简写语法糖的理解会更贴切些。）</hcfy-result><!--hcfy-anchor--></p>
</div>

<h3><a class="section" name="what-the-if">What the If!?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">What the if !?</hcfy-result><!--hcfy-anchor--></a></h3>

<p><code>If</code>s act like guards and share guards' syntax, but outside of a function clause's head. In fact, the <code>if</code> clauses are called <em>Guard Patterns</em>. Erlang's <code>if</code>s are different from the <code>if</code>s you'll ever encounter in most other languages; compared to them they're weird creatures that might have been more accepted had they had a different name. When entering Erlang's country, you should leave all you know about <code>if</code>s at the door. Take a seat because we're going for a ride.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true"><code>If</code><span style="font-size: 12.8px; background-color: rgb(255, 255, 255);">&nbsp;</span>的作用类似于卫兵，并共享卫兵的语法，但不是写在函数子句的头部。事实上，&nbsp;<code>If</code>&nbsp;子句被称为守护模式（&nbsp;<em style="font-size: 12.8px; background-color: rgb(255, 255, 255);">Guard Patterns</em>&nbsp;）。 Erlang 的&nbsp;<code>if</code>&nbsp;与你在大多数其他语言中遇到的&nbsp;<code>if</code>&nbsp;不同；与别的相比，这些可能会很奇怪，甚至可以说，换个不同的名字可能都更容易被接受。（译注：其实 Bash 也是类似的： Bash 由于没有布尔类型，实际上其 if 是和别的语言里的 try 等价）。当进入 Erlang 的地盘，你就该把你对&nbsp;<code>if</code>&nbsp;的所有了解留在门口了。然后就请坐吧，因为我们要去兜风了。</hcfy-result><!--hcfy-anchor--></p>

<p>To see how similar to guards the if expression is, look at the following examples:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">要想知道 if 表达式与卫兵有多相似，请看下面的例子：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_414568" class="syntaxhighlighter nogutter "><div class="bar                                                                                           "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">-module</code><code class="plain">(</code><code class="atoms">what_the_if</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">-export</code><code class="plain">([</code><code class="atoms">heh_fine</code><code class="symbols">/</code><code class="numerics">0</code><code class="plain">])</code><code class="symbols">.</code></span></span></div><div class="line alt1"><code class="number">03.</code><span class="content"><span class="block" style="margin-left: 0px !important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">04.</code><span class="content"><span class="block" style="margin-left: 0px !important;">&nbsp;</span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">heh</code><code class="symbols">_</code><code class="plain">fine() </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="keyword">if</code> <code class="numerics">1</code> <code class="symbols">=:=</code> <code class="numerics">1</code> <code class="symbols">-&gt;</code></span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 64px !important;"><code class="atoms">works</code></span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="keyword">end</code><code class="plain">,</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="keyword">if</code> <code class="numerics">1</code> <code class="symbols">=:=</code> <code class="numerics">2</code><code class="symbols">;</code> <code class="numerics">1</code> <code class="symbols">=:=</code> <code class="numerics">1</code> <code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">10.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 64px !important;"><code class="atoms">works</code></span></span></div><div class="line alt1"><code class="number">11.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="keyword">end</code><code class="plain">,</code></span></span></div><div class="line alt2"><code class="number">12.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="keyword">if</code> <code class="numerics">1</code> <code class="symbols">=:=</code> <code class="numerics">2</code><code class="plain">, </code><code class="numerics">1</code> <code class="symbols">=:=</code> <code class="numerics">1</code> <code class="symbols">-&gt;</code></span></span></div><div class="line alt1"><code class="number">13.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 64px !important;"><code class="atoms">fails</code></span></span></div><div class="line alt2"><code class="number">14.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="keyword">end</code><code class="symbols">.</code></span></span></div></div></div>

<p>Save this as <code><a class="source" href="https://learnyousomeerlang.com/static/erlang/what_the_if.erl" title="what_the_if module">what_the_if.erl</a></code> and let's try it:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">将其保存为&nbsp;<code><a class="source" href="https://learnyousomeerlang.com/static/erlang/what_the_if.erl" title="what_the_if module" style="font-size: 12px;">what_the_if.erl</a></code>&nbsp;，玩玩看看：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_294909" class="syntaxhighlighter nogutter "><div class="bar                                 "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">1&gt;</code> <code class="plain">c(</code><code class="atoms">what_the_if</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">./what_the_if.erl:12: Warning: no clause will ever match</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">./what_the_if.erl:12: Warning: the guard for this clause evaluates to 'false'</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">{ok,what_the_if}</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">2&gt;</code> <code class="functions">what_the_if:heh_fine</code><code class="plain">()</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">6.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="errors">** exception error: no true branch found when evaluating an if expression</code></span></span></div><div class="line alt1"><code class="number">7.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 40px !important;"><code class="shell_output">in function&nbsp; what_the_if:heh_fine/0</code></span></span></div></div></div>

<img class="right" src="https://learnyousomeerlang.com/static/img/labyrinth.png" width="163" height="143" alt="Labyrinth with no exit" title="no exit branch possible! oh no!">

<p>Uh oh! the compiler is warning us that no clause from the if on line 12 (<code>1 =:= 2, 1 =:= 1</code>) will ever match because its only guard evaluates to <code>false</code>. Remember, in Erlang, everything has to return something, and <code>if</code> expressions are no exception to the rule. As such, when Erlang can't find a way to have a guard succeed, it will crash: it cannot <em>not</em> return something. As such, we need to add a catch-all branch that will always succeed no matter what. In most languages, this would be called an 'else'. In Erlang, we use 'true' (this explains why the VM has thrown "no true branch found" when it got mad):<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">啊哦！编译器警告我们，第 12 行 if 中的任何一个子句 (<code>1 =:= 2, 1 =:= 1</code>) 都不会匹配，因为它的唯一保护句评估为&nbsp;<code>false</code>&nbsp;。记住，在 Erlang 中，所有的东西都必须返回，&nbsp;<code>if</code>&nbsp;表达式也不例外。因此，当 Erlang 找不到方法让一个卫兵成功时，它就会崩溃：它无法做到什么都不返回。因此，我们需要添加一个万能的分支，无论如何都会成功。在大多数语言中，这被称为 "else" 。在 Erlang 中，我们使用 "true" （这解释了为什么虚拟机在出错时抛出 "没有找到为真的分支" ）：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_674157" class="syntaxhighlighter nogutter "><div class="bar                                               "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">oh</code><code class="symbols">_</code><code class="plain">god(N) </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="keyword">if</code> <code class="plain">N </code><code class="symbols">=:=</code> <code class="numerics">2</code> <code class="symbols">-&gt;</code> <code class="atoms">might_succeed</code><code class="symbols">;</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 56px !important;"><code class="atoms">true</code> <code class="symbols">-&gt;</code> <code class="atoms">always_does</code>&nbsp; <code class="comments">%% this is Erlang's if's 'else!'</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="keyword">end</code><code class="symbols">.</code></span></span></div></div></div>

<p>And now if we test this new function (the old one will keep spitting warnings, ignore them or take them as a reminder of what not to do):<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">现在如果我们测试这个新的函数（旧函数会再次导致警告，忽略就好，或者把它当作告诉我们不要做什么的提醒）：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_146109" class="syntaxhighlighter nogutter "><div class="bar                                  show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">3&gt;</code> <code class="plain">c(</code><code class="atoms">what_the_if</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">./what_the_if.erl:12: Warning: no clause will ever match</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">./what_the_if.erl:12: Warning: the guard for this clause evaluates to 'false'</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">{ok,what_the_if}</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">4&gt;</code> <code class="functions">what_the_if:oh_god</code><code class="plain">(</code><code class="numerics">2</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">6.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">might_succeed</code></span></span></div><div class="line alt1"><code class="number">7.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">5&gt;</code> <code class="functions">what_the_if:oh_god</code><code class="plain">(</code><code class="numerics">3</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">8.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">always_does</code></span></span></div></div></div>

<p>Here's another function showing how to use many guards in an <code>if</code> expression. The function also illustrates how any expression must return something: <var>Talk</var> has the result of the <code>if</code> expression bound to it, and is then concatenated in a string, inside a tuple. When reading the code, it's easy to see how the lack of a <code>true</code> branch would mess things up, considering Erlang has no such thing as a null value (ie.: Lisp's NIL, C's NULL, Python's None, etc):<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这里是另一个函数，展示了如何在&nbsp;<code>if</code>&nbsp;表达式中使用许多卫兵（译注：其实这里就能看出 if 就如同是一个内置匿名函数）。这个函数也说明了任何表达式都必须返回一些东西：&nbsp;<var style="background-color: rgb(255, 255, 255);">Talk</var>&nbsp;将&nbsp;<code>if</code>&nbsp;表达式的结果与之绑定，然后在一个字符串中串联起来，放在一个元组里面。当阅读这段代码时，很容易看出缺少一个真正的分支会把事情搞得一团糟，考虑到 Erlang 没有空值这样的东西（即： Lisp 的 NIL 、 C 的 NULL 、 Python 的 None 等）：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_601614" class="syntaxhighlighter nogutter "><div class="bar                                       "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">%% note, this one would be better as a pattern match in function heads!</code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">%% I'm doing it this way for the sake of the example.</code></span></span></div><div class="line alt1"><code class="number">03.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">help</code><code class="symbols">_</code><code class="plain">me(Animal) </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">04.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="plain">Talk </code><code class="symbols">=</code> <code class="keyword">if</code> <code class="plain">Animal </code><code class="symbols">==</code> <code class="atoms">cat</code>&nbsp; <code class="symbols">-&gt;</code> <code class="string">"meow"</code><code class="symbols">;</code></span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 112px !important;"><code class="plain">Animal </code><code class="symbols">==</code> <code class="atoms">beef</code> <code class="symbols">-&gt;</code> <code class="string">"mooo"</code><code class="symbols">;</code></span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 112px !important;"><code class="plain">Animal </code><code class="symbols">==</code> <code class="atoms">dog</code>&nbsp; <code class="symbols">-&gt;</code> <code class="string">"bark"</code><code class="symbols">;</code></span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 112px !important;"><code class="plain">Animal </code><code class="symbols">==</code> <code class="atoms">tree</code> <code class="symbols">-&gt;</code> <code class="string">"bark"</code><code class="symbols">;</code></span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 112px !important;"><code class="atoms">true</code> <code class="symbols">-&gt;</code> <code class="string">"fgdadfgna"</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 88px !important;"><code class="keyword">end</code><code class="plain">,</code></span></span></div><div class="line alt2"><code class="number">10.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="plain">{Animal, </code><code class="string">"says "</code> <code class="symbols">++</code> <code class="plain">Talk </code><code class="symbols">++</code> <code class="string">"!"</code><code class="plain">}</code><code class="symbols">.</code></span></span></div></div></div>

<p>And now we try it:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">用用它看看：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_330909" class="syntaxhighlighter nogutter "><div class="bar                                   "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">6&gt;</code> <code class="plain">c(</code><code class="atoms">what_the_if</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">./what_the_if.erl:12: Warning: no clause will ever match</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">./what_the_if.erl:12: Warning: the guard for this clause evaluates to 'false'</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">{ok,what_the_if}</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">7&gt;</code> <code class="functions">what_the_if:help_me</code><code class="plain">(</code><code class="atoms">dog</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">6.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">{dog,"says bark!"}</code></span></span></div><div class="line alt1"><code class="number">7.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">8&gt;</code> <code class="functions">what_the_if:help_me</code><code class="plain">(</code><code class="string">"it hurts!"</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">8.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">{"it hurts!","says fgdadfgna!"}</code></span></span></div></div></div>

<p>You might be one of the many Erlang programmers wondering why 'true' was taken over 'else' as an atom to control flow; after all, it's much more familiar. Richard O'Keefe gave the following answer on the Erlang mailing lists. I'm quoting it directly because I couldn't have put it better:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">你可能是想知道为什么 'true' 要比 'else' 更适合作为控制流的一个原子的众多 Erlang 程序员中的一员；毕竟，后者更熟悉。 Richard O'Keefe 在 Erlang 邮件列表中给出了以下答案。我直接引用它，因为我不可能说得更好：</hcfy-result><!--hcfy-anchor--></p>

<blockquote title="From the Erlang mailing lists: http://erlang.org/pipermail/erlang-questions/2009-January/041228.html">
	<p>It may be more FAMILIAR, but that doesn't mean 'else' is a good thing.  I know that writing ';&nbsp;true&nbsp;-&gt;' is a very easy way to get 'else' in Erlang, but we have a couple of decades of psychology-of-programming results to show that it's a bad idea. I have started to replace:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">它（ 'else' ）可能更令人感到熟悉，但这并不意味着它是个好东西。我知道在 Erlang 中写 '; true -&gt;' 是一个非常容易得到 'else' 效果的方法，但我们有几十年的编程心理学结果表明，这是一个坏主意。我早就已经开始做出这种取缔：</hcfy-result><!--hcfy-anchor--></p>
	<pre>                          by
	if X &gt; Y -&gt; a()		if X &gt; Y  -&gt; a()
	 ; true  -&gt; b()		 ; X =&lt; Y -&gt; b()
	end		     	end

	if X &gt; Y -&gt; a()		if X &gt; Y -&gt; a()
	 ; X &lt; Y -&gt; b()		 ; X &lt; Y -&gt; b()
	 ; true  -&gt; c()		 ; X ==Y -&gt; c()
	end			end
	</pre>
	<p>which I find mildly annoying when _writing_ the code but enormously helpful when _reading_ it.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">当我<b>写</b>代码时我发现这有点烦人，但当我<b>读</b>代码时这样却很有帮助。</hcfy-result><!--hcfy-anchor--></p>
</blockquote>

<p>'Else' or 'true' branches should be "avoided" altogether: <code>if</code>s are usually easier to read when you cover all logical ends rather than relying on a <em>"catch all"</em> clause.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">也就是说，应该完全避免使用 'else' 或 'true' 分支：当你覆盖所有的逻辑终点而不是依靠&nbsp;<em style="font-size: 12.8px; background-color: rgb(255, 255, 255);">"catch all"</em>&nbsp;子句时，&nbsp;<code>if</code>&nbsp;通常更容易阅读。-----（译注：就是说，当人看到 else 还要花功夫反推这意味着什么逻辑，读代码往往频率大于写代码，所以写的时候花花功夫会更好一些，而且即便有错误，编译器解释器也会告诉你。）</hcfy-result><!--hcfy-anchor--></p>

<p>As mentioned before, there are only a limited set of functions that can be used in guard expressions (we'll see more of them in <a class="chapter" href="https://learnyousomeerlang.com/types-or-lack-thereof#type-conversions" title="Type conversions">Types (or lack thereof)</a>). This is where the real conditional powers of Erlang must be conjured. I present to you: the <code>case</code> expression!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">如前所述，只有一组有限的函数可以在守护表达式中使用（我们将在&nbsp;<a class="chapter" href="https://learnyousomeerlang.com/types-or-lack-thereof#type-conversions" title="Type conversions" style="font-size: 12.8px; background-color: rgb(255, 255, 255);">Types (or lack thereof)</a>&nbsp;中看到更多这样的函数）。这就是 Erlang 的真正的条件能力必须被激发出来的地方。我向你们介绍：&nbsp;<code>case</code>&nbsp;表达式！</hcfy-result><!--hcfy-anchor--></p>

<div class="note">
	<p><strong>Note:</strong> All this horror expressed by the function names in <code>what_the_if.erl</code> is expressed in regards to the <code>if</code> language construct when seen from the perspective of any other languages' <code>if</code>. In Erlang's context, it turns out to be a perfectly logical construct with a confusing name.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">注意：&nbsp;<code>what_the_if.erl</code>&nbsp;中的函数名所表达的所有惊恐的东西，从任何其他语言的&nbsp;<code>if</code>&nbsp;的角度来看，都是针对&nbsp;<code>if</code>&nbsp;语言构造的。在 Erlang 的语境中，它被证明是一个完全合乎逻辑的结构，但却有一个令人困惑的名字。</hcfy-result><!--hcfy-anchor--></p>
</div>


<h3><a class="section" name="in-case-of">In Case ... of<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">在 ... 的情况下</hcfy-result><!--hcfy-anchor--></a></h3>

<p>If the <code>if</code> expression is like a guard, a <code>case ... of</code> expression is like the whole function head: you can have the complex pattern matching you can use with each argument, and you can have guards on top of it!<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">如果说&nbsp;<code>if</code>&nbsp;表达式就像一个守卫，那么&nbsp;<code>case ... of</code>&nbsp;表达式就像整个函数头：你可以有复杂的模式匹配，你可以对每个参数使用，而且你可以在上面使用卫兵！</hcfy-result><!--hcfy-anchor--></p>

<p>As you're probably getting pretty familiar with the syntax, we won't need too many examples. For this one, we'll write the append function for sets (a collection of unique values) that we will represent as an unordered list. This is possibly the worst implementation possible in terms of efficiency, but what we want here is the syntax:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">由于你可能已经非常熟悉这个语法了，我们不需要太多的例子。对于这个例子，我们将为集合（唯一值的集合）编写 append 函数，我们将把它表示为一个无序的列表。就效率而言，这可能是最糟糕的实现，但我们在此要做的是演示语法：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_633525" class="syntaxhighlighter nogutter "><div class="bar                                     "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">insert(X,[]) </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="plain">[X]</code><code class="symbols">;</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">insert(X,Set) </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="keyword">case</code> <code class="functions">lists:member</code><code class="plain">(X,Set) </code><code class="keyword">of</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 64px !important;"><code class="atoms">true</code>&nbsp; <code class="symbols">-&gt;</code> <code class="plain">Set</code><code class="symbols">;</code></span></span></div><div class="line alt2"><code class="number">6.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 64px !important;"><code class="atoms">false</code> <code class="symbols">-&gt;</code> <code class="plain">[X</code><code class="symbols">|</code><code class="plain">Set]</code></span></span></div><div class="line alt1"><code class="number">7.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="keyword">end</code><code class="symbols">.</code></span></span></div></div></div>


<p>If we send in an empty set (list) and a term <var>X</var> to be added, it returns us a list containing only <var>X</var>. Otherwise, the function <code>lists:member/2</code> checks whether an element is part of a list and returns true if it is, false if it is not. In the case we already had the element <var>X</var> in the set, we do not need to modify the list. Otherwise, we add <var>X</var> as the list's first element.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">如果我们送入一个空集合（列表）和一个要添加的项&nbsp;<var style="background-color: rgb(255, 255, 255);">X</var>&nbsp;，它将返回一个只包含&nbsp;<var style="background-color: rgb(255, 255, 255);">X</var>&nbsp;的列表。否则，函数&nbsp;<code>lists:member/2</code>&nbsp;检查一个元素是否是列表的一部分，如果是则返回 true ，如果不是则返回 false 。如果我们在集合中已经有了元素&nbsp;<var style="background-color: rgb(255, 255, 255);">X</var>&nbsp;，我们不需要修改列表。否则，我们就将&nbsp;<var style="background-color: rgb(255, 255, 255);">X</var>&nbsp;添加为列表的第一个元素。</hcfy-result><!--hcfy-anchor--></p>


<p>In this case, the pattern matching was really simple. It can get more complex (you can compare your code with <a class="source" href="https://learnyousomeerlang.com/static/erlang/cases.erl" title="cases.erl">mine</a>):<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">在这种情况下，模式匹配真的很简单。 case 把事情变得更加复杂（你可以把你的代码和我的代码（&nbsp;<a class="source" href="https://learnyousomeerlang.com/static/erlang/cases.erl" title="cases.erl" style="font-size: 12.8px; background-color: rgb(255, 255, 255);">mine</a>&nbsp;）进行比较）：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_893221" class="syntaxhighlighter nogutter "><div class="bar                                                                                             "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">beach(Temperature) </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="keyword">case</code> <code class="plain">Temperature </code><code class="keyword">of</code></span></span></div><div class="line alt1"><code class="number">03.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 64px !important;"><code class="plain">{</code><code class="atoms">celsius</code><code class="plain">, N} </code><code class="keyword">when</code> <code class="plain">N </code><code class="symbols">&gt;=</code> <code class="numerics">20</code><code class="plain">, N </code><code class="symbols">=&lt;</code> <code class="numerics">45</code> <code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">04.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 96px !important;"><code class="atoms">'favorable'</code><code class="symbols">;</code></span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 64px !important;"><code class="plain">{</code><code class="atoms">kelvin</code><code class="plain">, N} </code><code class="keyword">when</code> <code class="plain">N </code><code class="symbols">&gt;=</code> <code class="numerics">293</code><code class="plain">, N </code><code class="symbols">=&lt;</code> <code class="numerics">318</code> <code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 96px !important;"><code class="atoms">'scientifically favorable'</code><code class="symbols">;</code></span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 64px !important;"><code class="plain">{</code><code class="atoms">fahrenheit</code><code class="plain">, N} </code><code class="keyword">when</code> <code class="plain">N </code><code class="symbols">&gt;=</code> <code class="numerics">68</code><code class="plain">, N </code><code class="symbols">=&lt;</code> <code class="numerics">113</code> <code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 96px !important;"><code class="atoms">'favorable in the US'</code><code class="symbols">;</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 64px !important;"><code class="symbols">_</code> <code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">10.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 96px !important;"><code class="atoms">'avoid beach'</code></span></span></div><div class="line alt1"><code class="number">11.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="keyword">end</code><code class="symbols">.</code></span></span></div></div></div>

<p>Here, the answer of "is it the right time to go to the beach" is given in 3 different temperature systems: Celsius, Kelvins and Fahrenheit degrees. Pattern matching and guards are combined in order to return an answer satisfying all uses. As pointed out earlier, <code>case ... of</code> expressions are pretty much the same thing as a bunch of function heads with guards. In fact we could have written our code the following way:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这里，“现在是去海滩的合适时间吗”的答案是用3种不同的温度系统给出的。摄氏度、开尔文和华氏度。为了返回一个满足所有用途的答案，模式匹配和防护措施被结合起来。正如前面所指出的，表达式的&nbsp;<code>case ... of</code>&nbsp;与一堆带有守护的函数头几乎是一回事。事实上，我们可以把我们的代码写成以下方式：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_959210" class="syntaxhighlighter nogutter "><div class="bar                                                                     "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">beachf({</code><code class="atoms">celsius</code><code class="plain">, N}) </code><code class="keyword">when</code> <code class="plain">N </code><code class="symbols">&gt;=</code> <code class="numerics">20</code><code class="plain">, N </code><code class="symbols">=&lt;</code> <code class="numerics">45</code> <code class="symbols">-&gt;</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="atoms">'favorable'</code><code class="symbols">;</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="symbols">.</code><code class="symbols">.</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">beachf(</code><code class="symbols">_</code><code class="plain">) </code><code class="symbols">-&gt;</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="atoms">'avoid beach'</code><code class="symbols">.</code></span></span></div></div></div>

<p>This raises the question: when should we use <code>if</code>, <code>case ... of</code> or functions to do conditional expressions?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这就提出了一个问题：我们应该分别在何时使用&nbsp;<code>if</code>&nbsp;、&nbsp;<code>case ... of</code>&nbsp;或函数，来放置条件表达式？</hcfy-result><!--hcfy-anchor--></p>

<img class="right" src="https://learnyousomeerlang.com/static/img/coppertone.png" width="164" height="258" alt="parody of the coppertone logo mixed with the squid on the tunnel page of this site" title="We are squids. At the beach.">

<h3><a class="section" name="which-to-use">Which to use?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">使用哪种方法？</hcfy-result><!--hcfy-anchor--></a></h3>

<p>Which to use is rather hard to answer. The difference between function calls and <code>case ... of</code> are very minimal: in fact, they are represented the same way at a lower level, and using one or the other effectively has the same cost in terms of performance. One difference between both is when more than one argument needs to be evaluated: <code>function(A,B)&nbsp;-&gt; ... end.</code> can have guards and values to match against <var>A</var> and <var>B</var>, but a case expression would need to be formulated a bit like:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">使用哪种方法是相当难回答的。函数调用和&nbsp;<code>case ... of</code>&nbsp;之间的区别非常小：事实上，它们在较低层次上的表示方法是一样的，使用其中一个或另一个在性能上的代价是一样的。两者之间的一个区别是当需要评估一个以上的参数时：&nbsp;<code>function(A,B)&nbsp;-&gt; ... end.</code>&nbsp;可以有守护和值来同&nbsp;<var style="background-color: rgb(255, 255, 255);">A</var>&nbsp;和&nbsp;<var style="background-color: rgb(255, 255, 255);">B</var>&nbsp;相匹配，但是case表达式需要被表述得有点像：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_33418" class="syntaxhighlighter nogutter "><div class="bar                       "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="keyword">case</code> <code class="plain">{A,B} </code><code class="keyword">of</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 32px !important;"><code class="plain">Pattern Guards </code><code class="symbols">-&gt;</code> <code class="symbols">.</code><code class="symbols">.</code><code class="symbols">.</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="keyword">end</code><code class="symbols">.</code></span></span></div></div></div>

<p>This form is rarely seen and might surprise the reader a bit. In similar situations, using a function call might be more appropriate. On the other hand the <code>insert/2</code> function we had written earlier is arguably cleaner the way it is rather than having an immediate function call to track down on a simple <code>true</code> or <code>false</code> clause.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这种形式很少见，可能会让读者有点吃惊。在类似情况下，使用函数调用可能更合适。另一方面，我们之前写的&nbsp;<code>insert/2</code>&nbsp;函数可以说是比较干净的方式，而不是在一个简单的&nbsp;<code>true</code>&nbsp;或&nbsp;<code>false</code>&nbsp;子句上有一个立即的函数调用来追踪。（译注：其实 true false 了的话就不如用 when 了，不过他那个的话用 case 的可取之处在于在这里需要多个层次的分支。）</hcfy-result><!--hcfy-anchor--></p>

<p>Then the other question is why would you ever use <code>if</code>, given <code>case</code>s and functions are flexible enough to even encompass <code>if</code> through guards? The rationale behind <code>if</code> is quite simple: it was added to the language as a short way to have guards without needing to write the whole pattern matching part when it wasn't needed.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">那么另一个问题是，既然&nbsp;<code>case</code>&nbsp;和函数足够灵活，甚至可以通过守卫来包含&nbsp;<code>if</code>&nbsp;，那么你为什么还要使用&nbsp;<code>if</code>&nbsp;呢？&nbsp;<code>if</code>&nbsp;背后的道理也很简单：它被添加到语言中，作为一种简短的方式来使用守卫，而不必在没必要的时候也得编写整个模式匹配的部分。</hcfy-result><!--hcfy-anchor--></p>

<p>Of course, all of this is more about personal preferences and what you may encounter more often. There is no good solid answer. The whole topic is still debated by the Erlang community from time to time. Nobody's going to go try to beat you up because of what you've chosen, as long as it is easy to understand. As Ward Cunningham once put it, <cite>"Clean code is when you look at a routine and it's pretty much what you expected."</cite><hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">当然，所有这些都是关于个人偏好和你可能更经常遇到的情况。没有一个好的可靠的答案。整个话题仍然被 Erlang 社区不时地辩论着。没有人会因为你的选择而去试图打压你，只要它是容易理解的。正如 Ward Cunningham 曾经说过的，"干净的代码就是当你看了一个例程，它和你预期的差不多" （&nbsp;<cite style="font-size: 12.8px; background-color: rgb(255, 255, 255);">"Clean code is when you look at a routine and it's pretty much what you expected."</cite>&nbsp;）。</hcfy-result><!--hcfy-anchor--></p>

				<ul class="navigation">
											<li><a href="https://learnyousomeerlang.com/modules" title="Previous chapter">&lt; Previous<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">&lt; 上一页</hcfy-result><!--hcfy-anchor--></a></li>
										
					<li><a href="https://learnyousomeerlang.com/contents" title="Index">Index<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">索引</hcfy-result><!--hcfy-anchor--></a></li>
					
											<li><a href="https://learnyousomeerlang.com/types-or-lack-thereof" title="Next chapter">Next &gt;<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">下一页 &gt;</hcfy-result><!--hcfy-anchor--></a></li>
									</ul>
			</div><div id="content">
            <div class="noscript"><noscript>Hey there, it appears your Javascript is disabled. That's fine, the site works without it. However, you might prefer reading it with syntax highlighting, which requires Javascript!</noscript></div>
<h2>Types (or lack thereof)<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">类型（或者说弱类型在这里）</hcfy-result><!--hcfy-anchor--></h2>

<h3><a class="section" name="dynamite-strong-typing">Dynamite-strong Typing<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">动态强大的类型</hcfy-result><!--hcfy-anchor--></a></h3>

<p>As you might have noticed when typing in examples from <a class="local chapter" href="https://learnyousomeerlang.com/starting-out-for-real" title="Starting Out (for real)">Starting Out (for real)</a>, and then modules and functions from <a class="local chapter" href="https://learnyousomeerlang.com/modules" title="Modules">Modules</a> and <a class="chapter local" href="https://learnyousomeerlang.com/syntax-in-functions" title="Syntax in Functions">Syntax in Functions</a>, we never needed to write the type of a variable or the type of a function. When pattern matching, the code we had written didn't have to know what it would be matched against. The tuple <code>{<var>X</var>,<var>Y</var>}</code> could be matched with <code>{atom, 123}</code> as well as <code>{"A string", &lt;&lt;"binary stuff!"&gt;&gt;}</code>, <code>{2.0, ["strings","and",atoms]}</code> or really anything at all.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">你可能已经注意到，在&nbsp;<a class="local chapter" href="https://learnyousomeerlang.com/starting-out-for-real" title="Starting Out (for real)" style="font-size: 12.8px; background-color: rgb(255, 255, 255);">Starting Out (for real)</a>&nbsp;和&nbsp;<a class="local chapter" href="https://learnyousomeerlang.com/modules" title="Modules" style="font-size: 12.8px; background-color: rgb(255, 255, 255);">Modules</a>&nbsp;以及&nbsp;<a class="chapter local" href="https://learnyousomeerlang.com/syntax-in-functions" title="Syntax in Functions" style="font-size: 12.8px; background-color: rgb(255, 255, 255);">Syntax in Functions</a>&nbsp;中输入例子时，我们从来不需要写变量的类型或函数的类型。当模式匹配时，我们写的代码不需要知道它将与什么匹配。元组&nbsp;<code>{<var>X</var>,<var>Y</var>}</code>&nbsp;可以与&nbsp;<code>{atom, 123}</code>&nbsp;以及&nbsp;<code>{"A string", &lt;&lt;"binary stuff!"&gt;&gt;}</code>&nbsp;、&nbsp;<code>{2.0, ["strings","and",atoms]}</code>&nbsp;或实际上的任何东西匹配。</hcfy-result><!--hcfy-anchor--></p>

<p>When it didn't work, an error was thrown in your face, but only once you ran the code. This is because Erlang is <em>dynamically typed</em>: every error is caught at runtime and the compiler won't always yell at you when compiling modules where things may result in failure, like in <a class="chapter local" href="https://learnyousomeerlang.com/starting-out-for-real#bool-and-compare" title="Boolean Algebra &amp; Comparison Operators">Starting Out (for real)</a>'s <code>"llama + 5"</code> example.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">当它不工作的时候，一个错误就会被抛到你的面前，但是只有在你运行代码的时候才会出现。这是因为 Erlang 是动态类型的：每一个错误都在运行时被捕获，而且编译器不一定总会在你可能犯错的时候大声警告你，比如在&nbsp;<a class="chapter local" href="https://learnyousomeerlang.com/starting-out-for-real#bool-and-compare" title="Boolean Algebra &amp; Comparison Operators" style="font-size: 12.8px; background-color: rgb(255, 255, 255);">Starting Out (for real)</a>&nbsp;的&nbsp;<code>"llama + 5"</code>&nbsp;例子。</hcfy-result><!--hcfy-anchor--></p>

<img class="right" src="https://learnyousomeerlang.com/static/img/ham.png" width="388" height="246" alt="A knife slicing ham." title="I'll let you decide which is static and which is dynamic">

<p>One classic friction point between proponents of static and dynamic typing has to do with the safety of the software being written. A frequently suggested idea is that good static type systems with compilers enforcing them with fervor will catch most errors waiting to happen before you can even execute the code. As such, statically typed languages are to be seen as safer than their dynamic counterparts. While this might be true when comparing with many dynamic languages, Erlang begs to differ and certainly has a track record to prove it. The best example is the often reported <em>nine nines</em> (99.9999999%) of availability offered on the <a class="external" href="http://www.erlang.se/publications/Ulf_Wiger.pdf" title="Ulf Wiger - Four-fold Increase in Productivity and Quality">Ericsson AXD 301 ATM switches</a>, consisting of over 1 million lines of Erlang code. Please note that this is not an indication that none of the components in an Erlang-based system failed, but that a general switch system was available 99.9999999% of the time, planned outages included. This is partially because Erlang is built on the notion that a failure in one of the components should not affect the whole system. Errors coming from the programmer, hardware failures or [some] network failures are accounted for: the language includes features which will allow you to distribute a program over to different nodes, handle unexpected errors, and <em>never</em> stop running.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">静态类型和动态类型的支持者之间的一个典型摩擦点与所写软件的安全性有关。一个经常被提出的想法是，良好的静态类型系统和编译器会在你执行代码之前就能捕捉到大多数等待发生的错误。因此，静态类型的语言被认为比动态类型的语言更安全。虽然与许多动态语言相比，这可能是真的，但 Erlang 却并不一定，而且有确切的记录可以证明这一点。最好的例子是经常报道的爱立信&nbsp;<a class="external" href="http://www.erlang.se/publications/Ulf_Wiger.pdf" title="Ulf Wiger - Four-fold Increase in Productivity and Quality" style="font-size: 12.8px; background-color: rgb(255, 255, 255);">AXD 301 ATM</a>&nbsp;交换机能提供的九个九（ 99.9999999% ）的可用性，该交换机由超过 100 万行的 Erlang 代码组成。请注意，这并不是说基于 Erlang 的系统中没有一个组件发生故障，而是说一般的交换机系统在 99.9999999% 的时间内都是可用的，包括计划的中断（译注：比如更新……现在市面上的微服务其实不能做到严谨意义上真正的热更新）。这部分是因为 Erlang 是建立在一个组件的故障不应该影响整个系统的概念上。来自程序员的错误、硬件故障或（部分）网络故障都被考虑在内：该语言包括的功能将允许你将程序分配到不同的节点上，处理意外的错误，并且永远不会停止运行。</hcfy-result><!--hcfy-anchor--></p>

<p>To make it short, while most languages and type systems aim to make a program error-free, Erlang uses a strategy where it is assumed that errors will happen anyway and makes sure to cover these cases: Erlang's dynamic type system is not a barrier to reliability and safety of programs. This sounds like a lot of prophetic talking, but you'll see how it's done in the later chapters.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">简而言之，虽然大多数语言和类型系统的目标是使程序无错误，但 Erlang 使用的策略是假设错误无论如何都会发生，并确保整个程序系统的正常运行涵盖了对这些情况的处理。 Erlang 的动态类型系统对程序的可靠性和安全性没有任何障碍。这听起来像是在说预言，但你会在后面的章节中看到它是如何做到的。</hcfy-result><!--hcfy-anchor--></p>

<div class="note">
    <p><strong>Note:</strong> Dynamic typing was historically chosen for simple reasons; those who implemented Erlang at first mostly came from dynamically typed languages, and as such, having Erlang dynamic was the most natural option to them.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">注：历史上选择动态类型的原因很简单，最初实现 Erlang 的人大多来自动态类型的语言，因此，让 Erlang 动态化对他们来说是最自然的选择。</hcfy-result><!--hcfy-anchor--></p>
</div>

<p>Erlang is also strongly typed. A weakly typed language would do implicit type conversions between terms. If Erlang were to be weakly typed we could possibly do the operation <code>6 = 5 + "1".</code> while in practice, an exception for bad arguments will be thrown:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">Erlang 也是强类型的。一个弱类型的语言会对项做隐式类型转换。如果 Erlang 是弱类型的，我们就应当可以做&nbsp;<code>6 = 5 + "1".</code>&nbsp;的操作（但很显然我们不能）：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_330218" class="syntaxhighlighter nogutter "><div class="bar                             "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：响应超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">1&gt;</code> <code class="numerics">6</code> <code class="symbols">+</code> <code class="string">"1"</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="errors">** exception error: bad argument in an arithmetic expression</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 40px !important;"><code class="shell_output">in operator&nbsp; +/2</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 64px !important;"><code class="shell_output">called as 6 + "1"</code></span></span></div></div></div>

<p>Of course, there are times when you could want to convert one kind of data to another one: changing regular strings into bit strings to store them or an integer to a floating point number. The Erlang standard library provides a number of functions to do it.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">当然，有些时候，你可能想把一种数据转换为另一种数据：把普通字符串改为位字符串来存储，或者把整数改为浮点数。埃尔朗标准库提供了一些函数来做这件事。</hcfy-result><!--hcfy-anchor--></p>


<h3><a class="section" name="type-conversions">Type conversions<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">类型转换</hcfy-result><!--hcfy-anchor--></a></h3>

<p>Erlang, like many languages, changes the type of a term by casting it into another one. This is done with the help of built-in functions, as many of the conversions could not be implemented in Erlang itself. Each of these functions take the form &lt;type&gt;_to_&lt;type&gt; and are implemented in the <code>erlang</code> module. Here are a few of them:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">像许多语言一样， Erlang 通过将一个项转换为另一个项来改变它的类型。这是在内置函数的帮助下完成的，因为许多转换无法用 Erlang 语言本身实现。这些函数的形式都是 &lt;type&gt;_to_&lt;type&gt; ，并在&nbsp;<code>erlang</code>&nbsp;模块中实现。下面是其中的几个：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_319419" class="syntaxhighlighter nogutter "><div class="bar                                                     "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">1&gt;</code> <code class="functions">erlang:list_to_integer</code><code class="plain">(</code><code class="string">"54"</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">54</code></span></span></div><div class="line alt1"><code class="number">03.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">2&gt;</code> <code class="functions">erlang:integer_to_list</code><code class="plain">(</code><code class="numerics">54</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">04.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">"54"</code></span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">3&gt;</code> <code class="functions">erlang:list_to_integer</code><code class="plain">(</code><code class="string">"54.32"</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="errors">** exception error: bad argument</code></span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 40px !important;"><code class="shell_output">in function&nbsp; list_to_integer/1</code></span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 64px !important;"><code class="shell_output">called as list_to_integer("54.32")</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">4&gt;</code> <code class="functions">erlang:list_to_float</code><code class="plain">(</code><code class="string">"54.32"</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">10.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">54.32</code></span></span></div><div class="line alt1"><code class="number">11.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">5&gt;</code> <code class="functions">erlang:atom_to_list</code><code class="plain">(</code><code class="atoms">true</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">12.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">"true"</code></span></span></div><div class="line alt1"><code class="number">13.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">6&gt;</code> <code class="functions">erlang:list_to_bitstring</code><code class="plain">(</code><code class="string">"hi there"</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">14.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">&lt;&lt;"hi there"&gt;&gt;</code></span></span></div><div class="line alt1"><code class="number">15.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">7&gt;</code> <code class="functions">erlang:bitstring_to_list</code><code class="plain">(</code><code class="string">&lt;&lt;"hi there"&gt;&gt;</code><code class="plain">)</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">16.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">"hi there"</code></span></span></div></div></div>

<p>And so on. We're hitting on a language wart here: because the scheme &lt;type&gt;_to_&lt;type&gt; is used, every time a new type is added to the language, a whole lot of conversion BIFs need to be added! Here's the whole list already there:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">以此类推。我们在这里碰到了一个语言疣：因为使用了 &lt;type&gt;_to_&lt;type&gt; 的形式，每当语言中加入一个新的类型，就需要加入一大堆的转换 BIF ！下面是已经存在的整个列表：</hcfy-result><!--hcfy-anchor--></p>

<p><code>atom_to_binary/2, atom_to_list/1, binary_to_atom/2, binary_to_existing_atom/2, binary_to_list/1, bitstring_to_list/1, binary_to_term/1, float_to_list/1, fun_to_list/1, integer_to_list/1, integer_to_list/2, iolist_to_binary/1, iolist_to_atom/1, list_to_atom/1, list_to_binary/1, list_to_bitstring/1, list_to_existing_atom/1, list_to_float/1, list_to_integer/2, list_to_pid/1, list_to_tuple/1, pid_to_list/1, port_to_list/1, ref_to_list/1, term_to_binary/1, term_to_binary/2 and tuple_to_list/1.</code></p>

<p>That's a lot of conversion functions. We'll see most if not all of these types through this book, although we probably won't need all of these functions.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这是个很大量的转换函数。我们将在本书中看到大部分（如果不是全部的话）这些类型，尽管我们可能不需要所有的这些函数。</hcfy-result><!--hcfy-anchor--></p>


<h3><a class="section" name="to-guard-a-data-type">To Guard a Data Type<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">保护一个数据类型</hcfy-result><!--hcfy-anchor--></a></h3>

<p>Erlang basic data types are easy to spot, visually: tuples have the curly brackets, lists the square brackets, strings are enclosed in double quotation marks, etc. Enforcing a certain data type has thus been possible with pattern matching: a function <code>head/1</code> taking a list could only accept lists because otherwise, the matching (<code>[H|_]</code>) would have failed.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">&nbsp;Erlang 的基本数据类型在视觉上很容易发现：图元有大括号，列表有方括号，字符串用双引号括起来，等等。因此，用模式匹配来强制执行某种数据类型是可能的：一个接收列表的函数&nbsp;<code>head/1</code>&nbsp;只能接受列表，因为否则，匹配 (<code>[H|_]</code>) 就会失败。</hcfy-result><!--hcfy-anchor--></p>

<img class="left" src="https://learnyousomeerlang.com/static/img/my-name-is.png" width="146" height="79" alt="Hi, My name is Tuple">

<p>However, we've had a problem with numeric values because we couldn't specify ranges. Consequently, we used guards in functions about temperature, the age to drive, etc. We're hitting another roadblock now. How could we write a guard that ensures that patterns match against data of a single specific type, like numbers, atoms or bitstrings?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">然而，我们在处理数字值时遇到了问题，因为我们无法指定范围。因此，我们在关于温度、驾驶年龄等的函数中使用了守卫。现在我们遇到了另一个障碍。我们怎样才能写一个守卫，确保模式与单一特定类型的数据相匹配，比如数字、原子或比特串？</hcfy-result><!--hcfy-anchor--></p>

<p>There are functions dedicated to this task. They will take a single argument and return true if the type is right, false otherwise. They are part of the few functions allowed in guard expressions and are named the <em>type test BIFs</em>:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">有一些函数专门用于这项任务。它们将接受一个参数，如果类型正确则返回真，否则返回假。它们是防护表达式中允许的少数几个函数的一部分，被命名为类型测试 BIF （&nbsp;<em style="font-size: 12.8px; background-color: rgb(255, 255, 255);">type test BIFs</em>&nbsp;）。</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_53926" class="syntaxhighlighter nogutter "><div class="bar                          "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">is_atom/1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; is_binary/1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">is_bitstring/1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; is_boolean/1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; is_builtin/3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">is_float/1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; is_function/1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; is_function/2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">is_integer/1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; is_list/1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; is_number/1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">is_pid/1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; is_port/1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; is_record/2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></span></span></div><div class="line alt2"><code class="number">6.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="shell_output">is_record/3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; is_reference/1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; is_tuple/1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></span></span></div></div></div>

<p>They can be used like any other guard expression, wherever guard expressions are allowed. You might be wondering why there is no function just giving the type of the term being evaluated (something akin to <code>type_of(X)&nbsp;-&gt; Type</code>). The answer is pretty simple. Erlang is about programming for the right cases: you only program for what you know will happen and what you expect. Everything else should cause errors as soon as possible. Although this might sound insane, the explanations you'll get in <a class="chapter" href="https://learnyousomeerlang.com/errors-and-exceptions">Errors and Exceptions</a> will hopefully make things clearer. Until then, just trust me on that.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">它们可以像其他守护表达式一样，在允许守护表达式的地方使用。你可能想知道为什么没有一个函数只给出被评估项的类型（类似于&nbsp;<code>type_of(X)&nbsp;-&gt; Type</code>&nbsp;）。答案很简单。 Erlang 是为正确的情况编程：你只为你知道会发生的事情和你期望的事情编程。其他一切都应该尽快造成错误。虽然这听起来很疯狂，但你将在&nbsp;<a class="chapter" href="https://learnyousomeerlang.com/errors-and-exceptions" style="font-size: 12.8px; background-color: rgb(255, 255, 255);">Errors and Exceptions</a>&nbsp;一节中得到的解释，在那里我想我能把事情说得更清楚。而在那之前，就相信我吧。</hcfy-result><!--hcfy-anchor--></p>

<div class="note">
    <p><strong>Note:</strong> type test BIFs constitute more than half of the functions allowed in guard expressions. The rest are also BIFs, but do not represent type tests. These are: <hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">注意：类型测试 BIF 构成了守护表达式中允许的一半以上的函数。其余的也是 BIF ，但不是类型测试的。它们有：</hcfy-result><!--hcfy-anchor--><br>
<code>abs(Number), bit_size(Bitstring), byte_size(Bitstring), element(N, Tuple), float(Term), hd(List), length(List), node(), node(Pid|Ref|Port), round(Number), self(), size(Tuple|Bitstring), tl(List), trunc(Number), tuple_size(Tuple).</code></p>

    <p>The functions <code>node/1</code> and <code>self/0</code> are related to distributed Erlang and processes/actors. We'll eventually use them, but we've still got other topics to cover before then.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">函数&nbsp;<code>node/1</code>&nbsp;和&nbsp;<code>self/0</code>&nbsp;与分布式 Erlang 和 进程/角色 有关。我们早晚得用到它们，但在此之前我们还有别的要讲。</hcfy-result><!--hcfy-anchor--></p>
</div>

<p>It may seem like Erlang data structures are relatively limited, but lists and tuples are usually enough to build other complex structures without worrying about anything. As an example the basic node of a binary tree could be represented as <code>{node, Value, Left, Right}</code>, where <var>Left</var> and <var>Right</var> are either similar nodes or empty tuples. I could also represent myself as:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">看起来 Erlang 的数据结构相对有限，但列表和图元通常足以构建其他复杂的结构，而不必担心任何问题。举个例子，二叉树的基本节点可以表示为&nbsp;<code>{node, Value, Left, Right}</code>&nbsp;，其中&nbsp;<var style="background-color: rgb(255, 255, 255);">Left</var>&nbsp;和&nbsp;<var style="background-color: rgb(255, 255, 255);">Right</var>&nbsp;是类似的节点或空图元。我也可以把我自己表示为：</hcfy-result><!--hcfy-anchor--></p> 

<div id="highlighter_622445" class="syntaxhighlighter nogutter "><div class="bar                            "><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">{</code><code class="atoms">person</code><code class="plain">, {</code><code class="atoms">name</code><code class="plain">, </code><code class="string">&lt;&lt;"Fred T-H"&gt;&gt;</code><code class="plain">},</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 72px !important;"><code class="plain">{</code><code class="atoms">qualities</code><code class="plain">, [</code><code class="string">"handsome"</code><code class="plain">, </code><code class="string">"smart"</code><code class="plain">, </code><code class="string">"honest"</code><code class="plain">, </code><code class="string">"objective"</code><code class="plain">]},</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 72px !important;"><code class="plain">{</code><code class="atoms">faults</code><code class="plain">, [</code><code class="string">"liar"</code><code class="plain">]},</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 72px !important;"><code class="plain">{</code><code class="atoms">skills</code><code class="plain">, [</code><code class="string">"programming"</code><code class="plain">, </code><code class="string">"bass guitar"</code><code class="plain">, </code><code class="string">"underwater breakdancing"</code><code class="plain">]}}</code><code class="symbols">.</code></span></span></div></div></div>

<p>Which shows that by nesting tuples and list and filling them with data, we can obtain complex data structures and build functions to operate on them.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这表明，通过嵌套图元和列表并向它们填充数据，我们可以获得复杂的数据结构，并建立函数对其进行操作。</hcfy-result><!--hcfy-anchor--></p>
          
<div class="note update">
    <p><strong>Update:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">更新：</hcfy-result><!--hcfy-anchor--></strong><br>
    The release R13B04 saw the addition of the BIF <code>binary_to_term/2</code>, which lets you unserialize data the same way <code>binary_to_term/1</code> would, except the second argument is an option list. If you pass in <code>[safe]</code>, the binary won't be decoded if it contains unknown atoms or <a class="chapter local" href="https://learnyousomeerlang.com/higher-order-functions" title="Higher Order Functions chapter">anonymous functions</a>, which could exhaust memory.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">在 R13B04 版本中，增加了 BIF&nbsp;<code>binary_to_term/2</code>&nbsp;，它可以让你像&nbsp;<code>binary_to_term/1</code>&nbsp;一样取消序列化数据，只是第二个参数是一个选项列表。如果你传入&nbsp;<code>[safe]</code>&nbsp;，如果二进制文件包含未知原子或匿名函数（&nbsp;<a class="chapter local" href="https://learnyousomeerlang.com/higher-order-functions" title="Higher Order Functions chapter" style="font-size: 14.4px; background-color: rgb(238, 237, 248);">anonymous functions</a>&nbsp;），它就不会被解码，因为这种可能会耗尽内存。</hcfy-result><!--hcfy-anchor--></p>
</div>

<h3><a class="section" name="for-type-junkies">For Type Junkies<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">对于类型迷们来说</hcfy-result><!--hcfy-anchor--></a></h3>

<img class="right" src="https://learnyousomeerlang.com/static/img/type-dance.png" width="284" height="161" alt="A sign for homeless people: 'Will dance for types'" title="You know you would">

<p>This section is meant to be read by programmers who can not live without a static type system for one reason or another. It will include a little bit more advanced theory and everything may not be understood by everyone. I will briefly describe tools used to do static type analysis in Erlang, defining custom types and getting more safety that way. These tools will be described for anyone to understand much later in the book, given that it is not necessary to use any of them to write reliable Erlang programs. Because we'll show them later, I'll give very little details about installing, running them, etc. Again, this section is for those who really can't live without advanced type systems.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这一节是给那些由于某种原因不能没有静态类型系统的程序员阅读的。它将包括一些更高级的理论，所有的东西可能不是每个人都能理解。我将简要介绍用于在 Erlang 中进行静态类型分析的工具，定义自定义类型并通过这种方式获得更多的安全性。鉴于编写可靠的 Erlang 程序并不需要使用任何工具，这些工具将在本书的更后面为大家所描述，供大家了解。因为我们将在后面展示它们，所以我将很少给出关于安装、运行它们等的细节。同样，本节是为那些真的离不开高级类型系统的人准备的。</hcfy-result><!--hcfy-anchor--></p>

<p>Through the years, there were some attempts to build type systems on top of Erlang. One such attempt happened back in 1997, conducted by Simon Marlow, one of the lead developers of the Glasgow Haskell Compiler, and Philip Wadler, who worked on Haskell's design and has contributed to the theory behind monads (<a class="external" href="http://homepages.inf.ed.ac.uk/wadler/papers/erlang/erlang.pdf" title="A Practical Subtyping System for Erlang">Read the paper</a> on said type system). Joe Armstrong later <a class="external" href="http://webcem01.cem.itesm.mx:8005/erlang/cd/downloads/hopl_erlang.pdf" title="A history of Erlang">commented on the paper</a>:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">多年来，有一些人试图在 Erlang 之上建立类型系统。其中一次尝试发生在 1997 年，由 Glasgow Haskell 编译器的主要开发者之一 Simon Marlow 和 Philip Wadler 进行，后者曾参与 Haskell 的设计，并对 monads 背后的理论有所贡献（阅读上述类型系统的论文）。 Joe Armstrong 后来对这篇论文进行了评论：</hcfy-result><!--hcfy-anchor--></p>

<blockquote title="Joe Armstrong - A History of Erlang">
    <p>One day Phil phoned me up and announced that a) Erlang needed a type system, b) he had written a small prototype of a type system and c) he had a one year’s sabbatical and was going to write a type system for Erlang and “were we interested?” Answer —“Yes.”<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">有一天， Phil 打电话给我，宣布： a) Erlang 需要一个类型系统， b) 他已经写了一个类型系统的小原型， c) 他有一年的休假，准备为 Erlang 写一个类型系统，“我们感兴趣吗？”答案是——“是的”。</hcfy-result><!--hcfy-anchor--></p>

    <p>Phil Wadler and Simon Marlow worked on a type system for over a year and the results were published in [20]. The results of the project were somewhat disappointing. To start with, only a subset of the language was type-checkable, the major omission being the lack of process types and of type checking inter-process messages.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">&nbsp;Phil Wadler 和 Simon Marlow 在类型系统上工作了一年多，结果发表在 [20] 。这个项目的结果有些令人失望。首先，只有语言的一个子集是可以进行类型检查的，主要的遗漏是缺乏进程类型和进程间消息的类型检查。</hcfy-result><!--hcfy-anchor--></p>
</blockquote>

<p>Processes and messages both being one of the core features of Erlang, it may explain why the system was never added to the language. Other attempts at typing Erlang failed. The efforts of the HiPE project (attempts to make Erlang's performances much better) produced Dialyzer, a static analysis tool still in use today, with its very own type inference mechanism.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">进程和消息都是 Erlang 的核心特征之一，这可能解释了为什么该系统从未被添加到该语言中。其他为 Erlang 增加类型的尝试也失败了。 HiPE 项目（试图使 Erlang 的性能更好）的努力产生了 Dialyzer ，一个至今仍在使用的静态分析工具，它有自己的类型推理机制。-------（还有一个项目： hamler (harmler-lang/harmler) ，它算是一个 Haskell 系列的语言，但这个语言是运行在 Erlang 的运行环境上的，实现主要是由 Erlang 实现，辅以 Haskell 。）</hcfy-result><!--hcfy-anchor--></p>

<p>The type system that came out of it is based on success typings, a concept different from Hindley-Milner or soft-typing type systems. Success types are simple in concept: the type-inference will not try to find the exact type of every expression, but it will guarantee that the types it infers are right, and that the type errors it finds are really errors.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">它所产生的类型系统是基于成功类型的，这个概念与 Hindley-Milner 或软类型系统不同。成功类型的概念很简单：类型推理不会试图找到每个表达式的准确类型，但它会保证它推断的类型是正确的，而且它发现的类型错误确实是错误。</hcfy-result><!--hcfy-anchor--></p>

<p>The best example would come from the implementation of the function <code>and</code>, which will usually take two Boolean values and return 'true' if they're both true, 'false' otherwise. In Haskell's type system, this would be written <code>and :: bool -&gt; bool -&gt; bool</code>. If the <code>and</code> function had to be implemented in Erlang, it could be done the following way:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">最好的例子来自于函数&nbsp;<code>and</code>&nbsp;的实现，它通常会接受两个布尔值，如果它们都是真，则返回 "真" ，否则返回 "假" 。在 Haskell 的类型系统中，这将被写成&nbsp;<code>and :: bool -&gt; bool -&gt; bool</code>&nbsp;。如果&nbsp;<code>and</code>&nbsp;函数必须在 Erlang 中实现，可以用下面的方式来实现:</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_670920" class="syntaxhighlighter nogutter "><div class="bar             show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="keyword">and</code><code class="plain">(</code><code class="atoms">false</code><code class="plain">, </code><code class="symbols">_</code><code class="plain">) </code><code class="symbols">-&gt;</code> <code class="atoms">false</code><code class="symbols">;</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="keyword">and</code><code class="plain">(</code><code class="symbols">_</code><code class="plain">, </code><code class="atoms">false</code><code class="plain">) </code><code class="symbols">-&gt;</code> <code class="atoms">false</code><code class="symbols">;</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="keyword">and</code><code class="plain">(</code><code class="atoms">true</code><code class="plain">,</code><code class="atoms">true</code><code class="plain">) </code><code class="symbols">-&gt;</code> <code class="atoms">true</code><code class="symbols">.</code></span></span></div></div></div>

<p>Under success typing, the inferred type of the function would be <code>and(_,_) -&gt; bool()</code>, where <var>_</var> means 'anything'. The reason for this is simple: when running an Erlang program and calling this function with the arguments <code>false</code> and <code>42</code>, the result would still be 'false'. The use of the <code>_</code> wildcard in pattern matching made it that in practice, any argument can be passed as long as one of them is 'false' for the function to work. ML types would have thrown a fit (and its users had a heart attack) if you had called the function this way. Not Erlang. It might make more sense to you if you decide to read the paper on the <a class="external" href="http://www.it.uu.se/research/group/hipe/papers/succ_types.pdf" title="Tobias Lindahl &amp; Constantinos Sagonas - Practical Type Inference Based on Success Typings">implementation of success types</a>, which explains the rationale behind the behavior. I really encourage any type junkies out there to read it, it's an interesting and practical implementation definition.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">在成功类型法下，该函数的推断类型为&nbsp;<code>and(_,_) -&gt; bool()</code>&nbsp;，其中&nbsp;<var style="background-color: rgb(255, 255, 255);">_</var>&nbsp;表示 "任何东西" 。原因很简单：当运行一个 Erlang 程序，用参数&nbsp;<code>false</code>&nbsp;和&nbsp;<code>42</code>&nbsp;调用这个函数时，结果仍然是 'false' 。在模式匹配中使用&nbsp;<code>_</code>&nbsp;通配符使得在实践中，任何参数都可以被传递，只要其中一个是 'false' ，该函数就能工作。如果你这样调用函数， ML 类型会大发雷霆（其用户也会心脏病发作）。而 Erlang 不会。如果你决定阅读关于成功类型的实现（&nbsp;<a class="external" href="http://www.it.uu.se/research/group/hipe/papers/succ_types.pdf" title="Tobias Lindahl &amp; Constantinos Sagonas - Practical Type Inference Based on Success Typings" style="font-size: 12.8px; background-color: rgb(255, 255, 255);">implementation of success types</a>&nbsp;）的论文，这对你来说可能更有意义，它解释了行为背后的原理。我真的鼓励任何类型迷们去读它，这是一个有趣而实用的实现定义。</hcfy-result><!--hcfy-anchor--></p>

<p>The details about type definitions and function annotations are described in the Erlang Enhancement Proposal 8 (<a class="external" href="http://www.erlang.org/eeps/eep-0008.html" title="EEP 8">EEP 8</a>). If you're interested in using success typings in Erlang, check out the <a class="external" href="http://user.it.uu.se/~tobiasl/publications/typer.pdf" title="TypEr: A Type Annotator of Erlang Code">TypEr application</a> and Dialyzer, both part of the standard distribution. To use them, type in <code>$ typer --help</code> and <code>$ dialyzer --help</code> (<code>typer.exe --help</code> and <code>dialyzer.exe --help</code> for Windows, if they're accessible from the directory you are currently in).<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">关于类型定义和函数注解的细节在 Erlang Enhancement Proposal 8 (<a class="external" href="http://www.erlang.org/eeps/eep-0008.html" title="EEP 8" style="font-size: 12.8px; background-color: rgb(255, 255, 255);">EEP 8</a>) 中描述。如果你对在 Erlang 中使用成功类型感兴趣，可以看看&nbsp;<a class="external" href="http://user.it.uu.se/~tobiasl/publications/typer.pdf" title="TypEr: A Type Annotator of Erlang Code" style="font-size: 12.8px; background-color: rgb(255, 255, 255);">TypEr application</a>&nbsp;和 Dialyzer ，它们都是标准发行版的一部分。要使用它们，请（在 SHell ）键入&nbsp;<code>$ typer --help</code>&nbsp;和&nbsp;<code>$ dialyzer --help</code>&nbsp;（ Windows 下是&nbsp;<code>typer.exe --help</code>&nbsp;和&nbsp;<code>dialyzer.exe --help</code>&nbsp;如果它们可以从你目前的目录中就这样访问的话）。</hcfy-result><!--hcfy-anchor--></p>

<p>TypEr will be used to generate type annotations for functions. Used on this small <a class="source" href="https://learnyousomeerlang.com/static/erlang/fifo.erl" title="A Queue module">FIFO implementation</a>, it spits the following type annotations:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">&nbsp;TypEr 将被用来为函数生成类型注释。在这个小的 FIFO 实现（&nbsp;<a class="source" href="https://learnyousomeerlang.com/static/erlang/fifo.erl" title="A Queue module" style="font-size: 12.8px; background-color: rgb(255, 255, 255);">FIFO implementation</a>&nbsp;）中，它吐出了以下类型注释：</hcfy-result><!--hcfy-anchor--></p>

<div id="highlighter_551454" class="syntaxhighlighter nogutter "><div class="bar                            show"><div class="toolbar"><a href="#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a><a href="#about" title="?" class="item about" style="width: 16px; height: 16px;">?<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__">翻译结果时出错。错误信息：翻译时出错了，错误消息：加载超时。</hcfy-result><!--hcfy-anchor--></a></div></div><div class="lines"><div class="line alt1"><code class="number">1.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">%% File: fifo.erl</code></span></span></div><div class="line alt2"><code class="number">2.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">%% --------------</code></span></span></div><div class="line alt1"><code class="number">3.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">-spec</code> <code class="functions">new</code><code class="plain">() </code><code class="symbols">-&gt;</code> <code class="plain">{</code><code class="atoms">'fifo'</code><code class="plain">,[],[]}</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">4.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">-spec</code> <code class="functions">push</code><code class="plain">({</code><code class="atoms">'fifo'</code><code class="plain">,</code><code class="symbols">_</code><code class="plain">,</code><code class="symbols">_</code><code class="plain">},</code><code class="symbols">_</code><code class="plain">) </code><code class="symbols">-&gt;</code> <code class="plain">{</code><code class="atoms">'fifo'</code><code class="functions">,nonempty_maybe_improper_list</code><code class="plain">(),</code><code class="symbols">_</code><code class="plain">}</code><code class="symbols">.</code></span></span></div><div class="line alt1"><code class="number">5.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">-spec</code> <code class="functions">pop</code><code class="plain">({</code><code class="atoms">'fifo'</code><code class="plain">,</code><code class="symbols">_</code><code class="functions">,maybe_improper_list</code><code class="plain">()}) </code><code class="symbols">-&gt;</code> <code class="plain">{</code><code class="symbols">_</code><code class="plain">,{</code><code class="atoms">'fifo'</code><code class="plain">,</code><code class="symbols">_</code><code class="plain">,</code><code class="symbols">_</code><code class="plain">}}</code><code class="symbols">.</code></span></span></div><div class="line alt2"><code class="number">6.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">-spec</code> <code class="functions">empty</code><code class="plain">({</code><code class="atoms">'fifo'</code><code class="plain">,</code><code class="symbols">_</code><code class="plain">,</code><code class="symbols">_</code><code class="plain">}) </code><code class="symbols">-&gt;</code> <code class="functions">bool</code><code class="plain">()</code><code class="symbols">.</code></span></span></div></div></div>

<img class="right explanation" src="https://learnyousomeerlang.com/static/img/fifo.png" width="237" height="162" alt="Implementation of fifo (queues): made out of two stacks (last-in first-out)." title="Implementation of fifo (queues): made out of two stacks (last-in first-out).">

<p>Which is pretty much right. Improper lists should be avoided because <code>lists:reverse/1</code> doesn't support them, but someone bypassing the module's interface would be able to get through it and submit one. In this case, the functions <code>push/2</code> and <code>pop/2</code> might still succeed for a few calls before they cause an exception. This either tells us to add guards or refine our type definitions manually. Suppose we add the signature <code>-spec push({fifo,list(),list()},_)&nbsp;-&gt; {fifo,nonempty_list(),list()}.</code> and a function that passes an improper list to <code>push/2</code> to the module: when scanning it in Dialyzer (which checks and matches the types), the error message <samp>"The call fifo:push({fifo,[1|2],[]},3) breaks the contract '&lt;Type definition here&gt;'</samp> is output.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">这几乎是正确的。不恰当的列表应该被避免，因为&nbsp;<code>lists:reverse/1</code>&nbsp;不支持它们，但有人能绕过模块的接口通过它提交一个。在这种情况下，函数&nbsp;<code>push/2</code>&nbsp;和&nbsp;<code>pop/2</code>&nbsp;在引起异常之前仍可能成功被调用几次。这要么告诉我们，要么添加守护、要么手动完善我们的类型定义。假设我们添加了签名&nbsp;<code>-spec push({fifo,list(),list()},_)&nbsp;-&gt; {fifo,nonempty_list(),list()}.</code>&nbsp;和一个向&nbsp;<code>push/2</code>&nbsp;传递不当列表的函数的模块：当在 Dialyzer （检查和匹配类型）中扫描它时，就会输出错误信息&nbsp;<samp style="background-color: rgb(255, 255, 255);">"The call fifo:push({fifo,[1|2],[]},3) breaks the contract '&lt;Type definition here&gt;'</samp>&nbsp;。</hcfy-result><!--hcfy-anchor--></p>

<p>Dialyzer will complain only when code will break other code, and if it does, it'll usually be right (it will complain about more stuff too, like clauses that will never match or general discrepancies). Polymorphic data types are also possible to write and analyze with Dialyzer: the <code>hd()</code> function could be annotated with <code>-spec([A])&nbsp;-&gt; A.</code> and be analyzed correctly, although Erlang programmers seem to rarely use this type syntax.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">&nbsp;Dialyzer 只在代码会破坏其他代码时才会抱怨，如果它抱怨了，它通常是正确的（它也会抱怨更多的东西，比如永远不会匹配的子句或一般的差异）。多态数据类型也可以用 Dialyzer 来编写和分析：&nbsp;<code>hd()</code>&nbsp;函数可以用&nbsp;<code>-spec([A])&nbsp;-&gt; A.</code>&nbsp;来注释，并被正确分析，尽管 Erlang 程序员似乎很少使用这种类型语法。</hcfy-result><!--hcfy-anchor--></p>

<div class="note koolaid">
	<p><strong>Don't drink too much Kool-Aid:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">不要喝太多的 Kool-Aid ：</hcfy-result><!--hcfy-anchor--></strong><br>
        Some of the things you can't expect Dialyzer and TypEr to do is type classes with constructors, first order types and recursive types. The types of Erlang are only annotations without effects or restrictions on actual compiling unless you enforce them yourself. The type checker will never tell you a program that can run right now (or has run for two years) has a type bug when it effectively causes no error when running (although you could have buggy code running correctly...)<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">你不能指望 Dialyzer 和 TypEr 做的一些事情是带有构造函数的类型类、一阶类型和递归类型。 Erlang 的类型只是注释，对实际编译没有影响或限制，除非你强制自己遵循它们。类型检查器永远不会告诉你一个现在可以运行的程序（或者已经运行了两年的程序）有一个类型错误，因为它在运行时实际上没有引起任何错误（尽管你可以让有错误的代码正常运行……）</hcfy-result><!--hcfy-anchor--></p>

    <p>While recursive types are something that would be really interesting to have, they're unlikely to ever appear in the current forms of TypEr and Dialyzer (the paper above explains why). Defining your own types to simulate recursive types by adding one or two levels manually is the best you can do at the moment.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">虽然递归类型是非常有趣的东西，但它们不太可能出现在 TypEr 和 Dialyzer 的现有形式中（上面的论文解释了原因）。通过手动添加一到两层来定义你自己的类型来模拟递归类型是你目前能做的最好的事情。</hcfy-result><!--hcfy-anchor--></p>

    <p>It's certainly not a full-blown type system, not as strict or powerful as what languages like Scala, Haskell or Ocaml propose. Its warning and error messages are also usually a bit cryptic and not really user friendly. However, it's still a very good compromise if you really can't live in a dynamic world or wish for additional safety; just expect it to be a tool in your arsenal, not too much more.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">它当然不是一个完整的类型系统，不像 Scala 、 Haskell 或 Ocaml 等语言提出的那样严格或强大。它的警告和错误信息通常也有点隐晦，并不真正对用户友好。然而，如果你真的不能生活在一个动态的世界里，或者希望获得额外的安全，它仍然是一个非常好的折衷方案；只是希望它成为你的一个工具，而不是太多。</hcfy-result><!--hcfy-anchor--></p>
</div>

<div class="note update">
    <p><strong>Update:<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">更新：</hcfy-result><!--hcfy-anchor--></strong><br>
       Since version R13B04, recursive types are now available as an experimental feature for Dialyzer. This makes the previous <em>Don't drink too much Kool-aid</em> partially wrong. Shame on me.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">从 R13B04 版本开始，递归类型现在可以作为 Dialyzer 的一个实验性功能。这使得之前的&nbsp;<em style="font-size: 14.4px; background-color: rgb(238, 237, 248);">Don't drink too much Kool-aid</em>&nbsp;的说法部分错误。我很惭愧。</hcfy-result><!--hcfy-anchor--></p>

    <p>Note that the <a class="docs" href="http://erlang.org/doc/reference_manual/typespec.html" title="Official Types and Functions Specifications spec">type documentation has also become official</a> (although it remains subject to change) and is more complete than what can be found in EEP8.<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">请注意，这个类型的文档也已经成为官方的（&nbsp;<a class="docs" href="http://erlang.org/doc/reference_manual/typespec.html" title="Official Types and Functions Specifications spec" style="font-size: 14.4px; background-color: rgb(238, 237, 248);">type documentation has also become official</a>&nbsp;）（尽管它仍然可以改变），并且比在 EEP8 中可以找到的更完整。</hcfy-result><!--hcfy-anchor--></p>

</div>
				<ul class="navigation">
											<li><a href="https://learnyousomeerlang.com/syntax-in-functions" title="Previous chapter">&lt; Previous<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">&lt; 上一页</hcfy-result><!--hcfy-anchor--></a></li>
										
					<li><a href="https://learnyousomeerlang.com/contents" title="Index">Index<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">索引</hcfy-result><!--hcfy-anchor--></a></li>
					
											<li><a href="https://learnyousomeerlang.com/recursion" title="Next chapter">Next &gt;<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__ __hcfy__result__inline__" contenteditable="true">下一页 &gt;</hcfy-result><!--hcfy-anchor--></a></li>
									</ul>
			</div><div></div></div><div></div><!-- content -->
			<div id="footer">
				<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/" title="Creative Commons License Details"><img src="https://learnyousomeerlang.com/static/img/cc.png" width="88" height="31" alt="Creative Commons Attribution Non-Commercial No Derivative License"></a>
				<p>Except where otherwise noted, content on this site is licensed under a Creative Commons Attribution Non-Commercial No Derivative License<hcfy-result class="__hcfy__result__both__ __hcfy__result__loaded__" contenteditable="true">除非另有说明，本网站的内容是以知识共享署名非商业性无衍生品许可协议授权的。</hcfy-result><!--hcfy-anchor--></p>
			</div> <!-- footer -->
		</div> <!-- wrapper -->
		<div id="grass">
	<script type="text/javascript" src="https://learnyousomeerlang.com/static/js/shCore.js"></script>
	<script type="text/javascript" src="https://learnyousomeerlang.com/static/js/shBrushErlang2.js?11"></script>
	<script type="text/javascript">
		SyntaxHighlighter.defaults.gutter = false;
		SyntaxHighlighter.all();
	</script>
	

</div></body></html>
